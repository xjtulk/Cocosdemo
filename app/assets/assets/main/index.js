System.register("chunks:///_virtual/audioManager.ts",["cc","./configuration.ts","./resourceUtil.ts"],(function(o){"use strict";var t,e,i,n,u,a,s;return{setters:[function(o){t=o.cclegacy,e=o.assert,i=o.AudioClip,n=o.warn,u=o.clamp01},function(o){a=o.configuration},function(o){s=o.resourceUtil}],execute:function(){t._RF.push({},"e478cuMHJdIHa5fP3m5UZ7S","audioManager",void 0);class c{constructor(){this.soundVolume=1}static get instance(){return this._instance||(this._instance=new c),this._instance}init(o){this.soundVolume=this.getConfiguration(!1)?1:0,c._audioSource=o}getConfiguration(o){let t;return t=o?a.instance.getGlobalData("music"):a.instance.getGlobalData("sound"),void 0===t||"true"===t}playMusic(o){const t=c._audioSource;e(t,"AudioManager not inited!"),t.loop=o,t.playing||t.play()}playSound(o){const t=c._audioSource;e(t,"AudioManager not inited!");s.loadRes("gamePackage/audio/sound/"+o,i,((o,e)=>{o?n("load audioClip failed: ",o):t.playOneShot(e,t.volume?this.soundVolume/t.volume:0)}))}setMusicVolume(o){const t=c._audioSource;e(t,"AudioManager not inited!"),o=u(o),t.volume=o}setSoundVolume(o){this.soundVolume=o}openMusic(){this.setMusicVolume(.8),a.instance.setGlobalData("music","true")}closeMusic(){this.setMusicVolume(0),a.instance.setGlobalData("music","false")}openSound(){this.setSoundVolume(1),a.instance.setGlobalData("sound","true")}closeSound(){this.setSoundVolume(0),a.instance.setGlobalData("sound","false")}}o("audioManager",c),c._instance=void 0,c._audioSource=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/balance.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./util.ts","./clientEvent.ts","./uiManager.ts","./audioManager.ts","./constant.ts","./gameLogic.ts","./LanguageData.ts"],(function(e){"use strict";var i,t,n,r,l,s,a,o,u,c,h,p,g,b,f,m,d,v;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Sprite,l=e.Label,s=e.Widget,a=e.Node,o=e.SpriteFrame,u=e._decorator,c=e.Component},function(e){h=e.playerData},function(e){p=e.util},function(e){g=e.clientEvent},function(e){b=e.uiManager},function(e){f=e.audioManager},function(e){m=e.constant},function(e){d=e.gameLogic},function(e){v=e.i18n}],execute:function(){var y,w,L,F,M,C,z,N,A,E,P,D,S,T,I,_,B,G,R,U,O,k,x,H,W,Y,j,q,V,X,Z,$,J,K,Q;n._RF.push({},"b6b06mpFMlIZqLpxXisU3Cu","balance",void 0);const{ccclass:ee,property:ie}=u;e("balance",(y=ee("balance"),w=ie(r),L=ie(r),F=ie({type:l}),M=ie({type:l}),C=ie(s),z=ie({type:a,displayName:"进度项"}),N=ie(o),A=ie(o),E=ie(o),P=ie(o),D=ie(o),S=ie(l),T=ie(l),I=ie(l),_=ie(r),B=ie(a),y((U=i((R=class extends c{constructor(...e){super(...e),t(this,"spStart",U,this),t(this,"spEnd",O,this),t(this,"lbCurLevel",k,this),t(this,"lbTargetLevel",x,this),t(this,"wgMenu",H,this),t(this,"progress",W,this),t(this,"imgLevelFinished",Y,this),t(this,"imgLevelUnfinished",j,this),t(this,"imgProgressNoActive",q,this),t(this,"imgProgressActive",V,this),t(this,"imgProgressFinished",X,this),t(this,"lbTakeCount",Z,this),t(this,"lbGetNormal",$,this),t(this,"lbGetMulti",J,this),t(this,"spIcon",K,this),t(this,"nodeDouble",Q,this),this.rewardMoney=0,this.isFinishLevel=!1,this.showBalanceTimes=0}start(){}show(e,i,t,n,l,s){this.showBalanceTimes++;let a=t?i:i-1;const o=this.progress.length;for(let e=0;e<n&&!(n>o);e++)this.progress[e].active=!0,this.progress[e].getComponent(r).spriteFrame=e<a?this.imgProgressFinished:this.imgProgressNoActive;t||(this.progress[a].getComponent(r).spriteFrame=this.imgProgressActive);for(let e=n;e<this.progress.length;e++)this.progress[e].active=!1;this.lbCurLevel.string=e.toString(),this.lbTargetLevel.string=`${e+1}`,this.isFinishLevel=s,this.spStart.spriteFrame=this.imgLevelFinished,this.spEnd.spriteFrame=s?this.imgLevelFinished:this.imgLevelUnfinished;let u=a>=0?a:0;this.lbTakeCount.string=v.t("balance.你完成了%{value}个订单",{value:u}),this.rewardMoney=l,this.lbGetNormal.string=p.formatMoney(l),this.lbGetMulti.string=p.formatMoney(3*l),s&&f.instance.playSound(m.AUDIO_SOUND.WIN),d.updateRewardIcon(m.SHARE_FUNCTION.BALANCE,this.spIcon);let c=Math.floor(100*Math.random());this.nodeDouble.active=c<30}onBtnGetNormalClick(){this.rewardOver(this.rewardMoney)}onBtnGetMultiClick(){d.openReward(m.SHARE_FUNCTION.BALANCE,(e=>{e||this.rewardOver(3*this.rewardMoney)}))}rewardOver(e){this.isFinishLevel?(d.finishBuyTask(m.BUY_CAR_TYPE.PASS_LEVEL,h.instance.playerInfo.level,!1),h.instance.passLevel(e)):h.instance.updatePlayerInfo("gold",e),e>0&&d.showFlyReward(m.REWARD_TYPE.GOLD,(()=>{g.dispatchEvent("updateGold")})),b.instance.hideDialog("fight/balance"),h.instance.playerInfo.level,h.instance.isComeFromBalance=!1,g.dispatchEvent("newLevel",this.isFinishLevel)}}).prototype,"spStart",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(R.prototype,"spEnd",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=i(R.prototype,"lbCurLevel",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i(R.prototype,"lbTargetLevel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=i(R.prototype,"wgMenu",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i(R.prototype,"progress",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=i(R.prototype,"imgLevelFinished",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i(R.prototype,"imgLevelUnfinished",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i(R.prototype,"imgProgressNoActive",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i(R.prototype,"imgProgressActive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i(R.prototype,"imgProgressFinished",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=i(R.prototype,"lbTakeCount",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=i(R.prototype,"lbGetNormal",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i(R.prototype,"lbGetMulti",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i(R.prototype,"spIcon",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i(R.prototype,"nodeDouble",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=R))||G));n._RF.pop()}}}));

System.register("chunks:///_virtual/blockInputEvent.ts",["cc"],(function(t){"use strict";var o,s,n,i;return{setters:[function(t){o=t.cclegacy,s=t.Component,n=t.Node,i=t._decorator}],execute:function(){var e;o._RF.push({},"968ba6c9F9AupY/AbKjAj++","blockInputEvent",void 0);const{ccclass:p,property:h}=i;t("blockInputEvent",p("blockInputEvent")(e=class extends s{start(){}onEnable(){this.node.on(n.EventType.TOUCH_START,this.stopPropagation,this),this.node.on(n.EventType.TOUCH_END,this.stopPropagation,this),this.node.on(n.EventType.TOUCH_MOVE,this.stopPropagation,this),this.node.on(n.EventType.TOUCH_CANCEL,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_DOWN,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_ENTER,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_MOVE,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_LEAVE,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_UP,this.stopPropagation,this),this.node.on(n.EventType.MOUSE_WHEEL,this.stopPropagation,this)}onDisable(){this.node.off(n.EventType.TOUCH_START,this.stopPropagation,this),this.node.off(n.EventType.TOUCH_END,this.stopPropagation,this),this.node.off(n.EventType.TOUCH_MOVE,this.stopPropagation,this),this.node.off(n.EventType.TOUCH_CANCEL,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_DOWN,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_ENTER,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_MOVE,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_LEAVE,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_UP,this.stopPropagation,this),this.node.off(n.EventType.MOUSE_WHEEL,this.stopPropagation,this)}stopPropagation(t){t.propagationImmediateStopped=!0,t.propagationStopped=!0}})||e);o._RF.pop()}}}));

System.register("chunks:///_virtual/btnAdapter.ts",["./rollupPluginModLoBabelHelpers.js","cc","./audioManager.ts"],(function(e){"use strict";var t,i,n,r,o,c,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Button,o=e._decorator,c=e.Component},function(e){a=e.audioManager}],execute:function(){var l,s,u,p,d,b,h,f,m,y,k,S,v;n._RF.push({},"f130br9GwZGkJEkRGonhXxR","btnAdapter",void 0);const{ccclass:g,property:P,menu:C,requireComponent:w,disallowMultiple:z}=o;e("btnAdapter",(l=g("btnAdapter"),s=C("自定义组件/btnAdapter"),u=w(r),p=P({tooltip:"点击后是否播放点击音效"}),d=P({tooltip:"点击音效名"}),b=P({tooltip:"是否禁止快速二次点击"}),h=P({tooltip:"点击后多久才能再次点击,仅isPreventSecondClick为true生效"}),l(f=s(f=u(f=z((y=t((m=class extends c{constructor(...e){super(...e),i(this,"isPlaySound",y,this),i(this,"clickSoundName",k,this),i(this,"isPreventSecondClick",S,this),i(this,"preventTime",v,this)}start(){const e=this.node.getComponent(r);this.node.on("click",(()=>{this.isPreventSecondClick&&(e.interactable=!1,this.scheduleOnce((()=>{e.node&&(e.interactable=!0)}),this.preventTime)),this.isPlaySound&&a.instance.playSound(this.clickSoundName,!1)}))}}).prototype,"isPlaySound",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),k=t(m.prototype,"clickSoundName",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"click"}}),S=t(m.prototype,"isPreventSecondClick",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),v=t(m.prototype,"preventTime",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),f=m))||f)||f)||f)||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/car.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./clientEvent.ts","./audioManager.ts","./constant.ts","./resourceUtil.ts","./poolManager.ts"],(function(t){"use strict";var i,e,s,n,o,r,h,a,l,c,d,g,p,u,R,P,v,m;return{setters:[function(t){i=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Node,o=t._decorator,r=t.Component,h=t.instantiate,a=t.Vec3,l=t.ParticleSystem,c=t.RigidBody,d=t.Collider,g=t.ERigidBodyType},function(t){p=t.fightConstants},function(t){u=t.clientEvent},function(t){R=t.audioManager},function(t){P=t.constant},function(t){v=t.resourceUtil},function(t){m=t.poolManager}],execute:function(){var T,S,C,y,_,w,M,A,O;s._RF.push({},"e6d4fVD3pxJ7Y1Khf8fRUoa","car",void 0);const{ccclass:b,property:f}=o;t("car",(T=b("car"),S=f({displayName:"最大移动速度"}),C=f({displayName:"最小移动速度"}),y=f(n),T((M=i((w=class extends r{set isMoving(t){this._isMoving=t,this.updateBackLight()}get isMoving(){return this._isMoving}set isHosting(t){this._isHosting=t,this.updateBackLight()}get isHosting(){return this._isHosting}set isInvincible(t){if(this._isInvincible=t,t){if(this.nodeInvincible)return void(this.nodeInvincible.active=!0);v.getEffect("shield",((t,i)=>{t?console.error(t):(this.nodeInvincible=h(i),this.nodeInvincible.parent=this.node)}))}else this.nodeInvincible&&(this.nodeInvincible.destroy(),this.nodeInvincible=null)}get isInvincible(){return this._isInvincible}constructor(){super(),this._isMoving=!1,e(this,"maxSpeed",M,this),e(this,"minSpeed",A,this),e(this,"nodeGas",O,this),this._minSpeed=-1,this._maxSpeed=-1,this.manager=null,this.isMain=!1,this.currentSpeed=0,this.accelerate=2,this.originRotation=0,this.targetRotation=0,this.curRoadPoint=null,this.circleCenterPoint=new a,this.quarter=0,this._nodeGasInst=null,this.entry=null,this.forward=new a(0,0,-1),this.posTarget=new a,this.posSrc=new a,this._callback=null,this.isOver=!1,this.curProgress=0,this.maxProgress=0,this.hasCustomer=!1,this.lastPos=new a,this.lastRotation=new a,this.isBraking=!1,this.arrTyres=[],this.curTyreRotation=0,this.nodeCarBackLight=null,this.tootingCoolTime=0,this.isCarMoving=!1,this.nodeInvincible=null,this._isHosting=!1,this._isInvincible=!1,this.invincibleRotation=0}start(){this._minSpeed=this.minSpeed,this._maxSpeed=this.maxSpeed;let t=this.node.getChildByPath("RootNode/tyre1");t&&(this.arrTyres=[t,this.node.getChildByPath("RootNode/tyre2"),this.node.getChildByPath("RootNode/tyre3"),this.node.getChildByPath("RootNode/tyre4")],this.nodeCarBackLight=this.node.getChildByPath("RootNode/light1")),v.getEffect("gas",((t,i)=>{if(t)return;const e=m.instance.getNode(i,this.nodeGas);this._nodeGasInst=e.getComponent(l),e.setPosition(new a(0,0,0))}))}markMainCar(t){this.isMain=t;let i=this.node.getComponent(c),e=this.node.getComponent(d);e.off("onCollisionEnter",this.onCollisionEnter,this),t?(i.setGroup(p.CAR_GROUP.MAIN_CAR),i.setMask(p.CAR_GROUP.OTHER_CAR),i.type=g.KINEMATIC,e.on("onCollisionEnter",this.onCollisionEnter,this)):(i.setGroup(p.CAR_GROUP.OTHER_CAR),i.setMask(-1),i.type=g.DYNAMIC)}setEntry(t){this.entry=t,this.reset()}onCollisionEnter(t){if(!this.isMain)return;if("ground"===t.otherCollider.node.name)return;let i=t.otherCollider.node;t.otherCollider.node===this.node&&(i=t.selfCollider.node);let e=i.getComponent("car");if(!e.isOver){e.isOver=!0;let t=i.getComponent(c);t.useGravity=!0,this.isInvincible?t.applyForce(new a(0,1e4,-3e3),new a(0,.5,0)):t.applyForce(new a(0,1500,-3e3),new a(0,.5,0))}if(this.isOver)return;R.instance.playSound(P.AUDIO_SOUND.CRASH);let s=this.node.getComponent(c);if(this.isInvincible)return this.lastPos=this.node.worldPosition,this.lastRotation=this.node.eulerAngles,s.enabled=!1,this.scheduleOnce((()=>{this.isInvincible=!1,s.enabled=!0,this.revive(),this.currentSpeed=this._minSpeed}),.1),void this.scheduleOnce((()=>{m.instance.putNode(i)}),.3);this.lastPos=this.node.worldPosition,this.lastRotation=this.node.eulerAngles,this.isOver=!0,s.setGroup(p.CAR_GROUP.MAIN_CAR),s.setMask(p.CAR_GROUP.OTHER_CAR|p.CAR_GROUP.NORMAL),u.dispatchEvent("gameOver",!1)}updateBackLight(){this.nodeCarBackLight&&(this.nodeCarBackLight.active=!this.isMoving||this.isHosting)}startRunning(){this.isOver||(this.isMoving=!0,this.accelerate=.4,this._nodeGasInst&&this._nodeGasInst.play(),this.isBraking&&(u.dispatchEvent("endBraking"),this.isBraking=!1))}startWithMinSpeed(){this.currentSpeed=this.minSpeed,this.stopRunning(!0),this._nodeGasInst&&this._nodeGasInst.play()}stopRunning(t){this.isOver||(this.isMoving=!1,this.accelerate=-.15,this.isBraking||t||(u.dispatchEvent("startBraking"),this.isBraking=!0))}stopImmediately(){this.isMoving=!1,this.currentSpeed=0}setMoveOverListener(t){this._callback=t}resetPhysical(){this.isOver=!1,this.isMain&&this.markMainCar(!0);let t=this.node.getComponent(c);t.useGravity=!1,t.sleep(),t.wakeUp()}revive(){this.resetPhysical(),console.log("revive pos ",this.lastPos);let t=new a(this.lastPos.x,0,this.lastPos.z);this.node.setWorldPosition(t),this.node.eulerAngles=this.lastRotation,this.isMoving=!1,this.currentSpeed=0}reset(){this.resetPhysical(),this.isMain&&(this.curProgress=0,this.hasCustomer=!1,this._nodeGasInst&&this._nodeGasInst.stop(),this.isInvincible=!1),this.tootingCoolTime=0,this.curRoadPoint=this.entry.getComponent("roadPoint"),this.posSrc.set(this.entry.worldPosition),this.posTarget.set(this.curRoadPoint.next.worldPosition),this.node.setWorldPosition(this.entry.worldPosition),this.posTarget.z!==this.posSrc.z?this.posTarget.z<this.posSrc.z?this.node.eulerAngles=new a(0,360,0):this.node.eulerAngles=new a(0,180,0):this.posTarget.x>this.posSrc.x?this.node.eulerAngles=new a(0,270,0):this.node.eulerAngles=new a(0,90,0),this.originRotation=this.node.eulerAngles.y,this.targetRotation=this.originRotation,this.isMoving=!1,this.isHosting=!1,this.currentSpeed=0,this._minSpeed>0&&(this.minSpeed=this._minSpeed,this.maxSpeed=this._maxSpeed)}greeting(){this.isHosting=!0,this.curProgress++,this.hasCustomer=!0,u.dispatchEvent("greetingCustomer"),this.manager.greeting(this.node.worldPosition,this.curRoadPoint.direction,(()=>{this.isMoving=!1,this.currentSpeed=0,this.isHosting=!1,u.dispatchEvent("showGuide",!0)}))}takeCustomer(){this.isHosting=!0,this.hasCustomer=!1,u.dispatchEvent("takeCustomer"),this.manager.takeCustomer(this.node.worldPosition,this.curRoadPoint.direction,this.curProgress===this.maxProgress,(()=>{this.isMoving=!1,this.currentSpeed=0,this.isHosting=!1,u.dispatchEvent("showGuide",!0)}))}arrivalPoint(){if(this.node.setWorldPosition(this.posTarget),this.curRoadPoint.moveType===p.ROAD_MOVE_TYPE.BEND&&(this.node.eulerAngles=new a(0,this.targetRotation,0)),this.posSrc.set(this.posTarget),this.posTarget.set(a.ZERO),this.curRoadPoint.next){if(this.curRoadPoint=this.curRoadPoint.next.getComponent("roadPoint"),this.isMain&&(this.curRoadPoint.type===p.ROAD_POINT_TYPE.GREETING?this.greeting():this.curRoadPoint.type===p.ROAD_POINT_TYPE.PLATFORM?this.takeCustomer():this.curRoadPoint.type===p.ROAD_POINT_TYPE.END&&(u.dispatchEvent("gameOver",!0),this.moveAfterFinished())),this.curRoadPoint.next?this.posTarget.set(this.curRoadPoint.next.worldPosition):this._callback&&this._callback(this),this.originRotation=this.node.eulerAngles.y,this.targetRotation=this.originRotation,this.curRoadPoint.moveType===p.ROAD_MOVE_TYPE.BEND){if(this.curRoadPoint.clockwise){this.originRotation=this.originRotation<=0?360+this.originRotation:this.originRotation,this.targetRotation=this.originRotation-90,this.posTarget.x>this.posSrc.x&&this.posTarget.z<this.posSrc.z||this.posTarget.x<this.posSrc.x&&this.posTarget.z>this.posSrc.z?this.circleCenterPoint=new a(this.posTarget.x,0,this.posSrc.z):this.circleCenterPoint=new a(this.posSrc.x,0,this.posTarget.z);let t=a.subtract(new a,this.circleCenterPoint,this.posSrc).length();this.quarter=90/(Math.PI*t/2)}else{this.originRotation=this.originRotation>=360?this.originRotation-360:this.originRotation,this.targetRotation=this.originRotation+90,this.posTarget.x>this.posSrc.x&&this.posTarget.z<this.posSrc.z||this.posTarget.x<this.posSrc.x&&this.posTarget.z>this.posSrc.z?this.circleCenterPoint=new a(this.posSrc.x,0,this.posTarget.z):this.circleCenterPoint=new a(this.posTarget.x,0,this.posSrc.z);let t=a.subtract(new a,this.circleCenterPoint,this.posSrc).length();this.quarter=90/(Math.PI*t/2)}this.node.eulerAngles=new a(0,this.originRotation,0)}}else this.curRoadPoint=null,this._callback&&this._callback(this)}update(t){if(this.nodeInvincible&&(this.invincibleRotation+=200*t,this.invincibleRotation>360&&(this.invincibleRotation-=360),this.nodeInvincible.eulerAngles=new a(this.invincibleRotation,0,0)),this.tootingCoolTime>0&&(this.tootingCoolTime=this.tootingCoolTime>t?this.tootingCoolTime-t:0),!this.isMoving&&this.currentSpeed<.01||this.posTarget.equals(a.ZERO)||this.isHosting||this.isOver)this.isCarMoving=!1;else{if(this.isCarMoving=!0,this.currentSpeed+=this.accelerate*t,this.currentSpeed=this.currentSpeed>this.maxSpeed?this.maxSpeed:this.currentSpeed,this.currentSpeed<this.minSpeed&&(this.currentSpeed=this.minSpeed,this.isBraking&&(u.dispatchEvent("endBraking"),this.isBraking=!1)),this.arrTyres.length>0){this.curTyreRotation-=200*this.currentSpeed,this.curTyreRotation<-360&&(this.curTyreRotation+=360);let t=new a(this.curTyreRotation,0);for(let i=0;i<this.arrTyres.length;i++){this.arrTyres[i].eulerAngles=t}}switch(this.curRoadPoint.moveType){case p.ROAD_MOVE_TYPE.LINE:let t=new a;a.subtract(t,this.posTarget,this.node.worldPosition),t.normalize(),a.multiplyScalar(t,t,this.currentSpeed);let i=this.node.worldPosition;t.add(i),this.posTarget.z!==this.posSrc.z?this.posTarget.z<this.posSrc.z?(this.node.eulerAngles=new a(0,360,0),t.z<this.posTarget.z&&(t.z=this.posTarget.z)):(this.node.eulerAngles=new a(0,180,0),t.z>this.posTarget.z&&(t.z=this.posTarget.z)):this.posTarget.x>this.posSrc.x?(this.node.eulerAngles=new a(0,270,0),t.x>this.posTarget.x&&(t.x=this.posTarget.x)):(this.node.eulerAngles=new a(0,90,0),t.x<this.posTarget.x&&(t.x=this.posTarget.x)),this.node.setWorldPosition(t);break;case p.ROAD_MOVE_TYPE.BEND:let e=this.targetRotation-this.originRotation,s=this.node.eulerAngles.y<0?360+this.node.eulerAngles.y:this.node.eulerAngles.y;this.node.eulerAngles.y>360&&(s=this.node.eulerAngles.y-360);let n=e*Math.abs((s-this.originRotation)/e)+this.currentSpeed*this.quarter*(this.targetRotation>this.originRotation?1:-1);Math.abs(e)<Math.abs(n)&&(n=e);let o=this.originRotation+n,r=a.rotateY(new a,this.posSrc,this.circleCenterPoint,n*Math.PI/180);this.node.setWorldPosition(r),this.node.eulerAngles=new a(0,o,0)}a.subtract(new a,this.posTarget,this.node.worldPosition).lengthSqr()<.001&&this.arrivalPoint()}}moveAfterFinished(){this.isMoving=!0,this.minSpeed=.2,this.maxSpeed=.2,this.startRunning()}tooting(){if(this.tootingCoolTime>0)return;this.tootingCoolTime=5;let t=1===Math.floor(2*Math.random())?P.AUDIO_SOUND.TOOTING1:P.AUDIO_SOUND.TOOTING2;R.instance.playSound(t)}}).prototype,"maxSpeed",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),A=i(w.prototype,"minSpeed",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.2}}),O=i(w.prototype,"nodeGas",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=w))||_));s._RF.pop()}}}));

System.register("chunks:///_virtual/carManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./car.ts","./follow.ts","./roadPoint.ts","./clientEvent.ts","./resourceUtil.ts","./poolManager.ts","./playerData.ts","./constant.ts","./localConfig.ts","./fightConstants.ts"],(function(t){"use strict";var e,a,i,n,r,s,o,h,l,c,C,g,p,m,f,u,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,n=t._decorator,r=t.Component,s=t.Vec3,o=t.macro},function(t){h=t.car},function(t){l=t.follow},function(t){c=t.roadPoint},function(t){C=t.clientEvent},function(t){g=t.resourceUtil},function(t){p=t.poolManager},function(t){m=t.playerData},function(t){f=t.constant},function(t){u=t.localConfig},function(t){d=t.fightConstants}],execute:function(){var M,v,w,E,I;i._RF.push({},"0ab97H51jJALJr6aO9gzNGg","carManager",void 0);const{ccclass:y,property:_}=n;t("carManager",(M=y("carManager"),v=_({type:l}),M((I=e((E=class extends r{constructor(...t){super(...t),a(this,"followCamera",I,this),this.gameStart=!1}start(){}onEnable(){C.on("showInvincible",this.showInvincible,this)}onDisable(){C.off("showInvincible",this.showInvincible,this)}showInvincible(){this.mainCar&&(this.mainCar.isInvincible=!0)}init(t,e){this._fightMap=t,this._customerManager=e,this.creatMainCar()}creatMainCar(){let t=m.instance.showCar?m.instance.showCar:f.INITIAL_CAR,e=u.instance.queryByID("car",t.toString()),a=e?e.model:f.MIN_CAR_ID;g.getCar(a,((t,e)=>{if(t)return void console.error(t);this.mainCar&&p.instance.putNode(this.mainCar.node);let a=p.instance.getNode(e,this.node);this.mainCar=a.getComponent("car"),this.mainCar.markMainCar(!0),this.mainCar.setEntry(this._fightMap.path[0]),this.mainCar.manager=this._customerManager,this.mainCar.maxProgress=this._fightMap.levelProgressCnt,this.mainCar.setMoveOverListener((()=>{})),this.followCamera.followTarget=a,this.followCamera.showStart()}))}preloadAICar(t){let e=[];for(let t=1;t<this._fightMap.path.length;t++){let a=this._fightMap.path[t].getComponent(c);if(a.type!==d.ROAD_POINT_TYPE.AI_START)return;let i=a.cars.split(",");for(let t=0;t<i.length;t++)-1===e.indexOf(i[t])&&e.push(i[t])}let a=0;g.getCarsBatch(e,(t=>{a++,a<=15&&C.dispatchEvent("updateLoading",2)}),(()=>{a<=15&&C.dispatchEvent("updateLoading",30-2*a),t&&t()}))}startGenerateEnemy(){this.genAICar=this.genAICar.bind(this);for(let t=1;t<this._fightMap.path.length;t++){this._fightMap.path[t].getComponent(c).startGenerateCar(this.genAICar)}}stopGenerateEnemy(){for(let t=1;t<this._fightMap.path.length;t++){this._fightMap.path[t].getComponent(c).stopGenerateCar()}}genAICar(t,e){g.getCar(e,((e,a)=>{if(e)return void console.error(e);let i=p.instance.getNode(a,this.node).getComponent("car");i.setEntry(t.node),i.minSpeed=t.carSpeed,i.maxSpeed=t.carSpeed,i.startRunning(),i.markMainCar(!1),i.setMoveOverListener((t=>{p.instance.putNode(t.node)}))}))}reset(){this.mainCar.setEntry(this._fightMap.path[0]),this.mainCar.maxProgress=this._fightMap.levelProgressCnt,this.followCamera.followTarget=this.mainCar.node,this.stopGenerateEnemy(),this.recycleAllAICar()}recycleAllAICar(){let t=[];this.node.children.forEach((e=>{t.push(e)}),this),t.forEach((t=>{let e=t.getComponent("car");e&&!e.isMain&&p.instance.putNode(t)}))}recycleLimitAICar(){let t=[];this.node.children.forEach((e=>{t.push(e)}),this),t.forEach((t=>{let e=t.getComponent("car"),a=s.distance(t.worldPosition,this.mainCar.node.worldPosition);e&&!e.isMain&&Math.abs(a)<=5?p.instance.putNode(t):(e.isOver=!1,e.startRunning())}))}controlMainCar(t){this.gameStart&&(t?(C.dispatchEvent("showGuide",!1),this.mainCar.startRunning()):this.mainCar.stopRunning())}startGame(){this.gameStart=!0,C.dispatchEvent("showGuide",!0),this.mainCar.startWithMinSpeed(),this.startGenerateEnemy(),this.schedule(this.checkCarIsCloser,.2,o.REPEAT_FOREVER)}gameOver(){this.gameStart=!1,this.followCamera.followTarget=null,this.stopGenerateEnemy(),this.unschedule(this.checkCarIsCloser),this.node.children.forEach((t=>{t.getComponent(h).stopImmediately()}))}changeCameraFollowRotation(){this.followCamera.isFollowRotation=!this.followCamera.isFollowRotation}getCurrentProgress(){return{cur:this.mainCar.curProgress,isOver:!this.mainCar.hasCustomer}}revive(){this.recycleLimitAICar(),this.mainCar.revive(),this.followCamera.followTarget=this.mainCar.node,this.startGenerateEnemy()}checkCarIsCloser(){if(!this.mainCar.isCarMoving)return;let t=this.mainCar.node,e=t.getWorldPosition();this.node.children.forEach((a=>{if(a!==t){let t=a.getWorldPosition(),i=a.forward;t.x-=i.x,t.z-=i.z,Math.abs(t.x-e.x)<2&&Math.abs(t.z-e.z)<2&&a.getComponent(h).tooting()}}))}}).prototype,"followCamera",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=E))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/clickBox.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./gameLogic.ts","./uiManager.ts","./constant.ts"],(function(e){"use strict";var i,t,s,r,o,n,c,l,a,u,h,d,p;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){s=e.cclegacy,r=e.ProgressBar,o=e.Node,n=e.Label,c=e.Sprite,l=e._decorator,a=e.Component},function(e){u=e.fightConstants},function(e){h=e.gameLogic},function(e){d=e.uiManager},function(e){p=e.constant}],execute:function(){var g,B,b,C,f,w,R,m,k,x,_,v,y,P,I,O,L;s._RF.push({},"884dcSQc2hHsJby3+7ljIyd","clickBox",void 0);const{ccclass:T,property:D}=l;e("clickBox",(g=T("clickBox"),B=D(r),b=D(o),C=D(n),f=D(o),w=D(o),R=D(o),m=D(c),g((_=i((x=class extends a{constructor(...e){super(...e),t(this,"progress",_,this),t(this,"nodeReward",v,this),t(this,"lbReward",y,this),t(this,"nodeBox",P,this),t(this,"nodeMenu",I,this),t(this,"nodeClickBtn",O,this),t(this,"spIcon",L,this),this.scheduleTime=0,this.curProgress=50,this.clickTimes=15,this.curClick=0,this.isOpenBox=!1,this.rewardValue=0}start(){}show(){this.scheduleTime=0,this.curProgress=50,this.clickTimes=10+Math.floor(5*Math.random()),this.curClick=0,this.isOpenBox=!1,this.nodeClickBtn.active=!0,this.progress.node.active=!0,this.nodeBox.active=!0,this.nodeReward.active=!1,this.nodeMenu.active=!1,h.updateRewardIcon(p.SHARE_FUNCTION.CLICK_BOX,this.spIcon)}onBtnBoxClick(){this.isOpenBox||(this.curClick++,this.curClick>this.clickTimes?(this.isOpenBox=!0,this.showReward()):(this.curProgress+=20,this.curProgress=this.curProgress>100?100:this.curProgress))}showReward(){this.nodeClickBtn.active=!1,this.progress.node.active=!1,this.nodeBox.active=!1,this.nodeReward.active=!0,this.nodeMenu.active=!0,this.lbReward.string=`+${u.CLICK_BOX_REWARD}`,this.rewardValue=u.CLICK_BOX_REWARD}update(e){this.scheduleTime+=e,this.scheduleTime>=.1&&(this.curProgress-=3,this.curProgress=this.curProgress<0?0:this.curProgress,this.scheduleTime=0),this.progress.progress=this.curProgress/100}onBtnNormalClick(){h.addGold(u.CLICK_BOX_REWARD),this.close()}onBtnDoubleClick(){h.openReward(p.SHARE_FUNCTION.CLICK_BOX,(e=>{e||(h.addGold(2*u.CLICK_BOX_REWARD),this.close())}))}close(){d.instance.hideDialog("fight/clickBox")}}).prototype,"progress",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=i(x.prototype,"nodeReward",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=i(x.prototype,"lbReward",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=i(x.prototype,"nodeBox",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=i(x.prototype,"nodeMenu",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=i(x.prototype,"nodeClickBtn",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=i(x.prototype,"spIcon",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=x))||k));s._RF.pop()}}}));

System.register("chunks:///_virtual/clientEvent.ts",["cc","./oneToMultiListener.ts"],(function(t){"use strict";var e,n,c;return{setters:[function(t){e=t.cclegacy,n=t._decorator},function(t){c=t.oneToMultiListener}],execute:function(){var s,i;e._RF.push({},"5a305zVBk5GUIdzJLbOwV+H","clientEvent",void 0);const{ccclass:r,property:o}=n;t("clientEvent",r("clientEvent")(((i=class extends c{}).handlers={},s=i))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/configuration.ts",["cc"],(function(t){"use strict";var s,a,i,e;return{setters:[function(t){s=t.cclegacy,a=t._decorator,i=t.sys,e=t.log}],execute:function(){var n,o;s._RF.push({},"05c37maoztIcqYQxP8Afj1j","configuration",void 0);const{ccclass:r}=a;t("configuration",r("configuration")(((o=class t{constructor(){this.jsonData=null,this.path=null,this.KEY_CONFIG="CarConfig",this.markSave=!1,this.saveTimer=-1}static get instance(){return this._instance||(this._instance=new t,this._instance.start()),this._instance}start(){let t;if(this.jsonData={userId:""},this.path=this.getConfigPath(),i.isNative){t=jsb.fileUtils.getValueMapFromFile(this.path)[this.KEY_CONFIG]}else t=i.localStorage.getItem(this.KEY_CONFIG);if(t&&t.length){t.startsWith("@")&&(t=t.substring(1));try{const s=JSON.parse(t);this.jsonData=s}catch(t){}}this.saveTimer=setInterval((()=>{this.scheduleSave()}),500)}setConfigDataWithoutSave(t,s){const a=this.jsonData.userId;this.jsonData[a]?this.jsonData[a][t]=s:console.error("no account can not save")}setConfigData(t,s){this.setConfigDataWithoutSave(t,s),this.markSave=!0}getConfigData(t){const s=this.jsonData.userId;if(this.jsonData[s]){const a=this.jsonData[s][t];return a||""}return e("no account can not load"),""}setGlobalData(t,s){this.jsonData[t]=s,this.save()}getGlobalData(t){return this.jsonData[t]}setUserId(t){this.jsonData.userId=t,this.jsonData[t]||(this.jsonData[t]={}),this.save()}getUserId(){return this.jsonData.userId}scheduleSave(){this.markSave&&this.save()}markModified(){this.markSave=!0}save(){let t=JSON.stringify(this.jsonData);if(this.markSave=!1,!i.isNative){return void i.localStorage.setItem(this.KEY_CONFIG,t)}const s={};s[this.KEY_CONFIG]=t,jsb.fileUtils.writeToFile(s,this.path)}getConfigPath(){const t=i.os;let s="";return t===i.OS.WINDOWS?s="src/conf":t===i.OS.LINUX?s="./conf":i.isNative?(s=jsb.fileUtils.getWritablePath(),s+="conf"):s="src/conf",s}parseUrl(t){if(!t||"string"==typeof t&&t.length<=0)return;let s={};if("string"==typeof t){(t=t.split("?")[1]).split("&").forEach((function(t){const a=t.indexOf("=");if(-1!==a){const i=t.substring(0,a);s[i]=t.substring(a+1)}}))}else s=t;s.action&&this.setGlobalData("urlParams",s),s.source&&this.setGlobalData("source",s.source),s.adchannelid&&this.setGlobalData("adchannelid",s.adchannelid)}static generateGuestAccount(){return`${Date.now()}10`}})._instance=void 0,n=o))||n);s._RF.pop()}}}));

System.register("chunks:///_virtual/constant.ts",["cc"],(function(E){"use strict";var I;return{setters:[function(E){I=E.cclegacy}],execute:function(){I._RF.push({},"1ad87mpTDFDV7de0xMwTCq4","constant",void 0);class N{}E("constant",N),N.GAME_NAME="car",N.LOCAL_CACHE={PLAYER:"player",SETTINGS:"settings",DATA_VERSION:"dataVersion",ACCOUNT:"account",HISTORY:"history",BAG:"bag"},N.MAX_LEVEL=20,N.MIN_CAR_ID=101,N.MAX_CAR_ID=109,N.AUDIO_SOUND={BACKGROUND:"background",CRASH:"crash",GET_MONEY:"getMoney",IN_CAR:"inCar",NEW_ORDER:"newOrder",CAR_START:"carStart",WIN:"win",STOP:"stop",TOOTING1:"tooting1",TOOTING2:"tooting2"},N.SIGNIN_REWARD_STATUS={RECEIVED:0,RECEIVABLE:1,UNRECEIVABLE:2,FILL_SIGNIN:3,AFTER_FILL_SIGNIN:4},N.MAX_SIGNIN_DAY=7,N.NORMAL_SHOW_TIME=3,N.NEWBEE_LEVEL=2,N.REWARD_TYPE={DIAMOND:1,GOLD:2,CAR:3},N.ONLINE={MAX_TIME:60,PROFIT_PER_SECOND:.3,TIME_PER_CIRCLE:10},N.SHARE_FUNCTION={BALANCE:"balance",RELIVE:"relive",OFFLINE:"offline",RANK:"rank",LOTTERY:"lottery",LOTTERY_REWARD:"lotteryReward",TRIAL:"trial",CLICK_BOX:"clickBox",ONLINE:"online",SIGNIN:"signIn",FILL_SIGNIN:"fillSignIn",INVINCIBLE:"invincible",SHOP_SHARE:"shopShare",SHOP_VIDEO:"shopVideo"},N.INITIAL_CAR=1,N.BUY_CAR_TYPE={GOLD:1,LOGIN:2,CONTINUOUS_LOGIN:3,SHARE:4,VIDEO:5,GAME:6,INVITE:7,SIGNIN:8,PASS_LEVEL:9},N.OPEN_REWARD_TYPE={AD:0,SHARE:1,NULL:2},N.GOLD_REWARD={SECOND:500,SEVENT:500},N.LOTTERY={MONEY:2e3,EXCHANGE:500},N.CUSTOMER_MAX_CNT=2,N.MENU_INIT_BOTTOM=40,N.MENU_BOTTOM=250,I._RF.pop()}}}));

System.register("chunks:///_virtual/csvManager.ts",["cc"],(function(e){"use strict";var t,n;return{setters:[function(e){t=e.cclegacy,n=e._decorator}],execute:function(){var r;t._RF.push({},"64d5aR01mZIArZ14oqSxdz0","csvManager",void 0);const{ccclass:i}=n,s=[",",";","\t","|","^"],o=["\r\n","\r","\n"],l=function(e,t,n,r){return n instanceof Array?"number"===n[t]?Number(r[t]):"boolean"===n[t]?"true"===r[t]||"t"===r[t]||"1"===r[t]:r[t]:isNaN(Number(e))?"false"==e||"true"==e||"t"==e||"f"==e?"true"===r[t]||"t"===r[t]||"1"===r[t]:r[t]:Number(r[t])},c={STANDARD_DECODE_OPTS:{skip:0,limit:!1,header:!1,cast:!1,comment:""},STANDARD_ENCODE_OPTS:{delimiter:s[0],newline:o[0],skip:0,limit:!1,header:!1},quoteMark:'"',doubleQuoteMark:'""',quoteRegex:/"/g,opts:{},assign:function(...e){Array.prototype.slice.call(arguments);const t=e[0],n=e.slice(1);for(let e=0,r=n.length;e<r;e++)for(const r in n[e])t[r]=n[e][r];return t},map:function(e,t){const n=[];for(let r=0,i=e.length;r<i;r++)n[r]=t(e[r],r);return n},getType:function(e){return Object.prototype.toString.call(e).slice(8,-1)},getLimit:function(e,t){return!1===e?t:1},buildObjectConstructor:function(e,t,n){return function(r){const i={},s=function(e,t){return i[e]=t};return n?e.forEach(((e,i)=>{s(e,l(t[i],i,n,r))})):e.forEach(((e,n)=>{s(e,l(t[n],n,null,r))})),i}},buildArrayConstructor:function(e,t,n){return function(r){const i=new Array(t.length),s=function(e,t){return i[e]=t};return n?e.forEach((function(e,i){s(e,l(t[i],i,n,r))})):e.forEach((function(e,n){s(e,l(t[n],n,null,r))})),i}},frequency:function(e,t,n){void 0===n&&(n=!1);let r=0,i=0;const s=this.getLimit(n,e.length);for(;i<s&&(i=e.indexOf(t,i),-1!==i);)i+=1,r++;return r},mostFrequent:function(e,t,n){let r="";for(let i=t.length-1;i>=0;i--)this.frequency(e,t[i],n)>0&&(r=t[i]);return r||t[0]},unsafeParse:function(e,t,n){const r=e.split(t.newline);let i,s;function o(e){let n=e.shift();if(n.indexOf('"')>=0){let r=0,i=0,s=0;for(;e.length>0&&(r=n.indexOf('"',i),-1!==r||s%2!=0);)-1!==r?(i=r+1,s++):n=n+t.newline+e.shift();const o=[];let l,c=0,u=0,h=0;const a=n.length;for(let e in n){if(!n.hasOwnProperty(e))continue;let r=parseInt(e);const i=n[e];0===r&&'"'===i&&(c++,u=1),'"'===i&&(c++,n[r-1]===t.delimiter&&u===r&&u++),'"'===i&&c%2==0&&(n[r+1]!==t.delimiter&&r+1!==a||(h=r,l=n.substring(u,h),o.push(l),u=h+2,h=u)),i===t.delimiter&&c%2==0&&(h=r,h>u?(l=n.substring(u,h),o.push(l),u=h+1,h=u):h===u&&(o.push(""),u=h+1,h=u))}return h=a,h>=u&&(l=n.substring(u,h),o.push(l)),o}return n.split(t.delimiter)}for(t.skip>0&&r.splice(t.skip),t.header?(!0===t.header?(t.comment=o(r),t.cast=o(r),i=o(r)):"Array"===this.getType(t.header)&&(i=t.header),s=this.buildObjectConstructor(i,r[0].split(t.delimiter),t.cast)):s=this.buildArrayConstructor(i,r[0].split(t.delimiter),t.cast);r.length>0;){const e=o(r);e.length>1&&n(s(e),i[0])}return!0},safeParse:function(e,t){const n=t.newline,r=e.split(n);return t.skip>0&&r.splice(t.skip),!0},encodeCells:function(e,t,n){const r=e.slice(0);for(let e=0,i=r.length;e<i;e++)-1!==r[e].indexOf(this.quoteMark)&&(r[e]=r[e].replace(this.quoteRegex,this.doubleQuoteMark)),-1===r[e].indexOf(t)&&-1===r[e].indexOf(n)||(r[e]=this.quoteMark+r[e]+this.quoteMark);return r.join(t)},encodeArrays:function(e,t,n){const r=t.delimiter,i=t.newline;t.header&&"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,r,i));for(let s=0,o=this.getLimit(t.limit,e.length);s<o;s++)n(this.encodeCells(e[s],r,i));return!0},encodeObjects:function(e,t,n){const r=t.delimiter,i=t.newline;let s=[],o=[];for(const t in e[0])s.push(t),o.push(e[0][t]);!0===t.header?n(this.encodeCells(s,r,i)):"Array"===this.getType(t.header)&&n(this.encodeCells(t.header,r,i)),n(this.encodeCells(o,r,"\n"));for(let l=1,c=this.getLimit(t.limit,e.length);l<c;l++){o=[];for(let t=0,n=s.length;t<n;t++)o.push(e[l][s[t]]);n(this.encodeCells(o,r,i))}return!0},parse:function(e,t,n){let r=[];if("Function"===this.getType(t)?(n=t,t={}):"Function"!==this.getType(n)&&(n=r.push.bind(r)),t=this.assign({},this.STANDARD_DECODE_OPTS,t),this.opts=t,!t.delimiter||!t.newline){const n=Math.min(48,Math.floor(e.length/20),e.length);t.delimiter=t.delimiter||this.mostFrequent(e,s,0!==n),t.newline=t.newline||this.mostFrequent(e,o,0!==n)}return this.unsafeParse(e,t,n)&&(!(r.length>0)||r)},encode:function(e,t,n){let r=[];return"Function"===this.getType(t)?n=t:"Function"!==this.getType(n)&&(r=[],n=r.push.bind(r)),(t=this.assign({},this.STANDARD_ENCODE_OPTS,t)).skip>0&&(e=e.slice(t.skip)),("Array"===this.getType(e[0])?this.encodeArrays:this.encodeObjects)(e,t,n)&&(!(r.length>0)||r.join(t.newline))}};e("csvManager",i("csvManager")(r=class{constructor(){this.csvTables={},this.csvTableForArr={},this.tableCast={},this.tableComment={}}addTable(e,t,n){if(this.csvTables[e]&&!n)return;const r={},i=[];c.parse(t,{header:!0},((e,t)=>{r[e[t]]=e,i.push(e)})),this.tableCast[e]=c.opts.cast,this.tableComment[e]=c.opts.comment,this.csvTables[e]=r,this.csvTableForArr[e]=i}getTableArr(e){return this.csvTableForArr[e]}getTable(e){return this.csvTables[e]}queryOne(e,t,n){const r=this.getTable(e);if(!r)return null;if(!t)return r[n];for(const e in r)if(r.hasOwnProperty(e)&&r[e][t]===n)return r[e]}queryByID(e,t){return this.queryOne(e,null,t)}queryAll(e,t,n){const r=this.getTable(e);if(!r||!t)return null;const i={};for(const e in r)r.hasOwnProperty(e)&&r[e][t]===n&&(i[e]=r[e]);return i}queryIn(e,t,n){const r=this.getTable(e);if(!r||!t)return null;const i={},s=Object.keys(r),o=s.length;for(let e=0;e<o;e++){const o=r[s[e]];n.indexOf(o[t])>-1&&(i[s[e]]=o)}return i}queryByCondition(e,t){if(t.constructor!==Object)return null;const n=this.getTable(e);if(!n)return null;const r={},i=Object.keys(n),s=i.length,o=Object.keys(t),l=o.length;for(let e=0;e<s;e++){const s=n[i[e]];let c=!0;for(let n=0;n<l;n++){const l=o[n];c=c&&t[l].indexOf(s[l])>-1&&!r[i[e]]}c&&(r[i[e]]=s)}return r}})||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/customerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./fightConstants.ts","./audioManager.ts","./constant.ts","./resourceUtil.ts","./poolManager.ts"],(function(t){"use strict";var e,s,o,n,r,i,l,u,a,c,d,h,m,C;return{setters:[function(t){e=t.applyDecoratedDescriptor,s=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t._decorator,r=t.Component,i=t.Vec3,l=t.Animation,u=t.isValid},function(t){a=t.clientEvent},function(t){c=t.fightConstants},function(t){d=t.audioManager},function(t){h=t.constant},function(t){m=t.resourceUtil},function(t){C=t.poolManager}],execute:function(){var g,p,_;o._RF.push({},"586a8tdaBhPQprl2rcvzztA","customerManager",void 0);const{ccclass:f,property:M}=n;t("customerManager",f("customerManager")((_=e((p=class extends r{constructor(...t){super(...t),s(this,"moveSpeed",_,this),this.nodeCustomer=null,this._targetPos=null,this._callback=void 0,this._offset=null,this.customerId=-1,this.retryTimes=0}start(){}newOrder(){this.customerId=Math.floor(Math.random()*h.CUSTOMER_MAX_CNT)+1,a.dispatchEvent("showTalk",this.customerId,c.CUSTOMER_TALK_TIME.NEW_ORDER)}greeting(t,e,s){-1===this.customerId&&(this.customerId=Math.floor(Math.random()*h.CUSTOMER_MAX_CNT)+1),this.nodeCustomer&&(C.instance.putNode(this.nodeCustomer),this.nodeCustomer=null),m.getCustomer(this.customerId.toString(),((o,n)=>{if(o)return console.error(o),void(this.retryTimes<3&&this.greeting(t,e,s));this.retryTimes=0,this.nodeCustomer=C.instance.getNode(n,this.node),this.nodeCustomer.active=!0;let r=new i;i.multiplyScalar(r,e,1.3),i.add(r,t,r);let l=r.clone();i.multiplyScalar(r,e,.25),i.add(r,t,r);let u=r.clone();this.nodeCustomer.setWorldPosition(l),0!==e.x?e.x>0?this.nodeCustomer.eulerAngles=new i(0,270,0):this.nodeCustomer.eulerAngles=new i(0,90,0):e.z>0?this.nodeCustomer.eulerAngles=new i(0,180,0):this.nodeCustomer.eulerAngles=new i(0,0,0),d.instance.playSound(h.AUDIO_SOUND.NEW_ORDER),this.customerMove(u,(()=>{d.instance.playSound(h.AUDIO_SOUND.IN_CAR),s&&s(),this.scheduleOnce((()=>{a.dispatchEvent("showTalk",this.customerId,c.CUSTOMER_TALK_TIME.INTO_THE_CAR)}),1)}))}))}takeCustomer(t,e,s,o){if(!this.nodeCustomer)return void(o&&o());e=new i(e.x,e.y,e.z);let n=new i;i.multiplyScalar(n,e,.25),i.add(n,t,n);let r=n.clone();this.nodeCustomer.active=!0,this.nodeCustomer.setWorldPosition(r),0!==e.x?e.x>0?this.nodeCustomer.eulerAngles=new i(0,90,0):this.nodeCustomer.eulerAngles=new i(0,270,0):e.z>0?this.nodeCustomer.eulerAngles=new i(0,0,0):this.nodeCustomer.eulerAngles=new i(0,180,0),i.multiplyScalar(n,e,1.3),i.add(n,t,n);let l=n.clone();d.instance.playSound(h.AUDIO_SOUND.GET_MONEY),this.customerMove(l,(()=>{o&&o(),s||this.scheduleOnce((()=>{this.newOrder()}),2)}))}customerMove(t,e){this._targetPos=t,this._callback=e,this.nodeCustomer.getComponent(l).play("walk"),this._offset=i.subtract(new i,this._targetPos,this.nodeCustomer.worldPosition),this._offset.multiplyScalar(this.moveSpeed)}update(t){if(this._targetPos&&this.nodeCustomer){let e=this.nodeCustomer.getWorldPosition(),s=new i;i.multiplyScalar(s,this._offset,t),e.add(s),i.subtract(s,e,this._targetPos).lengthSqr()<.01?this.onMoveOver():this.nodeCustomer.setWorldPosition(e)}}onMoveOver(){this.nodeCustomer.setWorldPosition(this._targetPos),this.nodeCustomer.active=!1,this._targetPos=null,this._callback&&this._callback()}reset(){if(this.nodeCustomer&&u(this.nodeCustomer)){this.nodeCustomer.getComponent(l).getState("walk").stop(),this.nodeCustomer.destroy(),this.nodeCustomer=null}this.customerId=-1}}).prototype,"moveSpeed",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=p))||g);o._RF.pop()}}}));

System.register("chunks:///_virtual/effectManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./carManager.ts","./clientEvent.ts","./poolManager.ts","./audioManager.ts","./constant.ts"],(function(e){"use strict";var n,t,r,i,a,o,s,c,l,u,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Prefab,a=e._decorator,o=e.Component},function(e){s=e.carManager},function(e){c=e.clientEvent},function(e){l=e.poolManager},function(e){u=e.audioManager},function(e){d=e.constant}],execute:function(){var h,g,f,p,M,N,k;r._RF.push({},"cf371ivOc1Ae64t3ScAzqjv","effectManager",void 0);const{ccclass:y,property:B}=a;e("effectManager",(h=y("effectManager"),g=B({type:i}),f=B({type:s}),h((N=n((M=class extends o{constructor(...e){super(...e),t(this,"pfTailLine",N,this),t(this,"carManager",k,this),this.currentNode=null}start(){}onEnable(){c.on("startBraking",this.onBrakingStart,this),c.on("endBraking",this.onBrakingEnd,this)}onDisable(){c.off("startBraking",this.onBrakingStart,this),c.off("endBraking",this.onBrakingEnd,this)}onBrakingStart(){this.currentNode=l.instance.getNode(this.pfTailLine,this.node),this.currentNode.setWorldPosition(this.carManager.mainCar.node.worldPosition),this.currentNode.eulerAngles=this.carManager.mainCar.node.eulerAngles,u.instance.playSound(d.AUDIO_SOUND.STOP)}onBrakingEnd(){let e=this.currentNode;this.currentNode=null,this.scheduleOnce((()=>{e&&e.isValid&&l.instance.putNode(e)}),2)}update(e){this.currentNode&&this.carManager.mainCar&&(this.currentNode.setWorldPosition(this.carManager.mainCar.node.worldPosition),this.currentNode.eulerAngles=this.carManager.mainCar.node.eulerAngles)}reset(){if(this.currentNode){l.instance.putNode(this.currentNode),l.instance.clearPool(this.currentNode.name),this.currentNode=null;let e=this.node.children.slice(0);for(let n=0;n<e.length;n++){let t=e[n];t&&t.isValid&&t.destroy()}}}}).prototype,"pfTailLine",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=n(M.prototype,"carManager",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=M))||p));r._RF.pop()}}}));

System.register("chunks:///_virtual/en.ts",["cc"],(function(){"use strict";var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"c2ee7NzXEdG1Z3CXlfjoO8M","en",void 0),window.i18nConfig||(window.i18nConfig={}),window.i18nConfig.languages||(window.i18nConfig.languages={}),window.i18nConfig.languages.en={main:{dataLoading:"Data loading...",dataLoadOver:"Data loading completed...",loginSuccess:"Login success...",gameResourceLoading:"Game Resource Loading...",audioResourceLoading:"Audio Resource Loading...",mappingResourceLoading:"Mapping resource loading...",modelResourceLoading:"Model resource loading...",entering:"Entering..."},mainUI:{start:"Click screen to start",changeCar:"Change cars"},shop:{btnClose:"Close",go:"Go",acquired:"Acquired",current:"Current",receive:"Receive",getGold:"Gold coins for watching AD"},balance:{"你完成了%{value}个订单":"Complete %{value} order",youEarnedIt:"You earned it",clickReceive:"Click revive",receiveImmediately:"Receive Now"},carTask:{"初始车辆":"Initial vehicle","分享获得":"Share gain","签到获得":"Signin gain","通过关卡获得":"Get through a checkpoint"},signin:{title:"Sign in on the 7th",notYet:"Not yet",normalReceive:"Normal receive",receive:"Receive",doubleReceive:"Double receive",fillSignin:"Fill signin"},fightManager:{loadingMap:"Loading map...",buildingCity:"Start building cities...",cityLoadOver:"City loaded..."},fightMap:{trimTheGround:"The ground is being trimmed...",pavingTheRoad:"Paving the way...",plantingTree:"The trees are being planted...",decorateHouse:"The house is being renovated...",paintLandmarks:"The landmark is being painted..."},online:{close:"Close",clickReceive:"Click receive",dailyIncome:"Daily income is available"},lottery:{title:"Wheel of fortune",free:"Free"},talk:{"你好,请到街对面接我.":"Hello, please meet me across the street.","停车!停车!":"Stop the car, please! Stop the car, please!","去消费最高的地方.":"Go to the place where you spend the most.","去附近的希尔顿酒店.":"Go to the nearby hilton hotel.","司机快来!我老婆要生了!":"Driver, come on!  My wife is having a baby!","大哥快点,我赶时间.":"Eldest brother hurry up, I'm in a hurry.","师傅,5分钟内能到吗?":"Master, can you be there in 5 minutes?","师傅,你是老司机嘛?":"Master, are you an old driver?","师傅,你跑一天能赚多少?":"Master, how much do you earn per day?","师傅快点,我要赶飞机.":"Master, hurry up, I have to catch the plane.","师傅跟上那辆法拉利.":"Master, keep up with that Ferrari.","带我去最近的银行.":"Take me to the nearest bank.","帮我跟上前面那辆车!":"Help me keep up with the car in front!","快去火车站,我赶车!":"Go to the railway station, I'll catch the bus!","我在酒店大堂门口等你.":"I'll wait for you at the gate of the hotel lobby.","要下雨了,你快来!":"It's going to rain, you come quickly!"},showReward:{title:"Reward",normalReceive:"Normal receive",ReceiveImmediately:" Receive Now",doubleReceive:"Double receive",alreadyHadCar:"You already own the vehicle and automatically convert it into the corresponding gold coin.",buySuccessful:"Buy successful",confrim:"Confrim",signinReward:"Signin reward"},revive:{reviveImmediately:"Resurrection Now",skip:"Skip",tips:"It's a pity that we came close to the finish line.!",continue:"Resurrection continues."},clickBox:{title:"Mysterious gift",progress:"The faster you click, the more rewards you will receive.",clickMe:"click me fast",normalReceive:"Normal receive",doubleReceive:"Double receive"},trial:{title:"Free trial",tryItNow:"Try It Now",giveUp:"Give up the trial and start the game."},invinceible:{title:"Invincible start",confirm:"Confrim",close:"Close"},setting:{title:"Setting",version:"Version:",close:"Close"}},e._RF.pop()}}}));

System.register("chunks:///_virtual/eventListener.ts",["cc"],(function(t){"use strict";var e,n,s,r;return{setters:[function(t){e=t.cclegacy,n=t.error,s=t.log,r=t._decorator}],execute:function(){var o,a;e._RF.push({},"10a09om3sZD8q2H50TLwLIc","eventListener",void 0);const{ccclass:i,property:c}=r;let l=i("oneToOneListener")(o=class{constructor(){this.supportEvent={},this.handle={},this.supportEvent=null}on(t,e,n){this.handle[t]={handler:e,target:n}}off(t,e){const n=this.handle[t];n&&n.handler&&n.handler===e&&delete this.handle[t]}dispatchEvent(t){if(null!==this.supportEvent&&!this.supportEvent.hasOwnProperty(t))return void n("please add the event into clientEvent.js");const e=this.handle[t],r=[];for(let t=1;t<arguments.length;t++)r.push(arguments[t]);e.handler?e.handler.apply(e.target,r):s("not register "+t+"    callback func")}setSupportEventList(t){if(!(t instanceof Array))return n("supportEvent was not array"),!1;this.supportEvent={};for(let e in t){const n=t[e];this.supportEvent[n]=e}return!0}})||o;t("eventListener",i("eventListener")(a=class{static getBaseClass(t){return l}})||a);e._RF.pop()}}}));

System.register("chunks:///_virtual/fightCanvas.ts",["./rollupPluginModLoBabelHelpers.js","cc","./carManager.ts","./gameLogic.ts","./loading.ts","./clientEvent.ts"],(function(i){"use strict";var t,e,n,o,s,r,a,h,u,c,l;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){n=i.cclegacy,o=i.SpriteFrame,s=i.Node,r=i._decorator,a=i.Component},function(i){h=i.carManager},function(i){u=i.gameLogic},function(i){c=i.loading},function(i){l=i.clientEvent}],execute:function(){var g,d,p,f,b,m,T,v,y,L,P,w,C;n._RF.push({},"daea1EBoy1Ms6PBdAupQWnn","fightCanvas",void 0);const{ccclass:E,property:M}=r;i("fightCanvas",(g=E("fightCanvas"),d=M(h),p=M(o),f=M(o),b=M(c),m=M(s),g((y=t((v=class extends a{constructor(...i){super(...i),e(this,"carManager",y,this),e(this,"imgShare",L,this),e(this,"imgVideo",P,this),e(this,"loadingUI",w,this),e(this,"tip",C,this),this.curProgress=50,this.isFirstLoad=!0,this.isTouching=!1}start(){u.imgAd=this.imgVideo,u.imgShare=this.imgShare,this.loadingUI.show(this.curProgress),this.node.on(s.EventType.TOUCH_START,this.onTouchStart,this),this.node.on(s.EventType.TOUCH_END,this.onTouchEnd,this),this.node.on(s.EventType.TOUCH_CANCEL,this.onTouchEnd,this)}onEnable(){l.on("updateLoading",this.updateLoadingProgress,this),l.on("showGuide",this.showGuide,this)}onDisable(){l.off("updateLoading",this.updateLoadingProgress,this),l.off("showGuide",this.showGuide,this)}onTouchStart(){this.isTouching=!0,this.tip.active=!1,this.carManager.controlMainCar(!0)}onTouchEnd(){this.isTouching=!1,this.carManager.controlMainCar(!1)}showGuide(i){i&&this.isTouching&&this.scheduleOnce((()=>{this.onTouchStart()}),0)}updateLoadingProgress(i,t){this.isFirstLoad?this.curProgress+=Math.floor(i/2):this.curProgress+=i,this.loadingUI.updateProgress(this.curProgress,t)}loadNewLevel(){this.loadingUI.node.active=!0,this.curProgress=0,this.isFirstLoad=!1}finishLoading(){this.loadingUI.node.active=!1}}).prototype,"carManager",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(v.prototype,"imgShare",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(v.prototype,"imgVideo",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(v.prototype,"loadingUI",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(v.prototype,"tip",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=v))||T));n._RF.pop()}}}));

System.register("chunks:///_virtual/fightConstants.ts",["cc"],(function(t){"use strict";var R;return{setters:[function(t){R=t.cclegacy}],execute:function(){R._RF.push({},"dbe36y+LwBGGIL8I87F3O+/","fightConstants",void 0);class _{}t("fightConstants",_),_.ROAD_POINT_TYPE={NORMAL:1,START:2,GREETING:3,PLATFORM:4,END:5,AI_START:6},_.ROAD_MOVE_TYPE={LINE:1,BEND:2},_.CAR_GROUP={NORMAL:1,MAIN_CAR:2,OTHER_CAR:4},_.CUSTOMER_TALK_TIME={INTO_THE_CAR:1,NEW_ORDER:2},_.CLICK_BOX_REWARD=300,R._RF.pop()}}}));

System.register("chunks:///_virtual/fightManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fightMap.ts","./customerManager.ts","./carManager.ts","./clientEvent.ts","./fightConstants.ts","./resourceUtil.ts","./uiManager.ts","./playerData.ts","./fightCanvas.ts","./effectManager.ts","./LanguageData.ts"],(function(e){"use strict";var t,a,i,n,r,s,o,h,l,c,g,u,f,p,v,d,M,m,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.initializerDefineProperty},function(e){i=e.cclegacy,n=e.Node,r=e._decorator,s=e.Component,o=e.Collider,h=e.instantiate},function(e){l=e.fightMap},function(e){c=e.customerManager},function(e){g=e.carManager},function(e){u=e.clientEvent},function(e){f=e.fightConstants},function(e){p=e.resourceUtil},function(e){v=e.uiManager},function(e){d=e.playerData},function(e){M=e.fightCanvas},function(e){m=e.effectManager},function(e){y=e.i18n}],execute:function(){var L,C,b,w,I,O,G,D,U,k,P,E,F,R,z;i._RF.push({},"f3d36qkNslPB4TIGcZlp8vd","fightManager",void 0);const{ccclass:N,property:S}=r;e("fightManager",(L=N("fightManager"),C=S(M),b=S({type:l}),w=S({type:c}),I=S({type:g}),O=S({type:m}),G=S({type:n,displayName:"地面"}),L((k=t((U=class extends s{constructor(...e){super(...e),a(this,"fightLoading",k,this),a(this,"mapManager",P,this),a(this,"customerManager",E,this),a(this,"carManager",F,this),a(this,"effectManager",R,this),a(this,"nodeGround",z,this),this.isStart=!1,this.isOver=!1,this.isFinishedLevel=!1,this.money=0,this.curLevel=0,this.hasRevive=!1}start(){this.initGround(),this.loadMap((()=>{this.initCar(),this.loadCar()}))}onEnable(){u.on("startGame",this.startGame,this),u.on("takeCustomer",this.onTakeCustomer,this),u.on("gameOver",this.gameOver,this),u.on("newLevel",this.newLevel,this),u.on("updateCar",this.updateMainCar,this),u.on("revive",this.revive,this)}onDisable(){u.off("startGame",this.startGame,this),u.off("takeCustomer",this.onTakeCustomer,this),u.off("gameOver",this.gameOver,this),u.off("newLevel",this.newLevel,this),u.off("updateCar",this.updateMainCar,this),u.off("revive",this.revive,this)}initGround(){let e=this.nodeGround.getComponent(o);e.setGroup(f.CAR_GROUP.NORMAL),e.setMask(-1)}loadMap(e){let t=1;d.instance.playerInfo&&(console.log("###playerData.instance.playerInfo.realLevel;",d.instance.playerInfo.realLevel),t=d.instance.playerInfo.passCheckPoint?d.instance.playerInfo.realLevel||t:d.instance.playerInfo.level||t,console.log("###level",t)),this.curLevel=t,console.log(`load level ${this.curLevel}`);let a=this.curLevel>100?this.curLevel:this.curLevel+100;u.dispatchEvent("updateLoading",4,y.t("fightManager.loadingMap")),p.getMap(a,((t,a)=>{t?console.error(t):(u.dispatchEvent("updateLoading",10,y.t("fightManager.buildingCity")),this.mapManager.buildMap(a,(()=>{}),(()=>{u.dispatchEvent("updateLoading",6,y.t("fightManager.cityLoadOver")),e&&e()})))}))}initCar(){this.carManager.init(this.mapManager,this.customerManager)}reset(){this.carManager.reset(),this.customerManager.reset(),this.effectManager.reset(),this.isStart=!1,this.isOver=!1,this.isFinishedLevel=!1,this.money=0,this.hasRevive=!1,this.loadCar()}loadCar(){this.carManager.preloadAICar((()=>{this.fightLoading.finishLoading(),this.showMainUI()}))}startGame(){this.isStart||(this.isStart=!0,this.carManager.startGame(),this.showFightUI())}gameOver(e){this.isOver||(this.isFinishedLevel=e,this.isOver=!0,this.carManager.gameOver(),this.showBalanceUI())}onTakeCustomer(){let e=Math.floor(30+this.curLevel/2+Math.floor(10*Math.random()));this.money+=e,u.dispatchEvent("makeMoney",e),p.getEffect("coin",((e,t)=>{e&&console.error(e);let a=h(t);a.parent=this.node,this.carManager.mainCar&&a.setWorldPosition(this.carManager.mainCar.node.getWorldPosition()),this.scheduleOnce((()=>{a.destroy()}),2)}))}showMainUI(){v.instance.showDialog("main/mainUI")}showFightUI(){v.instance.hideDialog("main/mainUI"),v.instance.showDialog("fight/fightUI",[this])}showBalanceUI(){let e=this.carManager.getCurrentProgress();v.instance.showDialog("fight/balance",[d.instance.playerInfo.level,e.cur,e.isOver,this.mapManager.levelProgressCnt,this.money,this.isFinishedLevel])}newLevel(e){this.fightLoading.loadNewLevel(),v.instance.hideDialog("fight/fightUI"),this.hasRevive=!1,e?(this.mapManager.recycle(),this.loadMap((()=>{this.reset()}))):this.reset()}updateMainCar(){this.carManager.creatMainCar()}revive(){this.carManager.revive()}}).prototype,"fightLoading",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(U.prototype,"mapManager",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=t(U.prototype,"customerManager",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(U.prototype,"carManager",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(U.prototype,"effectManager",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(U.prototype,"nodeGround",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=U))||D));i._RF.pop()}}}));

System.register("chunks:///_virtual/fightMap.ts",["./rollupPluginModLoBabelHelpers.js","cc","./roadPoint.ts","./fightConstants.ts","./resourceUtil.ts","./poolManager.ts","./clientEvent.ts","./LanguageData.ts"],(function(e){"use strict";var t,i,s,r,n,o,a,l,h,c,p,d,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){s=e.cclegacy,r=e.Node,n=e._decorator,o=e.Component,a=e.Vec3},function(e){l=e.roadPoint},function(e){h=e.fightConstants},function(e){c=e.resourceUtil},function(e){p=e.poolManager},function(e){d=e.clientEvent},function(e){g=e.i18n}],execute:function(){var u,f,M,P,m;s._RF.push({},"273adkVLRhECoDje+nCdBuE","fightMap",void 0);const{ccclass:y,property:b}=n;e("fightMap",(u=y("fightMap"),f=b({type:r,displayName:"各路线起点"}),u((m=t((P=class extends o{constructor(...e){super(...e),i(this,"path",m,this),this._progressListener=void 0,this._completeListener=void 0,this.curProgress=0,this.maxProgress=0,this.levelProgressCnt=0}buildMap(e,t,i){this._progressListener=t,this._completeListener=i,this.objMap=e,this.curProgress=0,this.maxProgress=6,this.buildModel("plane"),this.buildModel("road"),this.buildModel("tree"),this.buildModel("house"),this.buildModel("sign"),this.buildPath()}buildModel(e){if(!this.objMap.hasOwnProperty(e))return void this.triggerFinished(e);let t=[],i=this.objMap[e];for(let e=0;e<i.children.length;e++){let s=i.children[e].name;-1===t.indexOf(s)&&t.push(s)}let s={};c.getMapObjs(e,t,(()=>{}),((t,n)=>{if(t)return void console.error(t);for(let e=0;e<n.length;e++){let t=n[e];s[t.data.name]=t}let o=new r(e);o.parent=this.node,o.setPosition(new a(i.pX,i.pY,i.pZ));for(let e=0;e<i.children.length;e++){let t=i.children[e],r=s[t.name],n=p.instance.getNode(r,o);n.setPosition(t.pX,t.pY,t.pZ),n.eulerAngles=new a(t.rX,t.rY,t.rZ),n.setScale(t.sX,t.sY,t.sZ)}this.triggerFinished(e)}))}buildPath(){if(!this.objMap.hasOwnProperty("path"))return;this.path=[],this.levelProgressCnt=0;let e=this.objMap.path,t=new r("path");t.parent=this.node,t.setPosition(e.pX,e.pY,e.pZ);for(let i=0;i<e.children.length;i++){let s=e.children[i],n=new r(s.name);n.parent=t,n.setPosition(s.pX,s.pY,s.pZ);let o=this.createRoadPoint(s.path,n);o&&this.path.push(o)}this.triggerFinished("path")}createRoadPoint(e,t){if(!e)return null;let i=new r(e.name);i.parent=t,i.setPosition(e.pX,e.pY,e.pZ),i.setScale(e.sX,e.sY,e.sZ),i.eulerAngles=new a(e.rX,e.rY,e.rZ);let s=i.addComponent(l);return s.type=e.type,s.moveType=e.moveType,s.clockwise=e.clockwise,s.direction=e.direction,s.delayTime=e.delayTime,s.genInterval=e.genInterval,s.carSpeed=e.carSpeed,s.cars=e.cars,s.type===h.ROAD_POINT_TYPE.PLATFORM&&this.levelProgressCnt++,e.next&&(s.next=this.createRoadPoint(e.next,t)),i}triggerFinished(e){let t="";switch(e){case"plane":t=g.t("fightMap.trimTheGround");break;case"road":t=g.t("fightMap.pavingTheRoad");break;case"tree":t=g.t("fightMap.plantingTree");break;case"house":t=g.t("fightMap.decorateHouse");break;case"sign":t=g.t("fightMap.paintLandmarks")}t&&d.dispatchEvent("updateLoading",10,t),this.curProgress++,this._progressListener&&this._progressListener(this.curProgress,this.maxProgress),this.curProgress>=this.maxProgress&&this._completeListener&&this._completeListener()}recycle(){this.recycleModel("plane"),this.recycleModel("road"),this.recycleModel("tree"),this.recycleModel("house"),this.recycleModel("sign"),this.node.removeAllChildren()}recycleModel(e){let t=this.node.getChildByName(e);if(t)for(let e=0;e<t.children.length;e++){let i=t.children[e];p.instance.putNode(i)}}}).prototype,"path",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),M=P))||M));s._RF.pop()}}}));

System.register("chunks:///_virtual/fightUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./clientEvent.ts","./localConfig.ts","./resourceUtil.ts","./LanguageData.ts"],(function(e){"use strict";var i,t,r,n,s,a,o,h,l,u,g,p,c,m,f,d;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Sprite,s=e.Label,a=e.Node,o=e.SpriteFrame,h=e.Animation,l=e._decorator,u=e.Component,g=e.director},function(e){p=e.playerData},function(e){c=e.clientEvent},function(e){m=e.localConfig},function(e){f=e.resourceUtil},function(e){d=e.i18n}],execute:function(){var b,w,y,v,M,T,k,G,C,S,z,F,L,P,E,I,U,A,D,N,O,H,R,$,_,B,x,V,j,Z,q,J,K,Q,W,X,Y,ee,ie,te,re,ne,se,ae,oe;r._RF.push({},"fb9b7V8bZND35IgNyATVMNv","fightUI",void 0);const{ccclass:he,property:le}=l;e("fightUI",(b=he("fightUI"),w=le(n),y=le(n),v=le({type:s}),M=le({type:s}),T=le({type:a,displayName:"进度项"}),k=le(a),G=le(s),C=le(s),S=le(n),z=le(o),F=le(o),L=le(o),P=le(o),E=le(o),I=le(h),U=le(a),A=le(n),D=le(o),N=le(o),O=le(o),H=le(o),b((_=i(($=class extends u{constructor(){super(),t(this,"spStart",_,this),t(this,"spEnd",B,this),t(this,"curLevel",x,this),t(this,"targetLevel",V,this),t(this,"progress",j,this),t(this,"nodeTalk",Z,this),t(this,"lbTalk",q,this),t(this,"lbMake",J,this),t(this,"spHead",K,this),t(this,"imgLevelFinished",Q,this),t(this,"imgLevelUnfinished",W,this),t(this,"imgProgressNoActive",X,this),t(this,"imgProgressActive",Y,this),t(this,"imgProgressFinished",ee,this),t(this,"aniMakeMoney",ie,this),t(this,"nodeGuide",te,this),this.fightManager=null,this.carManager=null,t(this,"spShowGuideTip",re,this),t(this,"img01",ne,this),t(this,"img02",se,this),t(this,"img01En",ae,this),t(this,"img02En",oe,this),this.isShowGuide=!1,this.showGuideTime=0,this.gameStart=!1}start(){}onEnable(){c.on("greetingCustomer",this.updateCarProgress,this),c.on("takeCustomer",this.updateCarProgress,this),c.on("startGame",this.startGame,this),c.on("gameOver",this.gameOver,this),c.on("showTalk",this.showCustomerTalk,this),c.on("makeMoney",this.onMakeMoney,this),c.on("showGuide",this.showGuide,this)}onDisable(){c.off("greetingCustomer",this.updateCarProgress,this),c.off("takeCustomer",this.updateCarProgress,this),c.off("startGame",this.startGame,this),c.off("gameOver",this.gameOver,this),c.off("showTalk",this.showCustomerTalk,this),c.off("makeMoney",this.onMakeMoney,this),c.off("showGuide",this.showGuide,this)}onTouchStart(){this.nodeGuide.getComponent(h).stop(),this.nodeGuide.active=!1}show(e){this.fightManager=e,this.carManager=this.fightManager.carManager,this.refreshUI(),this.carManager.mainCar.isMoving||this.showGuide(!0)}startGame(){this.gameStart=!0}gameOver(){this.gameStart=!1;g.getScheduler().isScheduled(this.hideTalk,this)&&(this.unschedule(this.hideTalk),this.hideTalk()),this.updateCarProgress()}showGuide(e){this.nodeGuide.active=e;let i=this.nodeGuide.getComponent(h);e?i.play():i.stop(),e?(this.isShowGuide=!0,this.showGuideTime=0,i.getState("showGuide").setTime(0)):(this.isShowGuide=!1,this.showGuideTime=0)}onBtnAgainClick(){c.dispatchEvent("newLevel",!1)}onBtnChangeCameraRotation(){this.carManager.changeCameraFollowRotation()}refreshUI(){let e=this.fightManager.mapManager.levelProgressCnt;for(let i=0;i<e;i++)this.progress[i].active=!0,this.progress[i].getComponent(n).spriteFrame=this.imgProgressNoActive;for(let i=e;i<this.progress.length;i++)this.progress[i].active=!1;let i=p.instance.playerInfo?p.instance.playerInfo.level:1;this.curLevel.string=`${i}`,this.targetLevel.string=`${i+1}`,this.spStart.spriteFrame=this.imgLevelFinished,this.spEnd.spriteFrame=this.imgLevelUnfinished}updateCarProgress(){let e=this.carManager.getCurrentProgress(),i=e.cur,t=e.isOver?i:i-1;for(let e=0;e<t;e++)this.progress[e].getComponent(n).spriteFrame=this.imgProgressFinished;e.isOver||(this.progress[t].getComponent(n).spriteFrame=this.imgProgressActive),this.fightManager.isFinishedLevel&&(this.spEnd.spriteFrame=this.imgLevelFinished)}showCustomerTalk(e,i){if(!this.gameStart)return;let t=m.instance.getTableArr("talk"),r=[];t.forEach((e=>{e.type===i&&r.push(e)}));let n=Math.floor(Math.random()*r.length),s=r[n];this.lbTalk.string=d.t(`talk.${s.content}`),f.setCustomerIcon(e,this.spHead,(()=>{})),this.nodeTalk.active=!0,this.nodeTalk.getComponent(h).play(),this.scheduleOnce(this.hideTalk,4)}hideTalk(){this.nodeTalk.active=!1}onMakeMoney(e){this.aniMakeMoney.node.active=!0,this.lbMake.string=`+${e}`,this.aniMakeMoney.play(),this.aniMakeMoney.once(h.EventType.FINISHED,(()=>{this.aniMakeMoney.node.active=!1}),this)}update(e){this.isShowGuide&&(0===Math.floor(this.showGuideTime)&&("zh"===window.i18nConfig.curLang?this.spShowGuideTip.spriteFrame=this.img01:"en"===window.i18nConfig.curLang&&(this.spShowGuideTip.spriteFrame=this.img01En)),this.showGuideTime+=e,1===Math.floor(this.showGuideTime)?"zh"===window.i18nConfig.curLang?this.spShowGuideTip.spriteFrame=this.img02:"en"===window.i18nConfig.curLang&&(this.spShowGuideTip.spriteFrame=this.img02En):2===Math.floor(this.showGuideTime)&&("zh"===window.i18nConfig.curLang?this.spShowGuideTip.spriteFrame=this.img01:"en"===window.i18nConfig.curLang&&(this.spShowGuideTip.spriteFrame=this.img01En),this.showGuideTime=0))}}).prototype,"spStart",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=i($.prototype,"spEnd",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=i($.prototype,"curLevel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=i($.prototype,"targetLevel",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=i($.prototype,"progress",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Z=i($.prototype,"nodeTalk",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=i($.prototype,"lbTalk",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=i($.prototype,"lbMake",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=i($.prototype,"spHead",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=i($.prototype,"imgLevelFinished",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=i($.prototype,"imgLevelUnfinished",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=i($.prototype,"imgProgressNoActive",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=i($.prototype,"imgProgressActive",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=i($.prototype,"imgProgressFinished",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie=i($.prototype,"aniMakeMoney",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),te=i($.prototype,"nodeGuide",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=i($.prototype,"spShowGuideTip",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ne=i($.prototype,"img01",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=i($.prototype,"img02",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=i($.prototype,"img01En",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),oe=i($.prototype,"img02En",[H],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=$))||R));r._RF.pop()}}}));

System.register("chunks:///_virtual/flyReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./flyRewardItem.ts"],(function(e){"use strict";var t,i,r,n,a,o,s,l,c,d,h,u;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.SpriteFrame,a=e.Node,o=e.Animation,s=e._decorator,l=e.Component,c=e.find,d=e.Vec3},function(e){h=e.clientEvent},function(e){u=e.flyRewardItem}],execute:function(){var f,p,y,m,w,v,R,b,g;r._RF.push({},"d14d4EewSBFtIn6B/rRUvjM","flyReward",void 0);const{ccclass:_,property:P}=s;e("flyReward",(f=_("flyReward"),p=P(n),y=P(a),m=P(o),f((R=t((v=class extends l{constructor(...e){super(...e),i(this,"imgGold",R,this),i(this,"ndRewardParent",b,this),i(this,"aniBoom",g,this),this.finishIdx=0,this._callback=void 0,this.isGoldOrDiamond=!0}start(){this.aniBoom.play(),this.createReward()}getTargetPos(){let e=c("Canvas/goldPos");return e?e.position:(this.node.destroy(),this._callback&&this._callback(),d.ZERO)}createReward(){let e=this.imgGold,t=this.getTargetPos();for(var i=0;i<10;i++){let i=new a("flyRewardItem"),r=i.addComponent(u);i.parent=this.ndRewardParent,i.layer=this.ndRewardParent.layer,r.show(e,t,(e=>{this.onFlyOver(e)}))}}setInfo(e){this.isGoldOrDiamond=e}onFlyOver(e){this.isGoldOrDiamond?h.dispatchEvent("receiveGold"):h.dispatchEvent("receiveDiamond"),e.active=!1,this.finishIdx++,10===this.finishIdx&&(this._callback&&this._callback(),this.node.destroy())}setEndListener(e){this._callback=e}}).prototype,"imgGold",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(v.prototype,"ndRewardParent",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(v.prototype,"aniBoom",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=v))||w));r._RF.pop()}}}));

System.register("chunks:///_virtual/flyRewardItem.ts",["cc"],(function(t){"use strict";var e,a,s,o,n,r;return{setters:[function(t){e=t.cclegacy,a=t.Component,s=t.Vec3,o=t.Sprite,n=t.tween,r=t._decorator}],execute:function(){var i;e._RF.push({},"62dd66o/TBEyqhX8gZkE8/G","flyRewardItem",void 0);const{ccclass:h,property:l}=r;t("flyRewardItem",h("flyRewardItem")(i=class extends a{constructor(...t){super(...t),this.targetPos=new s,this.targetRotation=new s(0,0,0),this.targetScale=new s(1,1,1),this.posLast=new s,this._callback=null}start(){}show(t,e,a){this.posLast.set(e),this._callback=a;let r=this.node.addComponent(o);r.trim=!1,r.sizeMode=o.SizeMode.RAW,r.spriteFrame=t,this.node.eulerAngles=new s(0,0,Math.floor(360*Math.random())),this.targetRotation=new s(this.node.eulerAngles);let i=new s(Math.floor(300*Math.random())-150,Math.floor(300*Math.random())-150,0),h=s.distance(i,new s(0,0,0))/400;n(this.targetPos).to(h,i,{easing:"cubicInOut"}).start();let l=120+Math.floor(60*Math.random());l=this.targetRotation.z+Math.floor(2*Math.random())===1?l:-l,n(this.targetRotation).to(h,new s(0,0,l)).start(),n(this.targetScale).to(2*h/3,new s(1.4,1.4,1.4)).to(h/3,new s(1,1,1)).call((()=>{this.move2Target()})).start()}move2Target(){let t=s.distance(this.node.position,this.posLast)/1500,e=Math.floor(10*Math.random())/10;n(this.targetScale).to(.3,new s(1.4,1.4,1.4)).to(.7,new s(1,1,1)).union().repeat(50).start(),this.scheduleOnce((()=>{n(this.targetPos).to(t,this.posLast).call((()=>{this._callback&&this._callback(this.node)})).start()}),e)}update(t){this.node.position=this.targetPos,this.node.eulerAngles=this.targetRotation,this.node.setScale(this.targetScale)}})||i);e._RF.pop()}}}));

System.register("chunks:///_virtual/follow.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){"use strict";var o,e,i,l,s,r,n;return{setters:[function(t){o=t.applyDecoratedDescriptor,e=t.initializerDefineProperty},function(t){i=t.cclegacy,l=t.Node,s=t._decorator,r=t.Component,n=t.Vec3}],execute:function(){var a,f,w,h,u,c,d;i._RF.push({},"ff8ee6OQldPNLrgLpXROotm","follow",void 0);const{ccclass:g,property:p}=s;t("follow",(a=g("follow"),f=p({type:l}),a((u=o((h=class extends r{constructor(){super(),e(this,"followTarget",u,this),e(this,"isFollowRotation",c,this),e(this,"offset",d,this),this.moveSpeed=3,this.isPlayingStart=!1}start(){}showStart(){}lateUpdate(t){if(!this.followTarget)return;let o=this.node.worldPosition;if(this.isPlayingStart){let e=new n(this.followTarget.worldPosition.x+this.offset.x,this.followTarget.worldPosition.y+this.offset.y,this.followTarget.worldPosition.z+this.offset.z);n.subtract(new n,o,e).length()>.001&&n.lerp(e,o,e,this.moveSpeed*t),this.node.setWorldPosition(e),this.node.lookAt(this.followTarget.worldPosition,new n(0,1,0))}else{let t=this.offset;this.isFollowRotation&&(t=n.transformQuat(new n,this.offset,this.followTarget.rotation));let o=new n(this.followTarget.worldPosition.x+t.x,this.followTarget.worldPosition.y+t.y,this.followTarget.worldPosition.z+t.z);if(this.node.setWorldPosition(o),this.node.lookAt(this.followTarget.worldPosition,new n(0,1,0)),this.isFollowRotation){let t=new n(this.node.eulerAngles);t.y=this.followTarget.eulerAngles.y,this.node.eulerAngles=t}}}}).prototype,"followTarget",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=o(h.prototype,"isFollowRotation",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),d=o(h.prototype,"offset",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new n}}),w=h))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/gameLogic.ts",["cc","./playerData.ts","./clientEvent.ts","./configuration.ts","./constant.ts","./resourceUtil.ts","./flyReward.ts","./uiManager.ts"],(function(e){"use strict";var t,n,a,i,s,c,r,o,u;return{setters:[function(e){t=e.cclegacy,n=e._decorator},function(e){a=e.playerData},function(e){i=e.clientEvent},function(e){s=e.configuration},function(e){c=e.constant},function(e){r=e.resourceUtil},function(e){o=e.flyReward},function(e){u=e.uiManager}],execute:function(){var d,l;t._RF.push({},"b6eeddtwEdPDYszSPn2rVjb","gameLogic",void 0);const{ccclass:g}=n;e("gameLogic",g("gameLogic")(((l=class{static addGold(e){a.instance.updatePlayerInfo("gold",e),i.dispatchEvent("updateGold")}static useCar(e){a.instance.useCar(e),i.dispatchEvent("updateCar")}static buyCar(e){a.instance.buyCar(e),i.dispatchEvent("buyCar")}static isVibrateOpen(){let e=s.instance.getGlobalData("vibrate");return null==e&&(e=!0),e}static getOpenRewardType(e,t,n){t(null,c.OPEN_REWARD_TYPE.NULL)}static checkIsByVideoAds(){return!1}static updateRewardIcon(e,t,n,a,i){this.getOpenRewardType(e,((e,s)=>{switch(s){case c.OPEN_REWARD_TYPE.AD:t.node.active=!0,t.spriteFrame=a||this.imgAd;break;case c.OPEN_REWARD_TYPE.SHARE:t.node.active=!0,t.spriteFrame=i||this.imgShare;break;case c.OPEN_REWARD_TYPE.NULL:t.node.active=!1}n&&n(e,s)}))}static finishBuyTask(e,t,n){a.instance.finishBuyTask(e,t,n),i.dispatchEvent("updateBuyTask")}static openReward(e,t){t&&t(null)}static afterLogin(){a.instance.isNewBee||this.checkSignIn()}static checkSignIn(){1!==a.instance.playerInfo.level&&(a.instance.updateSignInCurrentDay(),a.instance.getSignInReceivedInfo().isTodayReceived||u.instance.pushToPopupSeq("signIn/signIn","signIn",{}))}static showFlyReward(e,t){r.createUI("common/flyReward",((e,n)=>{if(e)return void(t&&t());n.getComponent(o).setEndListener(t)}))}}).imgAd=null,l.imgShare=null,d=l))||d);t._RF.pop()}}}));

System.register("chunks:///_virtual/GameRoot.ts",["./rollupPluginModLoBabelHelpers.js","cc","./setting.ts","./audioManager.ts"],(function(e){"use strict";var t,o,n,i,c,a,s,r,u,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){n=e.cclegacy,i=e.AudioSource,c=e._decorator,a=e.Component,s=e.assert,r=e.game},function(e){u=e.setting},function(e){l=e.audioManager}],execute:function(){var d,p,f,g,h;n._RF.push({},"98dcdQl8GhEYLJRG8ap+Eh+","GameRoot",void 0);const{ccclass:y,property:m}=c;e("GameRoot",(d=y("GameRoot"),p=m(i),d((h=t((g=class extends a{constructor(...e){super(...e),o(this,"_audioSource",h,this)}onLoad(){const e=this.getComponent(i);s(e),this._audioSource=e,r.addPersistRootNode(this.node),l.instance.init(this._audioSource)}onEnable(){l.instance.playMusic(!0),u.checkState()}start(){"undefined"!=typeof cocosAnalytics&&cocosAnalytics.enableDebug(!0)}}).prototype,"_audioSource",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=g))||f));n._RF.pop()}}}));

System.register("chunks:///_virtual/invincible.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameLogic.ts","./constant.ts","./poolManager.ts","./localConfig.ts","./playerData.ts","./resourceUtil.ts","./uiManager.ts","./clientEvent.ts"],(function(n){"use strict";var t,e,i,r,c,o,a,l,s,u,p,h,g,b,f,C;return{setters:[function(n){t=n.applyDecoratedDescriptor,e=n.initializerDefineProperty},function(n){i=n.cclegacy,r=n.Node,c=n.Widget,o=n.Sprite,a=n._decorator,l=n.Component},function(n){s=n.gameLogic},function(n){u=n.constant},function(n){p=n.poolManager},function(n){h=n.localConfig},function(n){g=n.playerData},function(n){b=n.resourceUtil},function(n){f=n.uiManager},function(n){C=n.clientEvent}],execute:function(){var d,v,I,y,_,m,N,k,w;i._RF.push({},"ec04bogempOHrQhVVHVqSZV","invincible",void 0);const{ccclass:B,property:D}=a;n("invincible",(d=B("invincible"),v=D(r),I=D(c),y=D(o),d((N=t((m=class extends l{constructor(...n){super(...n),e(this,"nodeCarParent",N,this),e(this,"wgMenu",k,this),e(this,"spIcon",w,this),this._callback=void 0,this.currentCar=null}start(){}show(n){if(this._callback)return;this._callback=n,s.updateRewardIcon(u.SHARE_FUNCTION.INVINCIBLE,this.spIcon,((n,t)=>{})),this.currentCar&&(p.instance.putNode(this.currentCar),this.currentCar=null);let t=h.instance.queryByID("car",g.instance.showCar.toString());b.getUICar(t.model,((n,e)=>{n?console.error(n,t.model):this.currentCar=p.instance.getNode(e,this.nodeCarParent)}))}onBtnCloseClick(){f.instance.hideDialog("main/invincible"),this._callback&&this._callback(),this._callback=void 0}onBtnOKClick(){s.openReward(u.SHARE_FUNCTION.INVINCIBLE,((n,t)=>{n||(C.dispatchEvent("showInvincible"),this.onBtnCloseClick())}))}}).prototype,"nodeCarParent",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(m.prototype,"wgMenu",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(m.prototype,"spIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=m))||_));i._RF.pop()}}}));

System.register("chunks:///_virtual/LanguageData.ts",["cc","./polyglot.min.ts"],(function(e){"use strict";var n,t,i;return{setters:[function(e){n=e.cclegacy,t=e.director},function(e){i=e.Polyglot}],execute:function(){let o;function r(e){return window.i18nConfig.languages[e]}function a(e){e&&(o?o.replace(e):o=new i({phrases:e,allowMissing:!0}))}n._RF.push({},"d6597NeRz5OuZ6kceJkHWc3","LanguageData",void 0),window.i18nConfig||(window.i18nConfig={languages:{},curLang:""});class l{static init(e){if(!e||e===window.i18nConfig.curLang)return;let n=r(e)||{};window.i18nConfig.curLang=e,a(n),this.inst=o}static t(e,n){if(0===Object.keys(o.phrases).length){a(r(window.i18nConfig.curLang)||{}),console.warn("###防止出现parses数据丢失，重新替换数据")}if(o)return o.t(e,n)}updateSceneRenderers(){let e=t.getScene().children,n=[];for(let t=0;t<e.length;++t){let i=e[t].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(n,i)}for(let e=0;e<n.length;++e){let t=n[e];t.node.active&&t.updateLabel()}let i=[];for(let n=0;n<e.length;++n){let t=e[n].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(i,t)}for(let e=0;e<i.length;++e){let n=i[e];n.node.active&&n.updateSprite(window.i18nConfig.curLang)}}}e("i18n",l),l.inst=null,n._RF.pop()}}}));

System.register("chunks:///_virtual/loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./updateValueLabel.ts"],(function(s){"use strict";var t,e,r,i,o,l,n,a;return{setters:[function(s){t=s.applyDecoratedDescriptor,e=s.initializerDefineProperty},function(s){r=s.cclegacy,i=s.Label,o=s._decorator,l=s.Component,n=s.Vec3},function(s){a=s.updateValueLabel}],execute:function(){var g,u,h,c,p,P,b;r._RF.push({},"99c5fx0klFHq52oGPdZL7Z5","loading",void 0);const{ccclass:d,property:f}=o;s("loading",(g=d("loading"),u=f(a),h=f(i),g((P=t((p=class extends l{constructor(...s){super(...s),e(this,"lbProgress",P,this),e(this,"lbTips",b,this),this.targetProgress=0,this.oriPos=new n}start(){this.show(0)}show(s){this.targetProgress=s||0,this.lbProgress.playUpdateValue(this.targetProgress,this.targetProgress,0),this.lbProgress.isPlaying=!1,this.lbTips.string="",this.oriPos.set(this.lbProgress.node.position)}updateProgress(s,t){this.targetProgress=s;let e=Number(this.lbProgress.label.string);this.lbProgress.playUpdateValue(e,this.targetProgress,(this.targetProgress-e)/20),t&&(this.lbTips.string=t),this.oriPos&&this.lbProgress.node.setPosition(new n(this.oriPos.x-10,this.oriPos.y,this.oriPos.z))}}).prototype,"lbProgress",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(p.prototype,"lbTips",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=p))||c));r._RF.pop()}}}));

System.register("chunks:///_virtual/localConfig.ts",["cc","./resourceUtil.ts","./csvManager.ts"],(function(r){"use strict";var t,e,s,a;return{setters:[function(r){t=r.cclegacy,e=r._decorator},function(r){s=r.resourceUtil},function(r){a=r.csvManager}],execute:function(){var n,i;t._RF.push({},"acd0cVlaIhLurmAIUS/N+2B","localConfig",void 0);const{ccclass:c,property:l}=e;r("localConfig",c("localConfig")(((i=class r{constructor(){this.csvManager=null,this.arrCars=[],this._callback=null,this._skills={},this.currentLoad=0,this.cntLoad=0,this.servers=[]}static get instance(){return this._instance||(this._instance=new r),this._instance}loadConfig(r){this._callback=r,this.csvManager=new a,this.loadCSV()}loadCSV(){var r=["talk","car","signIn"];this.cntLoad=r.length+1,r.forEach(((r,t,e)=>{s.getData(r,((t,e)=>{this.csvManager.addTable(r,e),this.tryToCallbackOnFinished()}))})),s.getJsonData("servers",((r,t)=>{this.servers=t,this.tryToCallbackOnFinished()}))}queryOne(r,t,e){return this.csvManager.queryOne(r,t,e)}queryByID(r,t){return this.csvManager.queryByID(r,t)}getTable(r){return this.csvManager.getTable(r)}getTableArr(r){return this.csvManager.getTableArr(r)}getCars(){if(this.arrCars.length>0)return this.arrCars;let t=r.instance.getTableArr("car");return this.arrCars=t.sort(((r,t)=>r.sort-t.sort)),this.arrCars}queryAll(r,t,e){return this.csvManager.queryAll(r,t,e)}queryIn(r,t,e){return this.csvManager.queryIn(r,t,e)}queryByCondition(r,t){return this.csvManager.queryByCondition(r,t)}tryToCallbackOnFinished(){this._callback&&(this.currentLoad++,this.currentLoad>=this.cntLoad&&this._callback())}getCurrentServer(){return this.servers[0]}getVersion(){let r=this.getCurrentServer();return r?r.version:"unknown"}})._instance=void 0,n=i))||n);t._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedLabel.ts",["./rollupPluginModLoBabelHelpers.js","cc","./LanguageData.ts"],(function(t){"use strict";var e,a,i,o,l,n,r,s,d;return{setters:[function(t){e=t.applyDecoratedDescriptor,a=t.initializerDefineProperty},function(t){i=t.cclegacy,o=t._decorator,l=t.Component,n=t.log,r=t.Label,s=t.error},function(t){d=t.i18n}],execute:function(){var c,u,p,h;i._RF.push({},"c4c1axXN+NL4oYQEr2M4qn2","LocalizedLabel",void 0);const{ccclass:b,property:D}=o;t("default",b("LocalizedLabel")(((h=class extends l{constructor(...t){super(...t),this._debouncedUpdateLabel=null,this.label=null,a(this,"_dataID",p,this)}set dataID(t){this._dataID!==t&&(this._dataID=t,this.updateLabel())}get dataID(){return this._dataID}onLoad(){d.inst||d.init(),n("dataID: "+this.dataID+" value: "+d.t(this.dataID)),this.fetchRender()}fetchRender(){let t=this.getComponent(r);if(t)return this.label=t,void this.updateLabel()}updateLabel(){if(!this.label)return void s("Failed to update localized label, label component is invalid!");d.t(this.dataID,{})&&(this.label.string=d.t(this.dataID,{}))}debounce(t,e,a){let i=-1;return(()=>{const o=arguments,l=(()=>{i=-1,a||t.apply(this,o)}).bind(this),n=a&&!i;clearTimeout(i),i=setTimeout(l,e),n&&t.apply(this,o)}).bind(this)}}).editor={executeInEditMode:!0,menu:"i18n/LocalizedLabel"},p=e((u=h).prototype,"_dataID",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),e(u.prototype,"dataID",[D],Object.getOwnPropertyDescriptor(u.prototype,"dataID"),u.prototype),c=u))||c);i._RF.pop()}}}));

System.register("chunks:///_virtual/LocalizedSprite.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SpriteFrameSet.ts"],(function(e){"use strict";var t,i,r,s,n,p,a,o;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,s=e._decorator,n=e.Component,p=e.Sprite,a=e.error},function(e){o=e.default}],execute:function(){var c,l,u,d,h,m;r._RF.push({},"28bd9xEMv1GKLbTuAi4B4dI","LocalizedSprite",void 0);const{ccclass:S,property:f}=s;e("default",(c=S("LocalizedSprite"),l=f({type:[o],displayOrder:1}),c(((m=class extends n{constructor(...e){super(...e),this.sprite=null,i(this,"spriteFrameSet",h,this)}onLoad(){this.fetchRender()}fetchRender(){let e=this.getComponent(p);if(e)return this.sprite=e,void this.updateSprite(window.i18nConfig.curLang)}getSpriteFrameByLang(e){for(let t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame}updateSprite(e){if(!this.sprite)return void a("Failed to update localized sprite, sprite component is invalid!");let t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),t&&(this.sprite.spriteFrame=t)}}).editor={executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},h=t((d=m).prototype,"spriteFrameSet",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=d))||u));r._RF.pop()}}}));

System.register("chunks:///_virtual/lodash.ts",["cc"],(function(t){"use strict";var r,e;return{setters:[function(t){r=t.cclegacy,e=t._decorator}],execute:function(){var n,i;r._RF.push({},"8cbacDdVTBOgZQMyvQzOeAz","lodash",void 0);const{ccclass:s}=e;t("lodash",s("lodash")(((i=class t{static find(t,r){var e;if(Array.isArray(t)||(t=this.toArray(t)),(e=t.filter(r)).length)return e[0]}static forEach(t,r){if(Array.isArray(t))t.forEach(r);else{this.toArrayKey(t).forEach((function(e,n,i){const s=e.key,a=e.value;r(a,s,t)}))}}static cloneDeep(t){if(null===t||"object"!=typeof t)return t;let r={};t.constructor===Array&&(r=[]);for(let e in t)t.hasOwnProperty(e)&&(r[e]=this.cloneDeep(t[e]));return r}static map(t,r){Array.isArray(t)||(t=this.toArray(t));const e=[];return t.forEach((function(t,n,i){e.push(r(t,n,i))})),e}static random(t,r){var e=Math.random()*(r-t+1)+t;return Math.floor(e)}static toArrayKey(t){const r=[];for(let e in t)t.hasOwnProperty(e)&&r.push({key:e,value:t[e]});return r}static toArray(t){const r=[];for(let e in t)t.hasOwnProperty(e)&&r.push(t[e]);return r}static filter(t,r){return Array.isArray(t)||(t=this.toArray(t)),t.filter(r)}static isEqual(t,r){if(!(t instanceof Object)||!(r instanceof Object))return t===r;if(Object.keys(t).length!==Object.keys(r).length)return!1;for(let e in t){const n=t[e]instanceof Object,i=r[e]instanceof Object;if(n&&i)return this.isEqual(t[e],r[e]);if(t[e]!==r[e])return!1}return!0}static pullAllWith(t,r,e){return r.forEach((function(r){t.filter((function(t){return e(t,r)})).forEach((function(r){var e=t.indexOf(r);-1!==t.indexOf(r)&&t.splice(e,1)}))})),t}static now(){return Date.now()}static pullAll(t,r){return r.forEach((function(r){const e=t.indexOf(r);-1!==t.indexOf(r)&&t.splice(e,1)})),t}static forEachRight(t,r){Array.isArray(t)||(t=this.toArray(t));for(let e=t.length-1;e>=0;e--){if(!r(t[e]))break}}static startsWith(t,r,e){return(t=t.substr(e)).startsWith(r)}static endsWith(t,r,e){return(t=t.substr(e)).endsWith(r)}static remove(t,r){const e=[],n=[];return t.forEach((function(t,i){r(t)&&(e.push(t),n.push(i))})),this.basePullAt(t,n),e}static basePullAt(t,r){for(var e,n=t?r.length:0,i=n-1;n--;){var s=r[n];n!==i&&s===e||(e=s,Array.prototype.splice.call(t,s,1))}return t}static findIndex(t,r,e){var n;if(t=t.slice(e),"function"==typeof r){for(n=0;n<t.length;n++)if(r(t[n]))return n}else if(Array.isArray(r))for(n=0;n<t.length;n++){var i=r[0],s=!0;if(r.length>1&&(s=r[1]),t[n][i]===s)return n}else for(n=0;n<t.length;n++)if(t[n]===r)return n;return-1}static concat(){var t=arguments.length;if(!t)return[];for(var r=arguments[0],e=1;e<t;)r=r.concat(arguments[e]),e++;return r}static isNumber(t){return"number"==typeof t}static indexOf(t,r,e){return(t=t.slice(e)).indexOf(r)}static join(t,r){if(null===t)return"";var e="";return t.forEach((function(t){e+=t+r})),e.substr(0,e.length-1)}static split(t,r,e){return t.split(r,e)}static max(t){if(t&&t.length){for(var r,e=0;e<t.length;e++)0===e?r=t[0]:r<t[e]&&(r=t[e]);return r}}static drop(t,r){return(null===t?0:t.length)?t.slice(r):[]}static flattenDeep(t){return t.reduce(((t,r)=>t.concat(r)))}static uniq(t){const r=[];return t.forEach((function(t){-1===r.indexOf(t)&&r.push(t)})),r}static isNaN(t){return this.isNumber(t)&&t!==+t}static chunk(t,r){if(!(null===t?0:t.length)||r<1)return[];const e=[];for(;t.length>r;)e.push(t.slice(0,r)),t=t.slice(r);return e.push(t),e}static toFinite(t){const r=1/0;if(!t)return 0===t?t:0;if((t=Number(t))===r||t===-1/0){return 17976931348623157e292*(t<0?-1:1)}return t==t?t:0}static baseRange(t,r,e,n){let i=-1,s=(0,Math.max)((0,Math.ceil)((r-t)/(e||1)),0),a=Array(s);for(;s--;)a[n?s:++i]=t,t+=e;return a}static isObject(t){const r=typeof t;return null!==t&&("object"===r||"function"===r)}static isLength(r){return"number"==typeof r&&r>-1&&r%1==0&&r<=t.MAX_SAFE_INTEGER}static isArrayLike(t){return null!==t&&this.isLength(t.length)}static eq(t,r){return t===r||t!=t&&r!=r}static isIndex(r,e){const n=typeof r;return!!(e=null===e?t.MAX_SAFE_INTEGER:e)&&("number"===n||"symbol"!==n&&/^(?:0|[1-9]\d*)$/.test(r))&&r>-1&&r%1==0&&r<e}static isIterateeCall(t,r,e){if(!this.isObject(e))return!1;var n=typeof r;return!!("number"===n?this.isArrayLike(e)&&this.isIndex(r,e.length):"string"===n&&r in e)&&this.eq(e[r],t)}static createRange(t){return((r,e,n)=>(n&&"number"!=typeof n&&this.isIterateeCall(r,e,n)&&(e=n=void 0),r=this.toFinite(r),void 0===e?(e=r,r=0):e=this.toFinite(e),n=void 0===n?r<e?1:-1:this.toFinite(n),this.baseRange(r,e,n,t))).bind(this)}static maxBy(t,r){if(t&&t.length){let e=-1,n=-1;for(let i=0;i<t.length;i++)0===i?(e=r(t[0]),n=t[0]):e<t[i]&&(e=t[i],n=t[i]);return n}}static minBy(t,r){if(t&&t.length){let n=-1,i=-1;for(var e=0;e<t.length;e++)0===e?(n=r(t[0]),i=t[0]):n>t[e]&&(n=r(t[e]),i=t[e]);return i}}static sumBy(t,r){let e=0;for(let n in t)e+=r(t[n]);return e}static countBy(t){const r={};for(let e in t){const n=t[e];r.hasOwnProperty(n)?r[n]+=1:r[n]=1}return r}}).MAX_SAFE_INTEGER=9007199254740991,n=i))||n);r._RF.pop()}}}));

System.register("chunks:///_virtual/lottery.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./localConfig.ts","./playerData.ts","./lodash.ts","./lotteryItem.ts","./constant.ts","./clientEvent.ts","./gameLogic.ts","./configuration.ts"],(function(t){"use strict";var e,n,i,r,a,o,l,s,u,h,c,b,d,p,y,f,g,m,w,B,R,C,E,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,r=t.Node,a=t.Prefab,o=t.Button,l=t.Label,s=t.SpriteFrame,u=t.Sprite,h=t._decorator,c=t.Component,b=t.instantiate,d=t.Color,p=t.Vec3,y=t.tween},function(t){f=t.uiManager},function(t){g=t.localConfig},function(t){m=t.playerData},function(t){w=t.lodash},function(t){B=t.lotteryItem},function(t){R=t.constant},function(t){C=t.clientEvent},function(t){E=t.gameLogic},function(t){I=t.configuration}],execute:function(){var L,D,T,A,v,M,z,O,_,N,Y,F,k,P,G,V,x,S,U,H,j,q,J,W,Z,$,K,Q,X;i._RF.push({},"d7ed7RMvvZIvbdJyWwfIGDy","lottery",void 0);const{ccclass:tt,property:et}=h;t("lottery",(L=tt("lottery"),D=et(r),T=et(a),A=et(r),v=et(r),M=et(o),z=et(o),O=et(l),_=et(s),N=et(s),Y=et(s),F=et(u),k=et(u),P=et(u),L((x=e((V=class extends c{constructor(...t){super(...t),n(this,"arrRewardNode",x,this),n(this,"pfRewardItem",S,this),n(this,"nodeTurnable",U,this),n(this,"ndBtnClose",H,this),n(this,"btnLottery",j,this),n(this,"btnAd",q,this),n(this,"lbMoney",J,this),n(this,"imgLotteryBtnDisable",W,this),n(this,"imgLotteryBtnEnable",Z,this),n(this,"imgAdBtnEnable",$,this),n(this,"spLotteryBtn",K,this),n(this,"spAdIcon",Q,this),n(this,"spAdBtn",X,this),this.arrRewardData=[],this.arrLotteryItem=[],this.arrProbability=[],this.randValue=0,this.curRotation=null,this._receiveCarTimes=0}set receiveCarTimes(t){console.log("#####receiveCarTimes",t),this._receiveCarTimes=t}get receiveCarTimes(){return this._receiveCarTimes}start(){}onEnable(){C.on("buyCar",this.onBuyCar,this)}onDisable(){C.off("buyCar",this.onBuyCar,this)}onBuyCar(){this.initReward()}show(){this.initReward(),this.initInfo(),this.btnAd.node.active=!0}initReward(){let t=g.instance.getCars(),e=[];if(t.forEach((t=>{m.instance.hasCar(t.ID)||t.type!==R.BUY_CAR_TYPE.GOLD||e.push(t.ID)})),e.length<6){let t=w.cloneDeep(m.instance.playerInfo.cars);for(;e.length<6;){let n=Math.floor(Math.random()*t.length),i=t[n];g.instance.queryByID("car",i).type===R.BUY_CAR_TYPE.GOLD&&e.push(t.splice(n,1)[0])}}this.arrRewardData=e,this.arrProbability=[];let n=0;for(let t=0;t<this.arrRewardNode.length;t++){let e=this.arrRewardNode[t],i=this.arrLotteryItem[t];if(i||(i=b(this.pfRewardItem),i.parent=e,this.arrLotteryItem[t]=i),this.arrRewardData.length>t){let e=this.arrRewardData[t];i.getComponent(B).show(e);let r=n,a=n+100/6;this.arrProbability.push({min:r,max:a,idx:t}),n=a}}}initInfo(){this.lbMoney.string=""+R.LOTTERY.MONEY,this.checkButton()}checkButton(){const t=this.checkIsFree();this.btnAd.node.active=t,this.btnLottery.node.active=!t,t||(m.instance.playerInfo.gold>R.LOTTERY.MONEY?(this.lbMoney.color=new d(163,64,27),this.lotteryBtnEnable=!0,this.adBtnEnable=!1):(this.lbMoney.color=d.RED,this.lotteryBtnEnable=!1,this.adBtnEnable=!0),E.updateRewardIcon(R.SHARE_FUNCTION.LOTTERY,this.spAdIcon,(()=>{})))}checkIsFree(){const t=m.instance.playerInfo.signInInfo.currentDay,e=I.instance.getGlobalData("rewardDays");return void 0===e||parseInt(e)<t}set lotteryBtnEnable(t){t?(this.btnLottery.interactable=!0,this.spLotteryBtn.spriteFrame=this.imgLotteryBtnEnable):(this.btnLottery.interactable=!1,this.spLotteryBtn.spriteFrame=this.imgLotteryBtnDisable)}set adBtnEnable(t){t?(this.btnAd.interactable=!0,this.spAdBtn.spriteFrame=this.imgAdBtnEnable):(this.btnAd.interactable=!1,this.spAdBtn.spriteFrame=this.imgLotteryBtnDisable)}getRandValue(){let t=-1;for(;-1===t;){let e=Math.floor(100*Math.random());for(let n=0;n<this.arrProbability.length;n++){let i=this.arrProbability[n];if(e>=i.min&&e<i.max){t=i.idx;break}}}return t}onBtnStartClick(){E.addGold(-R.LOTTERY.MONEY),this.startRun()}onBtnAdClick(){const t=I.instance.getGlobalData("rewardDays");I.instance.setGlobalData("rewardDays",`${t?parseInt(t)+1:0}`),E.openReward(R.SHARE_FUNCTION.LOTTERY,(t=>{t||this.startRun()}))}startRun(){this.lotteryBtnEnable=!1,this.adBtnEnable=!1,this.ndBtnClose.getComponent(o).interactable=!1,this.randValue=this.getRandValue();let t=this.nodeTurnable.eulerAngles.z%360;this.nodeTurnable.eulerAngles=new p(0,0,t);let e=360-t,n=3+Math.floor(4*Math.random()),i=-360-360*n+60*this.randValue+30-360;this.curRotation=this.nodeTurnable.eulerAngles.clone(),y(this.curRotation).to(e/360+.5*n,new p(0,0,i),{easing:"cubicOut"}).call((()=>{this.curRotation=null,this.showReward()})).start()}showReward(){this.ndBtnClose.getComponent(o).interactable=!0,this.arrLotteryItem[this.randValue].getComponent(B).showReward(this),this.checkButton()}onBtnCloseClick(){f.instance.hideDialog("lottery/lottery")}update(t){this.curRotation&&(this.nodeTurnable.eulerAngles=this.curRotation)}}).prototype,"arrRewardNode",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=e(V.prototype,"pfRewardItem",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(V.prototype,"nodeTurnable",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=e(V.prototype,"ndBtnClose",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=e(V.prototype,"btnLottery",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=e(V.prototype,"btnAd",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=e(V.prototype,"lbMoney",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(V.prototype,"imgLotteryBtnDisable",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=e(V.prototype,"imgLotteryBtnEnable",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=e(V.prototype,"imgAdBtnEnable",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=e(V.prototype,"spLotteryBtn",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=e(V.prototype,"spAdIcon",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=e(V.prototype,"spAdBtn",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=V))||G));i._RF.pop()}}}));

System.register("chunks:///_virtual/lotteryItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./localConfig.ts","./playerData.ts","./uiManager.ts","./constant.ts","./LanguageData.ts"],(function(t){"use strict";var e,r,o,n,i,a,s,l,c,u,p,f,h,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){o=t.cclegacy,n=t.SpriteFrame,i=t.Sprite,a=t.Label,s=t._decorator,l=t.Component},function(t){c=t.resourceUtil},function(t){u=t.localConfig},function(t){p=t.playerData},function(t){f=t.uiManager},function(t){h=t.constant},function(t){m=t.i18n}],execute:function(){var I,w,d,y,D,g,R,b,C;o._RF.push({},"93fc8seXTpPJqvHF6Jlpios","lotteryItem",void 0);const{ccclass:T,property:v}=s;t("lotteryItem",(I=T("lotteryItem"),w=v(n),d=v(i),y=v(a),I((R=e((g=class extends l{constructor(...t){super(...t),r(this,"imgGold",R,this),r(this,"spItem",b,this),r(this,"lbValue",C,this),this.carInfo=void 0}start(){}show(t){this.carInfo=u.instance.queryByID("car",t),c.setCarIcon(this.carInfo.model,this.spItem,!1,(()=>{}))}showReward(t){if(console.log(this.carInfo.ID),p.instance.hasCar(this.carInfo.ID)){let t={rewardType:h.REWARD_TYPE.GOLD,amount:h.LOTTERY.EXCHANGE,ID:this.carInfo.ID};f.instance.showDialog("common/showReward",[t,!1,m.t("showReward.title"),()=>{},m.t("showReward.alreadyHadCar")])}else{let e={rewardType:h.REWARD_TYPE.CAR,amount:1,ID:this.carInfo.ID};f.instance.showDialog("common/showReward",[e,!1,m.t("showReward.title"),()=>{t.receiveCarTimes+=1}])}}}).prototype,"imgGold",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=e(g.prototype,"spItem",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(g.prototype,"lbValue",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=g))||D));o._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./car.ts","./carManager.ts","./customerManager.ts","./effectManager.ts","./fightConstants.ts","./fightManager.ts","./fightMap.ts","./follow.ts","./roadPoint.ts","./GameRoot.ts","./audioManager.ts","./clientEvent.ts","./configuration.ts","./constant.ts","./csvManager.ts","./eventListener.ts","./localConfig.ts","./lodash.ts","./oneToMultiListener.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./uiManager.ts","./util.ts","./en.ts","./zh.ts","./LanguageData.ts","./LocalizedLabel.ts","./LocalizedSprite.ts","./SpriteFrameSet.ts","./polyglot.min.ts","./gameLogic.ts","./main.ts","./blockInputEvent.ts","./btnAdapter.ts","./loading.ts","./showReward.ts","./tips.ts","./updateValueLabel.ts","./balance.ts","./clickBox.ts","./fightCanvas.ts","./fightUI.ts","./revive.ts","./lottery.ts","./lotteryItem.ts","./flyReward.ts","./flyRewardItem.ts","./invincible.ts","./mainUI.ts","./setting.ts","./trial.ts","./online.ts","./onlineDouble.ts","./shop.ts","./shopItem.ts","./shopPage.ts","./signIn.ts","./signInItem.ts"],(function(){"use strict";return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/main.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localConfig.ts","./playerData.ts","./configuration.ts","./loading.ts","./LanguageData.ts"],(function(i){"use strict";var s,e,r,n,o,t,a,c,u,g,d,l,h;return{setters:[function(i){s=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){r=i.cclegacy,n=i.Label,o=i._decorator,t=i.Component,a=i.assetManager,c=i.director},function(i){u=i.localConfig},function(i){g=i.playerData},function(i){d=i.configuration},function(i){l=i.loading},function(i){h=i.i18n}],execute:function(){var P,p,f,m,b,L,I;r._RF.push({},"c5aa7IsWr5A4blPeFPanXM/","main",void 0);const{ccclass:S,property:y}=o;h.init("zh");i("main",(P=S("main"),p=y(n),f=y(l),P((L=s((b=class extends t{constructor(...i){super(...i),e(this,"lbVersion",L,this),e(this,"loadingUI",I,this),this.retryTimes=0,this.uid="",this.curProgress=0,this.isLoginFinished=!1,this.isSubPackageFinished=!1,this.isConfigLoaded=!1}start(){this.loadingUI.show(),g.instance.syncServerTime(Date.now()),this.curProgress=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.dataLoading")),u.instance.loadConfig((()=>{this.lbVersion.string=`Version. ${u.instance.getVersion()}`,this.isConfigLoaded=!0,this.loadMainScene()})),this.curProgress+=5,this.loadingUI&&this.loadingUI.updateProgress(this.curProgress,h.t("main.dataLoadOver")),this.curProgress+=5,this.curProgress+=15,this.loadingUI.updateProgress(this.curProgress,h.t("main.gameResourceLoading")),g.instance.loadGlobalCache(),g.instance.userId?this.uid=g.instance.userId:this.uid=d.generateGuestAccount(),this.startLogin(),this.downloadGameRes((()=>{this.isSubPackageFinished=!0,this.loadMainScene()}))}startLogin(){d.instance.setUserId(this.uid),g.instance.syncServerTime(Date.now()),this.userLogin()}userLogin(){g.instance.loadFromCache(),void 0===g.instance.playerInfo.createDate&&g.instance.createPlayerInfo(),console.log("login finished!"),this.isLoginFinished=!0,this.loadMainScene()}downloadGameRes(i){this.curProgress+=15,this.loadingUI.updateProgress(this.curProgress),i&&i()}showSubPackageError(){}loadGameSubPackage(i){this.loadingUI.updateProgress(this.curProgress,h.t("main.audioResourceLoading")),a.loadBundle("resources",(s=>{if(this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.audioResourceLoading")),s)return this.showSubPackageError(),console.error(s);a.loadBundle("textures",(s=>{if(this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.mappingResourceLoading")),s)return this.showSubPackageError(),console.error(s);a.loadBundle("model",(s=>{if(this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.modelResourceLoading")),s)return this.showSubPackageError(),console.error(s);i&&i()}))}))}))}loadMainScene(){this.isConfigLoaded&&this.isLoginFinished&&this.isSubPackageFinished&&c.preloadScene("main",(i=>{this.curProgress+=5,this.loadingUI.updateProgress(this.curProgress,h.t("main.entering")),i||c.loadScene("main",(function(){}))}))}}).prototype,"lbVersion",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=s(b.prototype,"loadingUI",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=b))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/mainUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./clientEvent.ts","./playerData.ts","./util.ts","./constant.ts","./uiManager.ts","./gameLogic.ts"],(function(t){"use strict";var e,n,i,a,s,o,r,l,c,h,d,u,p,g,C,f,I;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){i=t.cclegacy,a=t.Sprite,s=t.Label,o=t.Node,r=t._decorator,l=t.Component,c=t.Vec3,h=t.tween,d=t.sys},function(t){u=t.clientEvent},function(t){p=t.playerData},function(t){g=t.util},function(t){C=t.constant},function(t){f=t.uiManager},function(t){I=t.gameLogic}],execute:function(){var v,S,y,b,w,D,G,m,R,E,B,k,L,T,P;i._RF.push({},"6e662xQs9xPfZ4Gn7vNo4u5","mainUI",void 0);const{ccclass:_,property:x}=r;t("mainUI",(v=_("mainUI"),S=x(a),y=x(s),b=x(o),w=x(o),D=x(o),G=x(o),v((E=e((R=class extends l{constructor(...t){super(...t),n(this,"spIcon",E,this),n(this,"lbGold",B,this),n(this,"nodeBtnService",k,this),n(this,"nodeSignInRedDot",L,this),n(this,"nodeGoldIcon",T,this),n(this,"nodeShopRedDot",P,this),this.targetScale=new c(1,1,1),this.isGoldPlaying=!1,this.arrCars=[],this.isShowAniFinished=!1,this.debugIdx=0,this.debugTimer=0}start(){I.afterLogin(),this.updateSignIn()}onEnable(){u.on("updateGold",this.updateGold,this),u.on("updateSignIn",this.updateSignIn,this),u.on("receiveGold",this.receiveGold,this),u.on("updateCar",this.updateCar,this),u.on("buyCar",this.updateCarReceived,this),this.nodeGoldIcon.on(o.EventType.TOUCH_START,this.resetPlayData,this)}onDisable(){u.off("updateGold",this.updateGold,this),u.off("updateSignIn",this.updateSignIn,this),u.off("receiveGold",this.receiveGold,this),u.off("updateCar",this.updateCar,this),u.off("buyCar",this.updateCarReceived,this),this.nodeGoldIcon.off(o.EventType.TOUCH_START,this.resetPlayData,this)}updateGold(){let t=p.instance.playerInfo.gold||0;this.lbGold.string=g.formatMoney(t)}receiveGold(){this.isGoldPlaying=!0,this.nodeGoldIcon.setScale(new c(1,1,1)),h(this.targetScale).to(.2,new c(1.2,1.2,1.2)).to(.2,new c(1,1,1)).call((()=>{this.isGoldPlaying=!1})).start()}updateSignIn(){p.instance.updateSignInCurrentDay();let t=p.instance.getSignInReceivedInfo();this.nodeSignInRedDot.active=!t.isAllReceived}onBtnBgClick(){p.instance.playerInfo.level>C.NEWBEE_LEVEL?f.instance.showDialog("main/trial",[()=>{this.askInvincible()}]):this.showStart()}askInvincible(){p.instance.playerInfo.level>C.NEWBEE_LEVEL?f.instance.showDialog("main/invincible",[()=>{this.showStart()}]):this.showStart()}showStart(){u.dispatchEvent("startGame")}onBtnDailyClick(){f.instance.showDialog("signIn/signIn")}onBtnLotteryClick(){f.instance.showDialog("lottery/lottery")}onBtnRankClick(){f.instance.showDialog("rank/rank")}onBtnChangeCarClick(){f.instance.showDialog("shop/shop")}onBtnSettingClick(){f.instance.showDialog("main/setting")}updateCar(){}updateCarReceived(){this.nodeShopRedDot.active=p.instance.hasCarCanReceived()}onBtnLeftClick(){let t=p.instance.showCar,e=this.arrCars.indexOf(t);e--,e<0&&(e=this.arrCars.length-1),p.instance.showCar=this.arrCars[e],u.dispatchEvent("updateCar")}onBtnRightClick(){let t=p.instance.showCar,e=this.arrCars.indexOf(t);e++,e>=this.arrCars.length&&(e=0),p.instance.showCar=this.arrCars[e],u.dispatchEvent("updateCar")}show(){this.updateGold(),this.nodeShopRedDot.active=p.instance.hasCarCanReceived(),this.arrCars.length=0,p.instance.playerInfo.cars.forEach((t=>{const e=parseInt(t);e>=0&&this.arrCars.push(e)})),this.isShowAniFinished=!0,I.updateRewardIcon(C.SHARE_FUNCTION.TRIAL,this.spIcon,(()=>{p.instance.hasCar(p.instance.showCar)&&(this.spIcon.node.active=!1)})),p.instance.isComeFromBalance&&this.onBtnBgClick()}update(t){(this.isGoldPlaying||1!==this.targetScale.x)&&this.nodeGoldIcon.setScale(this.targetScale)}onBtnDebugClick(){}resetPlayData(){d.localStorage.removeItem("CarConfig"),f.instance.showTips("数据重置成功！")}}).prototype,"spIcon",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(R.prototype,"lbGold",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(R.prototype,"nodeBtnService",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(R.prototype,"nodeSignInRedDot",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=e(R.prototype,"nodeGoldIcon",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(R.prototype,"nodeShopRedDot",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=R))||m));i._RF.pop()}}}));

System.register("chunks:///_virtual/oneToMultiListener.ts",["cc"],(function(t){"use strict";var e,r,n;return{setters:[function(t){e=t.cclegacy,r=t._decorator,n=t.error}],execute:function(){var s,o;e._RF.push({},"10a25g6TDNP2IICdF4Htopx","oneToMultiListener",void 0);const{ccclass:i}=r;t("oneToMultiListener",i("oneToMultiListener")(((o=class{static on(t,e,r){const n={handler:e,target:r};let s=this.handlers[t];s||(s=[],this.handlers[t]=s);for(var o=0;o<s.length;o++)if(!s[o])return s[o]=n,o;return s.push(n),s.length}static off(t,e,r){const n=this.handlers[t];if(n)for(let t=0;t<n.length;t++){const s=n[t];if(s.handler===e&&(!r||r===s.target)){n.splice(t,1);break}}}static dispatchEvent(t,...e){const r=this.handlers[t];let n;for(n=1;n<arguments.length;n++);if(r)for(n=0;n<r.length;n++){const t=r[n];t.handler&&t.handler.apply(t.target,e)}}static setSupportEventList(t){if(!(t instanceof Array))return n("supportEvent was not array"),!1;this.supportEvent={};for(let e in t){const r=t[e];this.supportEvent[r]=e}return!0}}).handlers=void 0,o.supportEvent=void 0,s=o))||s);e._RF.pop()}}}));

System.register("chunks:///_virtual/online.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./util.ts","./constant.ts","./gameLogic.ts","./uiManager.ts","./clientEvent.ts"],(function(e){"use strict";var t,i,r,n,s,l,o,a,c,u,h,f,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Sprite,s=e.Label,l=e._decorator,o=e.Component},function(e){a=e.playerData},function(e){c=e.util},function(e){u=e.constant},function(e){h=e.gameLogic},function(e){f=e.uiManager},function(e){p=e.clientEvent}],execute:function(){var g,m,d,T,E,R,b,I,L;r._RF.push({},"349acC5lWBNyZL7loxYm/uD","online",void 0);const{ccclass:O,property:P}=l;e("online",(g=O("online"),m=P(n),d=P(n),T=P(s),g((b=t((R=class extends o{constructor(...e){super(...e),i(this,"spTimeProgress",b,this),i(this,"perTimeProgress",I,this),i(this,"lbGold",L,this),this.currentTime=0,this.isOverflow=!1,this.currentGold=0}start(){}onEnable(){this.refresh()}refresh(){this.currentTime=0,this.perTimeProgress.fillRange=0;let e=a.instance.getLastOnlineRewardTime(),t=Math.floor((a.instance.getCurrentTime()-e)/1e3);t=t>0?t:0,t=t<u.ONLINE.MAX_TIME?t:u.ONLINE.MAX_TIME,this.isOverflow=t===u.ONLINE.MAX_TIME,this.currentGold=Math.floor(t*u.ONLINE.PROFIT_PER_SECOND),this.lbGold.string=c.formatMoney(this.currentGold);let i=t/u.ONLINE.MAX_TIME;i=i>1?1:i,this.spTimeProgress.fillRange=i}clear(){this.currentGold=0,this.lbGold.string="0",this.spTimeProgress.fillRange=0,a.instance.updateLastOnlineRewardTime(this.currentTime),this.isOverflow=!1}onBtnOnlineClick(){if(this.currentGold<=0)return;this.spTimeProgress.fillRange>=.5?f.instance.showDialog("main/onlineDouble",[this.currentGold,()=>{this.clear()}]):(a.instance.updatePlayerInfo("gold",this.currentGold),h.showFlyReward(u.REWARD_TYPE.GOLD,(()=>{p.dispatchEvent("updateGold")})),this.clear())}update(e){if(!this.isOverflow)if(this.currentTime+=e,this.currentTime>u.ONLINE.TIME_PER_CIRCLE)this.refresh();else{let e=this.currentTime/u.ONLINE.TIME_PER_CIRCLE;this.perTimeProgress.fillRange=e}}}).prototype,"spTimeProgress",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(R.prototype,"perTimeProgress",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(R.prototype,"lbGold",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),E=R))||E));r._RF.pop()}}}));

System.register("chunks:///_virtual/onlineDouble.ts",["./rollupPluginModLoBabelHelpers.js","cc","./gameLogic.ts","./uiManager.ts","./util.ts","./constant.ts","./playerData.ts","./clientEvent.ts"],(function(e){"use strict";var t,n,i,o,l,r,a,s,c,u,p,d,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){i=e.cclegacy,o=e.Label,l=e.Sprite,r=e._decorator,a=e.Component},function(e){s=e.gameLogic},function(e){c=e.uiManager},function(e){u=e.util},function(e){p=e.constant},function(e){d=e.playerData},function(e){b=e.clientEvent}],execute:function(){var h,f,y,g,w,D,m,v,M;i._RF.push({},"5b356wyJ3BCYZpADXUOyafo","onlineDouble",void 0);const{ccclass:C,property:N}=r;e("onlineDouble",(h=C("onlineDouble"),f=N(o),y=N(o),g=N(l),h((m=t((D=class extends a{constructor(...e){super(...e),this.rewardMoney=0,this.overCallback=null,n(this,"lbGoldNormal",m,this),n(this,"lbGoldMulti",v,this),n(this,"spIcon",M,this)}start(){}show(e,t){this.rewardMoney=e,this.overCallback=t,this.lbGoldNormal.string=u.formatMoney(e),this.lbGoldMulti.string=u.formatMoney(3*e),s.updateRewardIcon(p.SHARE_FUNCTION.ONLINE,this.spIcon)}onBtnGetNormalClick(){this.rewardOver(this.rewardMoney)}onBtnGetMultiClick(){s.openReward(p.SHARE_FUNCTION.ONLINE,(e=>{e||this.rewardOver(3*this.rewardMoney)}))}rewardOver(e){d.instance.updatePlayerInfo("gold",e),c.instance.hideDialog("main/onlineDouble"),s.showFlyReward(p.REWARD_TYPE.GOLD,(()=>{b.dispatchEvent("updateGold")})),this.overCallback&&this.overCallback()}onBtnCloseClick(){c.instance.hideDialog("main/onlineDouble")}}).prototype,"lbGoldNormal",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(D.prototype,"lbGoldMulti",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(D.prototype,"spIcon",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=D))||w));i._RF.pop()}}}));

System.register("chunks:///_virtual/playerData.ts",["cc","./configuration.ts","./constant.ts","./util.ts","./localConfig.ts"],(function(e){"use strict";var t,n,a,i,s,r,o;return{setters:[function(e){t=e.cclegacy,n=e._decorator,a=e.Component},function(e){i=e.configuration},function(e){s=e.constant},function(e){r=e.util},function(e){o=e.localConfig}],execute:function(){var l,I;t._RF.push({},"985d59n5DNIrIcY9mIscZXN","playerData",void 0);const{ccclass:h,property:y}=n;e("playerData",h("playerData")(((I=class e extends a{constructor(...e){super(...e),this.serverTime=0,this.localTime=0,this.showCar=0,this.isComeFromBalance=!1,this.userId="",this.playerInfo={},this.history=null,this.settings=null,this.isNewBee=!1,this.dataVersion="",this.signInInfo=null}static get instance(){return this._instance||(this._instance=new e),this._instance}loadGlobalCache(){let e=i.instance.getUserId();e&&(this.userId=e)}loadFromCache(){this.playerInfo=this.loadDataByKey(s.LOCAL_CACHE.PLAYER),this.playerInfo.currentCar?this.showCar=this.playerInfo.currentCar:this.showCar=s.INITIAL_CAR,this.history=this.loadDataByKey(s.LOCAL_CACHE.HISTORY),this.settings=this.loadDataByKey(s.LOCAL_CACHE.SETTINGS)}loadDataByKey(e){let t={},n=i.instance.getConfigData(e);if(n)try{t=JSON.parse(n)}catch(e){t={}}return t}createPlayerInfo(e){if(this.playerInfo.level=1,this.playerInfo.gold=0,this.playerInfo.realLevel=1,this.playerInfo.passCheckPoint=!1,this.playerInfo.createDate=new Date,this.playerInfo.currentCar=s.INITIAL_CAR,this.playerInfo.cars=[],this.playerInfo.cars.push(s.INITIAL_CAR),this.playerInfo.dictBuyTask={},this.showCar=this.playerInfo.currentCar,this.isNewBee=!0,this.playerInfo.signInInfo={},this.playerInfo.dictGetCarTime={},e)for(let t in e)this.playerInfo[t]=e[t];this.savePlayerInfoToLocalCache()}saveAccount(e){this.userId=e,i.instance.setUserId(e)}savePlayerInfoToLocalCache(){i.instance.setConfigData(s.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))}saveAll(){i.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo)),i.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.HISTORY,JSON.stringify(this.history)),i.instance.setConfigDataWithoutSave(s.LOCAL_CACHE.SETTINGS,JSON.stringify(this.settings)),i.instance.setConfigData(s.LOCAL_CACHE.DATA_VERSION,this.dataVersion)}updatePlayerInfo(e,t){let n=!1;this.playerInfo.hasOwnProperty(e)?"number"==typeof t?(n=!0,this.playerInfo[e]+=t,this.playerInfo[e]<0&&(this.playerInfo[e]=0)):"boolean"!=typeof t&&"string"!=typeof t||(n=!0,this.playerInfo[e]=t):"gold"===e&&(n=!0,this.playerInfo[e]=t),n&&i.instance.setConfigData(s.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))}updateSignInCurrentDay(){if(0===Object.keys(this.playerInfo.signInInfo).length||this.isNeedRecycleSignInInfo())this.createNewSignInInfo();else{let e=r.getDeltaDays(this.playerInfo.signInInfo.signInDate,Date.now());if(0===e)return;this.updateSignInFillSignInDays(0,!0),this.playerInfo.signInInfo.currentDay+=e,this.playerInfo.signInInfo.currentDay<=0&&this.createNewSignInInfo(),this.playerInfo.signInInfo.currentDay>s.MAX_SIGNIN_DAY?s.MAX_SIGNIN_DAY:this.playerInfo.signInInfo.currentDay,this.playerInfo.signInInfo.signInDate=Date.now()}this.savePlayerInfoToLocalCache()}createNewSignInInfo(){this.playerInfo.hasOwnProperty("signInInfo")||(this.playerInfo.signInInfo={},this.playerInfo.dictGetCarTime={});let e=this.playerInfo.signInInfo;e.createDate=Date.now(),e.signInDate=Date.now(),e.currentDay=1,e.receivedDays=[],e.afterFillSignInDays=[],this.savePlayerInfoToLocalCache()}isNeedRecycleSignInInfo(){this.playerInfo.signInInfo||this.createNewSignInInfo();let e=!1;return r.getDeltaDays(this.playerInfo.signInInfo.createDate,Date.now())>=s.MAX_SIGNIN_DAY&&(e=!0),e}updateSignInReceivedDays(e){let t=this.playerInfo.signInInfo.receivedDays;Array.isArray(t)&&t.includes(e)||(t.push(Number(e)),this.savePlayerInfoToLocalCache())}updateSignInFillSignInDays(e,t){let n=this.playerInfo.signInInfo.afterFillSignInDays;if(t)n.length=0;else{if(Array.isArray(n)&&n.includes(e))return;n.push(Number(e))}this.savePlayerInfoToLocalCache()}getSignInReceivedInfo(){this.playerInfo.signInInfo||this.createNewSignInInfo();let e=this.playerInfo.signInInfo,t=!1,n=!1;return t=!(e.receivedDays.length<e.currentDay),n=!!e.receivedDays.includes(e.currentDay),{isAllReceived:t,isTodayReceived:n}}isHadCarAndDuringPeriod(e){let t=this.playerInfo.signInInfo.createDate;this.playerInfo.dictGetCarTime||(this.playerInfo.dictGetCarTime={});let n=this.playerInfo.dictGetCarTime[e];return-1!==this.playerInfo.cars.indexOf(e)&&n&&n<t}updateDictGetCarTime(e){this.playerInfo.dictGetCarTime||(this.playerInfo.dictGetCarTime={}),this.playerInfo.dictGetCarTime[e]=this.playerInfo.signInInfo.createDate,i.instance.setConfigData(s.LOCAL_CACHE.PLAYER,JSON.stringify(this.playerInfo))}getLastOnlineRewardTime(){return this.playerInfo.onlineRewardTime||(this.playerInfo.onlineRewardTime=this.getCurrentTime(),this.savePlayerInfoToLocalCache()),this.playerInfo.onlineRewardTime}updateLastOnlineRewardTime(e){let t=this.getCurrentTime()-1e3*e;this.playerInfo.onlineRewardTime=t,this.savePlayerInfoToLocalCache()}syncServerTime(e){this.serverTime=e,this.localTime=Date.now()}getCurrentTime(){let e=Date.now()-this.localTime;return this.serverTime+e}hasCar(e){return e===s.INITIAL_CAR||(this.playerInfo.cars||(this.playerInfo.cars=[s.INITIAL_CAR]),-1!==this.playerInfo.cars.indexOf(e))}hasCarCanReceived(){let e=o.instance.getCars();for(let t=0;t<e.length;t++){let n=e[t];if(n.type!==s.BUY_CAR_TYPE.GOLD&&n.type!==s.BUY_CAR_TYPE.SIGNIN&&(!this.hasCar(n.ID)&&this.playerInfo.dictBuyTask&&this.playerInfo.dictBuyTask.hasOwnProperty(n.type)&&this.playerInfo.dictBuyTask[n.type]>=n.num))return!0}return!1}finishBuyTask(e,t,n){this.playerInfo.dictBuyTask||(this.playerInfo.dictBuyTask={}),this.playerInfo.dictBuyTask.hasOwnProperty(e)&&n?this.playerInfo.dictBuyTask[e]+=t:this.playerInfo.dictBuyTask[e]=t,this.savePlayerInfoToLocalCache()}getBuyTypeProgress(e){return this.playerInfo.dictBuyTask&&this.playerInfo.dictBuyTask.hasOwnProperty(e)?this.playerInfo.dictBuyTask[e]:0}getCurrentCar(){return this.playerInfo.currentCar||(this.playerInfo.currentCar=s.INITIAL_CAR),this.playerInfo.currentCar}useCar(e){return!!this.hasCar(e)&&(this.playerInfo.currentCar=e,this.savePlayerInfoToLocalCache(),this.showCar=this.playerInfo.currentCar,!0)}buyCar(e){return-1!==this.playerInfo.cars.indexOf(e)||(this.playerInfo.cars.push(e),this.savePlayerInfoToLocalCache()),!0}clear(){this.playerInfo={},this.settings={},this.saveAll()}passLevel(e){this.playerInfo.level++,this.playerInfo.gold+=e,console.log("###1 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel),this.playerInfo.passCheckPoint?(this.playerInfo.realLevel=this.getRandLevel(),console.log("###3 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel)):this.playerInfo.level>=s.MAX_LEVEL?(this.playerInfo.realLevel=s.MAX_LEVEL,this.playerInfo.level=s.MAX_LEVEL,this.playerInfo.passCheckPoint=!0,console.log("###2 this.playerInfo.level",this.playerInfo.level,"this.playerInfo.realLevel",this.playerInfo.realLevel)):this.playerInfo.realLevel=this.playerInfo.level,this.savePlayerInfoToLocalCache()}getRandLevel(){let e=-1;for(;-1===e;){let t=16+Math.floor(5*Math.random());t!==this.playerInfo.realLevel&&(e=t)}return e}})._instance=void 0,l=I))||l);t._RF.pop()}}}));

System.register("chunks:///_virtual/polyglot.min.ts",["cc"],(function(n){"use strict";var t;return{setters:[function(n){t=n.cclegacy}],execute:function(){n("polyglot",(function(n){return new g(n)})),t._RF.push({},"26839JcVWpGabE9xA7/uWJw","polyglot.min",void 0);var r=function(n,t,r){if(n=arguments[0],t="function"==typeof arguments[1]?arguments[1]:new Function,Array.isArray(n))n.forEach(((n,r,e)=>{t(n,r)}));else for(const r in n)if(n.hasOwnProperty(r)){const e=n[r];t(e,r)}},e=function(n,t){return n.hasOwnProperty(t)};var i=function(n){!function(n){console.warn(n)}(n)},s=String.prototype.replace,o=String.prototype.split,a="||||",u=function(n){var t=n%100,r=t%10;return 11!==t&&1===r?0:2<=r&&r<=4&&!(t>=12&&t<=14)?1:2},l={pluralTypes:{arabic:function(n){if(n<3)return n;var t=n%100;return t>=3&&t<=10?3:t>=11?4:5},bosnian_serbian:u,chinese:function(){return 0},croatian:u,french:function(n){return n>1?1:0},german:function(n){return 1!==n?1:0},russian:u,lithuanian:function(n){return n%10==1&&n%100!=11?0:n%10>=2&&n%10<=9&&(n%100<11||n%100>19)?1:2},czech:function(n){return 1===n?0:n>=2&&n<=4?1:2},polish:function(n){if(1===n)return 0;var t=n%10;return 2<=t&&t<=4&&(n%100<10||n%100>=20)?1:2},icelandic:function(n){return n%10!=1||n%100==11?1:0},slovenian:function(n){var t=n%100;return 1===t?0:2===t?1:3===t||4===t?2:3}},pluralTypeToLanguages:{arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]}};function c(n,t){var e=function(n){var t={};return r(n,(function(n,e){r(n,(function(n){t[n]=e}),this)}),this),t}(n.pluralTypeToLanguages);return e[t]||e[o.call(t,/-/,1)[0]]||e.en}function h(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var f=/%\{(.*?)\}/g;function p(n,t,r,i,u){if("string"!=typeof n)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==t)return n;var h=n,p=i||f,g=u||l,y="number"==typeof t?{smart_count:t}:t;if(null!=y.smart_count&&h){var v=o.call(h,a);h=(v[function(n,t,r){return n.pluralTypes[c(n,t)](r)}(g,r||"en",y.smart_count)]||v[0]).replace(/^\s+|\s+$/gm,"")}return h=s.call(h,p,(function(n,t){return e(y,t)&&null!=y[t]?y[t]:n}))}class g{static transformPhrase(n,t,r){return p(n,t,r)}constructor(n){this.phrases={},this.pluralRules={},this.currentLocale="",this.onMissingKey=null,this.warn=null,this.tokenRegex=void 0;var t=n||{};this.extend(t.phrases||{}),this.currentLocale=t.locale||"en";var r=t.allowMissing?p:null;this.onMissingKey="function"==typeof t.onMissingKey?t.onMissingKey:r,this.warn=t.warn||i,this.tokenRegex=function(n){var t=n&&n.prefix||"%{",r=n&&n.suffix||"}";if(t===a||r===a)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(h(t)+"(.*?)"+h(r),"g")}(t.interpolation),this.pluralRules=t.pluralRules||l}has(n){return e(this.phrases,n)}t(n,t){var r,e,i=null==t?{}:t;if("string"==typeof this.phrases[n])r=this.phrases[n];else if("string"==typeof i._)r=i._;else if(this.onMissingKey){e=(0,this.onMissingKey)(n,i,this.currentLocale,this.tokenRegex,this.pluralRules)}else this.warn('Missing translation for key: "'+n+'"'),e=n;return"string"==typeof r&&(e=p(r,i,this.currentLocale,this.tokenRegex,this.pluralRules)),e}replace(n){this.clear(),this.extend(n)}clear(){this.phrases={}}locale(n){return n&&(this.currentLocale=n),this.currentLocale}extend(n,t){var e=this;r(n,(function(n,r){var i=t?t+"."+r:r;"object"==typeof n?e.extend(n,i):e.phrases[i]=n}),this)}unset(n,t){"string"==typeof n?delete this.phrases[n]:r(n,(function(n,r){var e=t?t+"."+r:r;"object"==typeof n?this.unset(n,e):delete this.phrases[e]}),this)}}n("Polyglot",g),t._RF.pop()}}}));

System.register("chunks:///_virtual/poolManager.ts",["cc"],(function(t){"use strict";var e,o,i,s;return{setters:[function(t){e=t.cclegacy,o=t._decorator,i=t.instantiate,s=t.NodePool}],execute:function(){var c,n;e._RF.push({},"907776q4iZNubarZf3Ut3A8","poolManager",void 0);const{ccclass:a,property:r}=o;t("poolManager",a("poolManager")(((n=class t{constructor(){this.dictPool={},this.dictPrefab={}}static get instance(){return this._instance||(this._instance=new t),this._instance}getNode(t,e){let o,c=t.data.name;if(this.dictPrefab[c]=t,this.dictPool.hasOwnProperty(c)){let e=this.dictPool[c];o=e.size()>0?e.get():i(t)}else{let e=new s;this.dictPool[c]=e,o=i(t)}return o.parent=e,o}putNode(t){let e=t.name,o=null;this.dictPool.hasOwnProperty(e)?o=this.dictPool[e]:(o=new s,this.dictPool[e]=o),o.put(t)}clearPool(t){if(this.dictPool.hasOwnProperty(t)){this.dictPool[t].clear()}}})._instance=void 0,c=n))||c);e._RF.pop()}}}));

System.register("chunks:///_virtual/resourceUtil.ts",["cc"],(function(e){"use strict";var t,a,s,r,i,o,n,c,l,d,u;return{setters:[function(e){t=e.cclegacy,a=e.resources,s=e.error,r=e.Prefab,i=e.instantiate,o=e.find,n=e.SpriteFrame,c=e.isValid,l=e.assetManager,d=e.Texture2D,u=e._decorator}],execute:function(){var g;t._RF.push({},"aebeeEGJRZGbK315QTzsoll","resourceUtil",void 0);const{ccclass:f}=u;e("resourceUtil",f("resourceUtil")(g=class{static loadRes(e,t,r){t?a.load(e,t,((e,t)=>{if(e)return s(e.message||e),void(r&&r(e,t));r&&r(e,t)})):a.load(e,((e,t)=>{if(e)return s(e.message||e),void(r&&r(e,t));r&&r(e,t)}))}static getMap(e,t){let a="map";a+=e>=100?e:e>=10?"0"+e:"00"+e,this.loadRes(`gamePackage/map/config/${a}`,null,((e,a)=>{if(e)return void t(e,a);const s=a;let r="";if(s._file){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(s._file));const e=JSON.parse(r);t(null,e)}else if(s.text){window.LZString&&(r=window.LZString.decompressFromEncodedURIComponent(s.text));const e=JSON.parse(r);t(null,e)}else if(s.json)t(null,s.json);else{const e=new Error("failed");t(e,null)}}))}static getMapObjs(e,t,s,i){let o=[];for(let a=0;a<t.length;a++)o.push(`gamePackage/map/${e}/${t[a]}`);a.load(o,r,s,i)}static getUIPrefabRes(e,t){this.loadRes("prefab/ui/"+e,r,t)}static createUI(e,t,a){this.getUIPrefabRes(e,((e,s)=>{if(e)return;const r=i(s);r.setPosition(0,0,0),a||(a=o("Canvas")),a.addChild(r),t&&t(null,r)}))}static getCarsBatch(e,t,s){let i=[];for(let t=0;t<e.length;t++)i.push(`prefab/car/car${e[t]}`);for(let e=0;e<i.length;e++){const o=i[e];t?a.load(o,r,t,s):a.load(o,r,s)}}static getUICar(e,t){this.loadRes(`prefab/ui/car/uiCar${e}`,r,t)}static getCar(e,t){this.loadRes(`prefab/car/car${e}`,r,t)}static setCarIcon(e,t,a,s){let r=`gamePackage/texture/car/car${e}`;a&&(r+="Black"),this.setSpriteFrame(r,t,s)}static getJsonData(e,t){a.load("datas/"+e,((e,a)=>{if(e)return void s(e.message||e);const r=a;if(r.json)t(e,r.json);else{const e=new Error("failed!!!");t(e,null)}}))}static getData(e,t){a.load("datas/"+e,(function(e,r){if(e)return void s(e.message||e);let i=r.text;i?t(e,i):a.load(r.nativeUrl,((e,a)=>{i=a,t(e,i)}))}))}static setSpriteFrame(e,t,a){this.loadRes(e+"/spriteFrame",n,((s,r)=>{if(s)return console.error("set sprite frame failed! err:",e,s),void a(s,r);t&&c(t)&&(t.spriteFrame=r,a(null,r))}))}static setRemoteImage(e,t,a){if(!e||!e.startsWith("http"))return;l.loadAny([{url:e,type:"png"}],null,((t,s)=>{if(t)return console.error("set avatar failed! err:",e,t),void a(t,s);let r=new d;r.image=s;let i=new n;i.texture=r,a&&a(null,i)}))}static setGameIcon(e,t,a){e.startsWith("http")?this.setRemoteImage(e,t,a):this.setSpriteFrame("gamePackage/textures/icons/games/"+e,t,a)}static getCustomer(e,t){this.loadRes(`gamePackage/map/customer/customer${e}`,r,t)}static setCustomerIcon(e,t,a){let s=`gamePackage/texture/head/head${e}`;this.setSpriteFrame(s,t,a)}static getEffect(e,t){this.loadRes(`prefab/effect/${e}`,r,t)}})||g);t._RF.pop()}}}));

System.register("chunks:///_virtual/revive.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./clientEvent.ts","./gameLogic.ts","./constant.ts"],(function(t){"use strict";var i,n,e,o,s,r,c,u,l,a,p;return{setters:[function(t){i=t.applyDecoratedDescriptor,n=t.initializerDefineProperty},function(t){e=t.cclegacy,o=t.Sprite,s=t.Widget,r=t._decorator,c=t.Component},function(t){u=t.uiManager},function(t){l=t.clientEvent},function(t){a=t.gameLogic},function(t){p=t.constant}],execute:function(){var h,g,v,f,w,C,D,b,d;e._RF.push({},"95f63L653dBgLBdIgYWzpHv","revive",void 0);const{ccclass:m,property:R}=r;t("revive",(h=m("revive"),g=R(o),v=R(o),f=R(s),h((D=i((C=class extends c{constructor(...t){super(...t),n(this,"spCountDown",D,this),n(this,"spIcon",b,this),n(this,"wgMenu",d,this),this.closeCb=null,this.countDownTime=0,this.currentTime=0,this.isCountDowning=!1}start(){}show(t){this.closeCb=t,this.countDownTime=5,this.currentTime=0,this.spCountDown.fillRange=1,this.isCountDowning=!0,a.updateRewardIcon(p.SHARE_FUNCTION.RELIVE,this.spIcon)}onBtnReviveClick(){this.isCountDowning=!1,a.openReward(p.SHARE_FUNCTION.RELIVE,(t=>{t?this.isCountDowning=!0:(l.dispatchEvent("revive"),u.instance.hideDialog("fight/revive"))}))}onBtnSkipClick(){this.isCountDowning=!1,u.instance.hideDialog("fight/revive"),this.closeCb&&this.closeCb()}}).prototype,"spCountDown",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=i(C.prototype,"spIcon",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=i(C.prototype,"wgMenu",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=C))||w));e._RF.pop()}}}));

System.register("chunks:///_virtual/roadPoint.ts",["./rollupPluginModLoBabelHelpers.js","cc","./fightConstants.ts","./resourceUtil.ts"],(function(e){"use strict";var t,i,r,n,a,s,l,o,u,c,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){r=e.cclegacy,n=e.Enum,a=e.Node,s=e._decorator,l=e.Component,o=e.macro,u=e.Vec3},function(e){c=e.fightConstants},function(e){p=e.resourceUtil}],execute:function(){var h,T,d,_,O,y,P,b,A,E,f,R,N,m,I,D,g,Y,v,C,G;e({ROAD_MOVE_TYPE:void 0,ROAD_POINT_TYPE:void 0}),r._RF.push({},"953fazcJb1LuJlDQlkFCkFG","roadPoint",void 0);const{ccclass:S,property:w}=s;let z,M;!function(e){e[e["普通节点"]=c.ROAD_POINT_TYPE.NORMAL]="普通节点",e[e["开始节点"]=c.ROAD_POINT_TYPE.START]="开始节点",e[e["接客节点"]=c.ROAD_POINT_TYPE.GREETING]="接客节点",e[e["送客节点"]=c.ROAD_POINT_TYPE.PLATFORM]="送客节点",e[e["结束节点"]=c.ROAD_POINT_TYPE.END]="结束节点",e[e["AI开始节点"]=c.ROAD_POINT_TYPE.AI_START]="AI开始节点"}(z||(z=e("ROAD_POINT_TYPE",{}))),n(z),function(e){e[e["直线行走"]=c.ROAD_MOVE_TYPE.LINE]="直线行走",e[e["曲线行走"]=c.ROAD_MOVE_TYPE.BEND]="曲线行走"}(M||(M=e("ROAD_MOVE_TYPE",{}))),n(M);e("roadPoint",(h=S("roadPoint"),T=w({displayName:"类型",type:z,displayOrder:1}),d=w({displayName:"下一站",type:a,displayOrder:2}),_=w({displayName:"行走方式",type:M,displayOrder:3}),O=w({displayName:"顺时针",displayOrder:4,visible:function(){return this.moveType===c.ROAD_MOVE_TYPE.BEND}}),y=w({displayName:"顾客方向",displayOrder:4,visible:function(){return this.type===c.ROAD_POINT_TYPE.GREETING||this.type===c.ROAD_POINT_TYPE.PLATFORM}}),P=w({displayName:"延迟生成/秒",displayOrder:5,visible:function(){return this.type===c.ROAD_POINT_TYPE.AI_START}}),b=w({displayName:"生成频率/秒",displayOrder:5,visible:function(){return this.type===c.ROAD_POINT_TYPE.AI_START}}),A=w({displayName:"车辆行驶速度",displayOrder:5,visible:function(){return this.type===c.ROAD_POINT_TYPE.AI_START}}),E=w({displayName:"产生车辆(,分隔)",displayOrder:5,visible:function(){return this.type===c.ROAD_POINT_TYPE.AI_START}}),h((N=t((R=class extends l{constructor(...e){super(...e),i(this,"type",N,this),i(this,"next",m,this),i(this,"moveType",I,this),i(this,"clockwise",D,this),i(this,"direction",g,this),i(this,"delayTime",Y,this),i(this,"genInterval",v,this),i(this,"carSpeed",C,this),i(this,"cars",G,this),this.arrCars=[],this._generateCb=null}start(){this.arrCars=this.cars.split(",")}startGenerateCar(e){this.type===c.ROAD_POINT_TYPE.AI_START&&(this._generateCb=e,this.stopGenerateCar(),this.scheduleOnce(this.delayStartGen,this.delayTime),p.getCarsBatch(this.arrCars,(()=>{}),(()=>{})))}delayStartGen(){this.scheduleGen(),this.schedule(this.scheduleGen,this.genInterval,o.REPEAT_FOREVER)}scheduleGen(){let e=Math.floor(Math.random()*this.arrCars.length);this._generateCb&&this._generateCb(this,this.arrCars[e])}stopGenerateCar(){this.unschedule(this.delayStartGen),this.unschedule(this.scheduleGen)}}).prototype,"type",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return z.普通节点}}),m=t(R.prototype,"next",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(R.prototype,"moveType",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return M.直线行走}}),D=t(R.prototype,"clockwise",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=t(R.prototype,"direction",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new u}}),Y=t(R.prototype,"delayTime",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(R.prototype,"genInterval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),C=t(R.prototype,"carSpeed",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.05}}),G=t(R.prototype,"cars",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"201"}}),f=R))||f));r._RF.pop()}}}));

System.register("chunks:///_virtual/setting.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localConfig.ts","./audioManager.ts","./configuration.ts","./uiManager.ts","./gameLogic.ts","./LanguageData.ts"],(function(i){"use strict";var t,e,n,s,o,r,c,a,u,l,h,p,g,S;return{setters:[function(i){t=i.applyDecoratedDescriptor,e=i.initializerDefineProperty},function(i){n=i.cclegacy,s=i.Sprite,o=i.SpriteFrame,r=i.Label,c=i._decorator,a=i.Component},function(i){u=i.localConfig},function(i){l=i.audioManager},function(i){h=i.configuration},function(i){p=i.uiManager},function(i){g=i.gameLogic},function(i){S=i.i18n}],execute:function(){var b,f,d,m,w,O,C,V,y,M,F,k,v;n._RF.push({},"501ddLP5JZNPaa02x+rFKAH","setting",void 0);const{ccclass:z,property:D}=c;i("setting",(b=z("setting"),f=D(s),d=D(s),m=D(o),w=D(o),O=D(r),b((y=t((V=class extends a{constructor(...i){super(...i),e(this,"spVibrateSwitch",y,this),e(this,"spSoundSwitch",M,this),e(this,"imgSwitchOpen",F,this),e(this,"imgSwitchClose",k,this),e(this,"lbVersion",v,this),this.isSoundOpen=void 0,this.isVibrateOpen=void 0,this.clickTimes=0}static checkState(){l.instance.getConfiguration(!0)?(l.instance.openMusic(),l.instance.openSound()):(l.instance.closeMusic(),l.instance.closeSound())}start(){}show(){this.clickTimes+=1,this.lbVersion.string=`${S.t("setting.version")} ${u.instance.getVersion()}`,this.isSoundOpen=l.instance.getConfiguration(!0),this.isVibrateOpen=g.isVibrateOpen(),this.refreshSwitchUI()}refreshSwitchUI(){this.isVibrateOpen?this.spVibrateSwitch.spriteFrame=this.imgSwitchOpen:this.spVibrateSwitch.spriteFrame=this.imgSwitchClose,this.isSoundOpen?this.spSoundSwitch.spriteFrame=this.imgSwitchOpen:this.spSoundSwitch.spriteFrame=this.imgSwitchClose}onBtnVibrateClick(){}onBtnSoundClick(){this.isSoundOpen=!this.isSoundOpen,this.isSoundOpen?(l.instance.openMusic(),l.instance.openSound()):(l.instance.closeMusic(),l.instance.closeSound()),h.instance.setGlobalData("music",`${this.isSoundOpen}`),this.refreshSwitchUI()}onBtnCloseClick(){p.instance.hideDialog("main/setting")}}).prototype,"spVibrateSwitch",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(V.prototype,"spSoundSwitch",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(V.prototype,"imgSwitchOpen",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(V.prototype,"imgSwitchClose",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(V.prototype,"lbVersion",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=V))||C));n._RF.pop()}}}));

System.register("chunks:///_virtual/shop.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./clientEvent.ts","./util.ts","./uiManager.ts","./shopPage.ts","./poolManager.ts","./localConfig.ts","./resourceUtil.ts","./constant.ts","./gameLogic.ts","./LanguageData.ts"],(function(e){"use strict";var t,n,r,i,a,s,o,l,c,u,h,p,g,f,C,d,b,I,P,m,y,B,D,G;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){r=e.cclegacy,i=e.Label,a=e.Node,s=e.Prefab,o=e.Sprite,l=e._decorator,c=e.Component,u=e.instantiate,h=e.Vec3,p=e.Button,g=e.Color},function(e){f=e.playerData},function(e){C=e.clientEvent},function(e){d=e.util},function(e){b=e.uiManager},function(e){I=e.shopPage},function(e){P=e.poolManager},function(e){m=e.localConfig},function(e){y=e.resourceUtil},function(e){B=e.constant},function(e){D=e.gameLogic},function(e){G=e.i18n}],execute:function(){var _,E,w,R,S,T,A,Y,U,k,x,L,N,O,v,z,H,M,F,$,V,W,q,j,K,X,J,Q,Z;r._RF.push({},"15effXNtKpGeLctODlTRqhl","shop",void 0);const{ccclass:ee,property:te}=l;e("shop",(_=ee("shop"),E=te(i),w=te(a),R=te(a),S=te(a),T=te(a),A=te(i),Y=te(i),U=te(i),k=te(a),x=te(a),L=te(s),N=te(o),O=te(i),_((H=t((z=class extends c{constructor(...e){super(...e),n(this,"lbGold",H,this),n(this,"nodeGet",M,this),n(this,"nodeGold",F,this),n(this,"nodeBuy",$,this),n(this,"nodeGo",V,this),n(this,"lbDesc",W,this),n(this,"lbPrice",q,this),n(this,"lbGo",j,this),n(this,"nodeCarParent",K,this),n(this,"nodePages",X,this),n(this,"pfPage",J,this),n(this,"spCarBlack",Q,this),n(this,"lbPage",Z,this),this.currentPage=null,this.currentCar=null,this.carDegree=0,this.rotateSpeed=30,this.currentCarInfo=void 0,this.pageIndex=0,this.maxPage=0,this.currentCarID=0}start(){}onEnable(){C.on("updateGold",this.updateGold,this),C.on("onShopItemSelect",this.onShopItemSelect,this),C.on("updateBuyTask",this.updateButtons,this)}onDisable(){C.off("updateGold",this.updateGold,this),C.off("onShopItemSelect",this.onShopItemSelect,this),C.off("updateBuyTask",this.updateButtons,this)}show(){let e=m.instance.getCars();this.maxPage=Math.floor(e.length/9),this.updateGold(),this.showPage()}showPage(){this.currentPage||(this.currentPage=u(this.pfPage),this.currentPage.parent=this.nodePages,this.pageIndex=0,this.refreshPageLabel(),this.currentPage.getComponent(I).setPage(this.pageIndex)),this.currentPage.getComponent(I).show()}updateGold(){let e=f.instance.playerInfo.gold||0;this.lbGold.string=d.formatMoney(e)}onBtnCloseClick(){b.instance.hideDialog("shop/shop")}getCar(){D.buyCar(this.currentCarInfo.ID);let e={rewardType:B.REWARD_TYPE.CAR,amount:1,ID:this.currentCarInfo.ID};b.instance.showDialog("common/showReward",[e,!1,"购买成功",()=>{D.useCar(this.currentCarInfo.ID),this.currentPage.getComponent(I).refreshUse(this.currentCarInfo.ID)},null,"确认"])}onBtnGetClick(){let e=this.currentCarInfo.ID;if(f.instance.hasCar(e))f.instance.useCar(e),C.dispatchEvent("updateCar");else if(this.currentCarInfo.type===B.BUY_CAR_TYPE.GOLD){if(this.currentCarInfo.num>f.instance.playerInfo.gold)return void b.instance.showTips("获取金币",(()=>{}));D.addGold(-this.currentCarInfo.num),this.getCar()}else{if(f.instance.getBuyTypeProgress(this.currentCarInfo.type)>=this.currentCarInfo.num)this.getCar();else switch(this.currentCarInfo.type){case B.BUY_CAR_TYPE.GAME:case B.BUY_CAR_TYPE.LOGIN:case B.BUY_CAR_TYPE.CONTINUOUS_LOGIN:case B.BUY_CAR_TYPE.PASS_LEVEL:this.onBtnCloseClick();break;case B.BUY_CAR_TYPE.SIGNIN:this.onBtnCloseClick(),b.instance.showDialog("signIn/signIn");break;case B.BUY_CAR_TYPE.SHARE:D.openReward(B.SHARE_FUNCTION.SHOP_SHARE,((e,t)=>{}));break;case B.BUY_CAR_TYPE.VIDEO:D.openReward(B.SHARE_FUNCTION.SHOP_VIDEO,((e,t)=>{}))}}}checkBtn(){}onBtnGoldClick(){D.openReward(B.SHARE_FUNCTION.SHOP_VIDEO,(e=>{e||D.showFlyReward(B.REWARD_TYPE.GOLD,(()=>{D.addGold(300),this.updateButtons()}))}))}onShopItemSelect(e,t){let n=this.currentPage.getComponent(I);n.unSelectAll(),t&&n.unUseAll(),this.currentCar&&(P.instance.putNode(this.currentCar),this.currentCar=null),this.currentCarInfo=m.instance.queryByID("car",e.toString()),this.currentCarInfo.type===B.BUY_CAR_TYPE.SHARE&&(this.currentCarInfo.type=B.BUY_CAR_TYPE.GOLD,this.currentCarInfo.num=2e3),f.instance.hasCar(e)?(this.spCarBlack.node.active=!1,y.getUICar(this.currentCarInfo.model,((e,t)=>{e?console.error(e,this.currentCarInfo.model):(this.carDegree=0,this.currentCar=P.instance.getNode(t,this.nodeCarParent))}))):(this.spCarBlack.node.active=!0,y.setCarIcon(this.currentCarInfo.model,this.spCarBlack,!0,(()=>{}))),this.updateButtons()}update(e){this.currentCar&&(this.carDegree-=e*this.rotateSpeed,this.carDegree<=-360&&(this.carDegree+=360),this.currentCar.eulerAngles=new h(0,this.carDegree,0))}updateButtons(){if(f.instance.hasCar(this.currentCarInfo.ID))this.lbDesc.string="",this.nodeGo.active=!0,this.nodeBuy.active=!1,this.lbGo.string="换车",this.nodeGet.getComponent(p).interactable=!0;else if(this.currentCarInfo.type===B.BUY_CAR_TYPE.GOLD)this.lbDesc.string="",this.lbPrice.string=this.currentCarInfo.num,f.instance.playerInfo.gold>=this.currentCarInfo.num?(this.lbPrice.color=g.WHITE,this.nodeGet.getComponent(p).interactable=!0):(this.lbPrice.color=g.RED,this.nodeGet.getComponent(p).interactable=!0),this.nodeGo.active=!1,this.nodeBuy.active=!0;else{this.nodeGet.getComponent(p).interactable=!0,this.nodeGo.active=!0,this.nodeBuy.active=!1;let e=f.instance.getBuyTypeProgress(this.currentCarInfo.type);e<this.currentCarInfo.num?this.lbGo.string="前往商店":this.lbGo.string="获取";let t=G.t(`carTask.${this.currentCarInfo.show}`);this.currentCarInfo.type!==B.BUY_CAR_TYPE.SIGNIN&&(t+=`(${G.t("shop.current")}：${e}/${this.currentCarInfo.num})`),this.lbDesc.string=t}}refreshPageLabel(){this.lbPage.string=`${this.pageIndex+1}/${this.maxPage+1}`}onBtnLeftClick(){const e=this.currentPage.getComponent(I);this.pageIndex>0?this.pageIndex--:this.pageIndex=this.maxPage,this.refreshPageLabel(),e.setPage(this.pageIndex),e.show()}onBtnRightClick(){const e=this.currentPage.getComponent(I);this.pageIndex>=this.maxPage?this.pageIndex=0:this.pageIndex++,this.refreshPageLabel(),e.setPage(this.pageIndex),e.show()}}).prototype,"lbGold",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(z.prototype,"nodeGet",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(z.prototype,"nodeGold",[R],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),$=t(z.prototype,"nodeBuy",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(z.prototype,"nodeGo",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(z.prototype,"lbDesc",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(z.prototype,"lbPrice",[Y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(z.prototype,"lbGo",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(z.prototype,"nodeCarParent",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(z.prototype,"nodePages",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),J=t(z.prototype,"pfPage",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(z.prototype,"spCarBlack",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Z=t(z.prototype,"lbPage",[O],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=z))||v));r._RF.pop()}}}));

System.register("chunks:///_virtual/shopItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./resourceUtil.ts","./poolManager.ts","./clientEvent.ts","./playerData.ts"],(function(e){"use strict";var t,n,s,i,r,o,a,c,u,h,l;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.initializerDefineProperty},function(e){s=e.cclegacy,i=e.Node,r=e.Sprite,o=e._decorator,a=e.Component},function(e){c=e.resourceUtil},function(e){u=e.poolManager},function(e){h=e.clientEvent},function(e){l=e.playerData}],execute:function(){var p,d,f,I,C,y,b,D,m,v,g;s._RF.push({},"2b1f3615PZNnqYSDTVo5tI8","shopItem",void 0);const{ccclass:S,property:k}=o;e("shopItem",(p=S("shopItem"),d=k(i),f=k(i),I=k(i),C=k(r),p((D=t((b=class extends a{constructor(...e){super(...e),n(this,"nodeSelect",D,this),n(this,"nodeUsed",m,this),n(this,"nodeRedDot",v,this),n(this,"spCarIcon",g,this),this.currentCar=null,this.carInfo={ID:0,type:0,num:0,model:""}}start(){}onEnable(){h.on("buyCar",this.refreshCarIcon,this),h.on("updateBuyTask",this.updateBuyTask,this)}onDisable(){h.off("buyCar",this.refreshCarIcon,this),h.off("updateBuyTask",this.updateBuyTask,this)}refreshCarIcon(){this.carInfo&&(c.setCarIcon(this.carInfo.model,this.spCarIcon,!l.instance.hasCar(this.carInfo.ID),(()=>{})),this.updateBuyTask())}updateBuyTask(){if(l.instance.hasCar(this.carInfo.ID))this.nodeRedDot.active=!1;else{let e=l.instance.getBuyTypeProgress(this.carInfo.type);this.nodeRedDot.active=e>=this.carInfo.num}}show(e){this.carInfo=e,this.select=!1,this.nodeUsed.active=!1,this.currentCar&&(u.instance.putNode(this.currentCar),this.currentCar=null),e?(this.spCarIcon.node.active=!0,this.refreshCarIcon(),this.carInfo.ID===l.instance.getCurrentCar()&&this.scheduleOnce((()=>{this.onItemClick(!1)}),0)):this.spCarIcon.node.active=!1}set select(e){this.nodeSelect.active=e}get select(){return this.nodeSelect.active}set used(e){this.nodeUsed.active=e}get used(){return this.nodeUsed.active}onItemClick(e=!0){if(!this.carInfo)return;let t=l.instance.hasCar(this.carInfo.ID);h.dispatchEvent("onShopItemSelect",this.carInfo.ID,t),this.select=!0,t&&(this.used=!0)}updateUseState(){this.used=this.carInfo.ID===l.instance.getCurrentCar()}}).prototype,"nodeSelect",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(b.prototype,"nodeUsed",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=t(b.prototype,"nodeRedDot",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=t(b.prototype,"spCarIcon",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/shopPage.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localConfig.ts","./shopItem.ts"],(function(e){"use strict";var t,o,n,s,i,r,c,l,a;return{setters:[function(e){t=e.applyDecoratedDescriptor,o=e.initializerDefineProperty},function(e){n=e.cclegacy,s=e.Prefab,i=e._decorator,r=e.Component,c=e.instantiate},function(e){l=e.localConfig},function(e){a=e.shopItem}],execute:function(){var h,p,u,f,g;n._RF.push({},"35980PVGZdO6o5scEE8kciy","shopPage",void 0);const{ccclass:d,property:m}=i;e("shopPage",(h=d("shopPage"),p=m(s),h((g=t((f=class extends r{constructor(...e){super(...e),o(this,"pfShopItem",g,this),this.page=0}start(){}setPage(e){this.page=e}show(){let e=l.instance.getCars(),t=9*this.page,o=9*(this.page+1),n=0;for(let s=t;s<o;s++,n++){let t=null;n<this.node.children.length?t=this.node.children[n]:(t=c(this.pfShopItem),t.parent=this.node),t.getComponent(a).show(e[s])}}unSelectAll(){this.node.children.forEach((e=>{e.getComponent(a).select=!1}))}unUseAll(){this.node.children.forEach((e=>{e.getComponent(a).used=!1}))}refreshUse(e){this.node.children.forEach((t=>{let o=t.getComponent(a);o.carInfo.ID===e&&o.onItemClick()}))}}).prototype,"pfShopItem",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),u=f))||u));n._RF.pop()}}}));

System.register("chunks:///_virtual/showReward.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./resourceUtil.ts","./playerData.ts","./constant.ts","./localConfig.ts","./gameLogic.ts","./clientEvent.ts","./poolManager.ts","./LanguageData.ts"],(function(e){"use strict";var t,i,n,r,a,s,l,o,c,u,h,d,p,b,w,m,f,g,R,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.SpriteFrame,a=e.Sprite,s=e.Label,l=e.Node,o=e.Animation,c=e._decorator,u=e.Component,h=e.Vec3},function(e){d=e.uiManager},function(e){p=e.resourceUtil},function(e){b=e.playerData},function(e){w=e.constant},function(e){m=e.localConfig},function(e){f=e.gameLogic},function(e){g=e.clientEvent},function(e){R=e.poolManager},function(e){y=e.i18n}],execute:function(){var D,I,T,C,E,v,B,P,A,N,_,k,z,S,L,G,W,Y,F,M,O,H,U,V,q;n._RF.push({},"880e1kClIdKPqdXdgTIpdv2","showReward",void 0);const{ccclass:x,property:j}=c;e("showReward",(D=x("showReward"),I=j(r),T=j(a),C=j(s),E=j(s),v=j(s),B=j(s),P=j(l),A=j(l),N=j(l),_=j(l),k=j(o),D((L=t((S=class extends u{constructor(...e){super(...e),i(this,"sfGold",L,this),i(this,"spIcon",G,this),i(this,"lbRewardValue",W,this),i(this,"lbTips",Y,this),i(this,"lbTitle",F,this),i(this,"lbImmediateBtn",M,this),i(this,"ndCarParent",O,this),i(this,"ndBtnDouble",H,this),i(this,"ndBtnNormal",U,this),i(this,"ndBtnImmediately",V,this),i(this,"aniReward",q,this),this.isDouble=!1,this.callback=null,this.isLast=!1,this.rewardType=0,this.amount=0,this.itemInfo=void 0,this._isHadCar=!1,this.currentCar=null,this.carDegree=0,this.rotateSpeed=30}start(){}show(e,t,i,n,r,a){this.itemInfo=e,this.rewardType=e.rewardType,this.amount=e.amount,this.ndBtnDouble.active=t,this.ndBtnNormal.active=t,this.ndBtnImmediately.active=!t,this.lbTitle.string=i,this.lbRewardValue.string=e.rewardType===w.REWARD_TYPE.CAR?"":String(this.amount),this.callback=n,r?(this.lbTips.node.active=!0,this.lbTips.string=r):this.lbTips.node.active=!1,this.showRewardPage(),this.aniReward.play("rewardShow"),this.aniReward.once(o.EventType.FINISHED,(()=>{this.aniReward.play("rewardIdle")}),this),this.lbImmediateBtn.string=a||y.t("balance.receiveImmediately")}showRewardPage(){switch(this.currentCar&&(R.instance.putNode(this.currentCar),this.currentCar=null),this.rewardType){case w.REWARD_TYPE.DIAMOND:break;case w.REWARD_TYPE.GOLD:this.spIcon.spriteFrame=this.sfGold,this.spIcon.node.active=!0;break;case w.REWARD_TYPE.CAR:this.spIcon.node.active=!1;let e=m.instance.queryByID("car",this.itemInfo.ID).model;p.getUICar(e,((e,t)=>{e?console.error(e):(this.currentCar=R.instance.getNode(t,this.ndCarParent),this.carDegree=0)}))}}onBtnNormalClick(){this.addReward()}onBtnDoubleClick(){f.openReward(w.SHARE_FUNCTION.SIGNIN,(e=>{e||(this.amount*=2,this.addReward())}))}onBtnImmediatelyClick(){this.addReward()}addReward(){switch(this.rewardType){case w.REWARD_TYPE.DIAMOND:break;case w.REWARD_TYPE.GOLD:b.instance.updatePlayerInfo("gold",this.amount),f.showFlyReward(w.REWARD_TYPE.GOLD,(()=>{g.dispatchEvent("updateGold")}));break;case w.REWARD_TYPE.CAR:f.buyCar(this.itemInfo.ID)}d.instance.hideDialog("common/showReward"),this.callback&&this.callback()}update(e){this.currentCar&&(this.carDegree-=e*this.rotateSpeed,this.carDegree<=-360&&(this.carDegree+=360),this.currentCar.eulerAngles=new h(0,this.carDegree,0))}}).prototype,"sfGold",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=t(S.prototype,"spIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(S.prototype,"lbRewardValue",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(S.prototype,"lbTips",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(S.prototype,"lbTitle",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(S.prototype,"lbImmediateBtn",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(S.prototype,"ndCarParent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(S.prototype,"ndBtnDouble",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(S.prototype,"ndBtnNormal",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(S.prototype,"ndBtnImmediately",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(S.prototype,"aniReward",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=S))||z));n._RF.pop()}}}));

System.register("chunks:///_virtual/signIn.ts",["./rollupPluginModLoBabelHelpers.js","cc","./localConfig.ts","./playerData.ts","./constant.ts","./uiManager.ts","./signInItem.ts","./gameLogic.ts","./util.ts","./clientEvent.ts","./LanguageData.ts"],(function(e){"use strict";var t,i,n,r,a,s,o,l,c,u,h,d,I,p,R,f,g,D,y,S;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.initializerDefineProperty},function(e){n=e.cclegacy,r=e.Node,a=e.Sprite,s=e.SpriteFrame,o=e.Prefab,l=e._decorator,c=e.Component,u=e.Button,h=e.instantiate},function(e){d=e.localConfig},function(e){I=e.playerData},function(e){p=e.constant},function(e){R=e.uiManager},function(e){f=e.signInItem},function(e){g=e.gameLogic},function(e){D=e.util},function(e){y=e.clientEvent},function(e){S=e.i18n}],execute:function(){var m,b,v,B,E,T,N,w,A,C,_,G,L,F,P,W,z,k,U,V,O,q,H,Y,x;n._RF.push({},"9d016bBiB5J1prtR6VcBPd4","signIn",void 0);const{ccclass:M,property:j}=l;e("signIn",(m=M("signIn"),b=j(r),v=j(r),B=j(r),E=j(r),T=j(a),N=j(s),w=j(s),A=j(s),C=j(s),_=j(r),G=j(o),m((P=t((F=class extends c{constructor(...e){super(...e),i(this,"ndBtnNormal",P,this),i(this,"ndBtnDouble",W,this),i(this,"ndBtnReceive",z,this),i(this,"ndBtnClose",k,this),i(this,"spDoubleBtnIcon",U,this),i(this,"sfBlue",V,this),i(this,"sfGray",O,this),i(this,"sfVideo",q,this),i(this,"sfShare",H,this),i(this,"arrNodeDay",Y,this),i(this,"pbSignInItem",x,this),this.currentDay=0,this.arrReceived=[],this.arrAfterFillSignIn=[],this.isTodayReceived=!1,this.isAllReceived=!1,this.arrSignInItemScript=[],this.currentReward=void 0,this.currentRewardType=void 0,this.isHadCar=void 0,this.createDate=void 0,this.getCarDate=void 0}start(){}show(){I.instance.updateSignInCurrentDay();let e=I.instance.playerInfo.signInInfo;this.currentDay=e.currentDay,this.arrReceived=e.receivedDays,this.arrAfterFillSignIn=e.afterFillSignInDays,g.updateRewardIcon(p.SHARE_FUNCTION.SIGNIN,this.spDoubleBtnIcon),this.showSignInInfo(),this.setButtonStyle()}setButtonStyle(){let e=I.instance.getSignInReceivedInfo();this.isTodayReceived=e.isTodayReceived,this.isAllReceived=e.isAllReceived,this.ndBtnDouble.getComponent(a).spriteFrame=this.isTodayReceived?this.sfGray:this.sfBlue,this.ndBtnDouble.getComponent(u).interactable=!this.isTodayReceived,this.ndBtnReceive.getComponent(a).spriteFrame=this.isTodayReceived?this.sfGray:this.sfBlue,this.ndBtnReceive.getComponent(u).interactable=!this.isTodayReceived;let t=d.instance.getTableArr("signIn");this.currentReward=t[this.currentDay-1],this.currentRewardType=this.currentReward.rewardType,this.currentRewardType===p.REWARD_TYPE.CAR?I.instance.isHadCarAndDuringPeriod(this.currentReward.amount)?(this.ndBtnDouble.active=!0,this.ndBtnReceive.active=!1,this.ndBtnNormal.active=!this.isTodayReceived):(this.ndBtnDouble.active=!1,this.ndBtnReceive.active=!0,this.ndBtnNormal.active=!1):(this.ndBtnDouble.active=!0,this.ndBtnReceive.active=!1,this.ndBtnNormal.active=!this.isTodayReceived)}showSignInInfo(){this.arrSignInItemScript=[];let e=d.instance.getTableArr("signIn");for(let t=0;t<e.length;t++){let i=e[t].ID,n=!!this.arrReceived.includes(i);i<=this.currentDay?(e[t].status=n?p.SIGNIN_REWARD_STATUS.RECEIVED:p.SIGNIN_REWARD_STATUS.RECEIVABLE,e[t].status===p.SIGNIN_REWARD_STATUS.RECEIVABLE&&i<this.currentDay&&(e[t].status=p.SIGNIN_REWARD_STATUS.FILL_SIGNIN,this.arrAfterFillSignIn.includes(i)&&(e[t].status=p.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN))):e[t].status=p.SIGNIN_REWARD_STATUS.UNRECEIVABLE;let r=this.arrNodeDay[t],a=null;r.getChildByName("signInItem")?a=r.getChildByName("signInItem"):(a=h(this.pbSignInItem),r.addChild(a));let s=a.getComponent(f);s.init(e[t],this),this.arrSignInItemScript.includes(s)||this.arrSignInItemScript.push(s)}}receiveReward(e,t,i){let n=e.ID;if(this.currentDay<n)return;let r=S.t("showReward.signinReward"),a=D.clone(e);if(2==e.ID||7==e.ID){let t=d.instance.queryByID("car",e.amount);a.ID=t.ID,-1!==I.instance.playerInfo.cars.indexOf(t.ID)&&(a.rewardType=p.REWARD_TYPE.GOLD,a.amount=2==e.ID?p.GOLD_REWARD.SECOND:p.GOLD_REWARD.SEVENT)}if(a.amount=t?a.amount*=2:a.amount,R.instance.shiftFromPopupSeq("signIn/signIn"),a.rewardType===p.REWARD_TYPE.GOLD)return I.instance.updatePlayerInfo("gold",a.amount),g.showFlyReward(p.REWARD_TYPE.GOLD,(()=>{y.dispatchEvent("updateGold")})),void(i&&i());R.instance.pushToPopupSeq("common/showReward","showReward",[a,!1,r,i])}receiveClick(e){for(let t=0;t<this.arrSignInItemScript.length;t++){let i=this.arrSignInItemScript[t];if(i.itemInfo.status===p.SIGNIN_REWARD_STATUS.RECEIVABLE){i._parent.receiveReward(i.itemInfo,e,(()=>{i.markReceived()}));break}}}onBtnDoubleClick(){this.receiveClick(!0)}onBtnNormalClick(){this.receiveClick(!1)}onBtnReceiveClick(){this.receiveClick(!1)}onBtnCloseClick(){R.instance.shiftFromPopupSeq("signIn/signIn")}}).prototype,"ndBtnNormal",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=t(F.prototype,"ndBtnDouble",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(F.prototype,"ndBtnReceive",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(F.prototype,"ndBtnClose",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(F.prototype,"spDoubleBtnIcon",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=t(F.prototype,"sfBlue",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"sfGray",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(F.prototype,"sfVideo",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(F.prototype,"sfShare",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(F.prototype,"arrNodeDay",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),x=t(F.prototype,"pbSignInItem",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=F))||L));n._RF.pop()}}}));

System.register("chunks:///_virtual/signInItem.ts",["./rollupPluginModLoBabelHelpers.js","cc","./playerData.ts","./constant.ts","./gameLogic.ts","./localConfig.ts","./clientEvent.ts","./uiManager.ts","./resourceUtil.ts"],(function(t){"use strict";var e,i,n,s,r,a,o,l,u,I,c,h,f,m,p,S,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){n=t.cclegacy,s=t.SpriteFrame,r=t.Sprite,a=t.Node,o=t.Label,l=t._decorator,u=t.Component,I=t.Animation},function(t){c=t.playerData},function(t){h=t.constant},function(t){f=t.gameLogic},function(t){m=t.localConfig},function(t){p=t.clientEvent},function(t){S=t.uiManager},function(t){g=t.resourceUtil}],execute:function(){var R,d,b,D,A,E,_,N,w,T,F,y,L,G,C,B,U,v,k,W,z,V,P;n._RF.push({},"8a6efh8jF9Js7ZZXyAL57KG","signInItem",void 0);const{ccclass:Y,property:O}=l;t("signInItem",(R=Y("signInItem"),d=O(s),b=O(s),D=O(r),A=O(s),E=O(a),_=O(a),N=O(a),w=O(o),T=O(a),F=O(o),R((G=e((L=class extends u{constructor(...t){super(...t),i(this,"sfBgBlue",G,this),i(this,"sfYellow",C,this),i(this,"spReward",B,this),i(this,"sfGold",U,this),i(this,"nodeTick",v,this),i(this,"nodeBtnFillSign",k,this),i(this,"nodeBtnAfterFillSign",W,this),i(this,"lbDayIndex",z,this),i(this,"nodeLight",V,this),i(this,"lbValue",P,this),this._parent=null,this.itemInfo=null,this.isHadCar=null}start(){}init(t,e){this._parent=e,this.itemInfo=t,this.lbValue.string=t.rewardType===h.REWARD_TYPE.CAR?"":String(t.amount),this.lbDayIndex.string=String(t.ID),this.setIcon(t.rewardType),this.setStatus(t.status),this.node.getComponent(r).spriteFrame=Number(t.ID)>=7?this.sfBgBlue:this.sfYellow}setIcon(t){switch(t){case h.REWARD_TYPE.DIAMOND:break;case h.REWARD_TYPE.GOLD:this.spReward.spriteFrame=this.sfGold;break;case h.REWARD_TYPE.CAR:let t=m.instance.queryByID("car",this.itemInfo.amount).model;c.instance.isHadCarAndDuringPeriod(this.itemInfo.amount)?(this.spReward.spriteFrame=this.sfGold,2==this.itemInfo.ID?this.lbValue.string=String(h.GOLD_REWARD.SECOND):7==this.itemInfo.ID&&(this.lbValue.string=String(h.GOLD_REWARD.SEVENT))):g.setCarIcon(t,this.spReward,!1,(()=>{}))}}setStatus(t){switch(t){case h.SIGNIN_REWARD_STATUS.RECEIVED:this.showItemUI(!1,!0,!1,!1);break;case h.SIGNIN_REWARD_STATUS.RECEIVABLE:this.showItemUI(!0,!1,!1,!1);break;case h.SIGNIN_REWARD_STATUS.UNRECEIVABLE:this.showItemUI(!1,!1,!1,!1);break;case h.SIGNIN_REWARD_STATUS.FILL_SIGNIN:this.showItemUI(!1,!1,!0,!1);break;case h.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN:this.showItemUI(!0,!1,!1,!0)}}showItemUI(t,e,i,n){this.nodeLight.active=t;let s=this.nodeLight.getComponent(I);t?s.play():s.stop(),this.nodeTick.active=e,this.nodeBtnFillSign.active=i,this.nodeBtnAfterFillSign.active=n}onBtnAfterFillSignClick(){this.itemInfo.status!==h.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN&&this.itemInfo.status!==h.SIGNIN_REWARD_STATUS.RECEIVABLE||this._parent.receiveReward(this.itemInfo,!1,this.markReceived.bind(this))}markReceived(){this.itemInfo.status=h.SIGNIN_REWARD_STATUS.RECEIVED,this.setStatus(this.itemInfo.status),2!==this.itemInfo.ID&&7!==this.itemInfo.ID||this.isHadCar||c.instance.updateDictGetCarTime(this.itemInfo.amount),this.itemInfo.ID&&(c.instance.updateSignInReceivedDays(this.itemInfo.ID),p.dispatchEvent("updateSignIn")),this.close()}close(){S.instance.shiftFromPopupSeq("common/showReward"),c.instance.getSignInReceivedInfo().isAllReceived?S.instance.shiftFromPopupSeq("common/showReward"):S.instance.pushToPopupSeq("signIn/signIn","signIn",{})}markAfterFillSignIn(){this.itemInfo.status=h.SIGNIN_REWARD_STATUS.AFTER_FILL_SIGNIN,this.setStatus(this.itemInfo.status),c.instance.updateSignInFillSignInDays(this.itemInfo.ID,!1)}onBtnFillSignInClick(){f.openReward(h.SHARE_FUNCTION.FILL_SIGNIN,(t=>{t||this.markAfterFillSignIn()}))}}).prototype,"sfBgBlue",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=e(L.prototype,"sfYellow",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=e(L.prototype,"spReward",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=e(L.prototype,"sfGold",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(L.prototype,"nodeTick",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(L.prototype,"nodeBtnFillSign",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),W=e(L.prototype,"nodeBtnAfterFillSign",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(L.prototype,"lbDayIndex",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V=e(L.prototype,"nodeLight",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(L.prototype,"lbValue",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=L))||y));n._RF.pop()}}}));

System.register("chunks:///_virtual/SpriteFrameSet.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){"use strict";var t,r,i,a,n;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.initializerDefineProperty},function(e){i=e.cclegacy,a=e.SpriteFrame,n=e._decorator}],execute:function(){var c,o,s,u,l,p;i._RF.push({},"93cd23dxExEBLbD/xbMp1PN","SpriteFrameSet",void 0);const{ccclass:m,property:f}=n;e("default",(c=m("SpriteFrameSet"),o=f({type:a}),c((l=t((u=class{constructor(){this.name="SpriteFrameSet",r(this,"language",l,this),r(this,"spriteFrame",p,this)}}).prototype,"language",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),p=t(u.prototype,"spriteFrame",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=u))||s));i._RF.pop()}}}));

System.register("chunks:///_virtual/tips.ts",["./rollupPluginModLoBabelHelpers.js","cc","./poolManager.ts"],(function(t){"use strict";var e,i,s,n,o,r,c,a,l,p,u;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.initializerDefineProperty},function(t){s=t.cclegacy,n=t.Label,o=t._decorator,r=t.Component,c=t.Vec3,a=t.UITransform,l=t.isValid,p=t.tween},function(t){u=t.poolManager}],execute:function(){var h,d,g,f,b;s._RF.push({},"60f49uw4/dA4rGh/C738U1T","tips",void 0);const{ccclass:w,property:y}=o;t("tips",(h=w("tips"),d=y(n),h((b=e((f=class extends r{constructor(...t){super(...t),i(this,"lbTips",b,this),this.targetPos=void 0}start(){}show(t,e){this.targetPos=new c(0,200,0),this.node.setPosition(this.targetPos),this.lbTips.string=t;let i=this.lbTips.node.getComponent(a).contentSize;if(!l(i))return void u.instance.putNode(this.node);this.node.getComponent(a).setContentSize(i.width+100<240?240:i.width+100,i.height+30),this.scheduleOnce((()=>{p(this.targetPos).by(.8,new c(0,150,0)).call((()=>{e&&e(),u.instance.putNode(this.node)})).start()}),.8)}}).prototype,"lbTips",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=f))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/trial.ts",["./rollupPluginModLoBabelHelpers.js","cc","./uiManager.ts","./gameLogic.ts","./constant.ts","./localConfig.ts","./playerData.ts","./poolManager.ts","./resourceUtil.ts","./clientEvent.ts"],(function(t){"use strict";var e,r,n,i,a,c,o,s,l,u,h,p,g,d,C,f,b;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.initializerDefineProperty},function(t){n=t.cclegacy,i=t.Node,a=t.Widget,c=t.Sprite,o=t._decorator,s=t.Component,l=t.Vec3},function(t){u=t.uiManager},function(t){h=t.gameLogic},function(t){p=t.constant},function(t){g=t.localConfig},function(t){d=t.playerData},function(t){C=t.poolManager},function(t){f=t.resourceUtil},function(t){b=t.clientEvent}],execute:function(){var I,D,m,y,_,k,w,v,M;n._RF.push({},"5bf756By5JOmoKbG0aoUzq6","trial",void 0);const{ccclass:R,property:B}=o;t("trial",(I=R("trial"),D=B(i),m=B(a),y=B(c),I((w=e((k=class extends s{constructor(...t){super(...t),r(this,"nodeCarParent",w,this),r(this,"wgMenu",v,this),this.currentCar=null,this.carDegree=0,this.rotateSpeed=30,this.carId=0,r(this,"spIcon",M,this),this._callback=void 0}start(){}show(t){if(this._callback)return;this._callback=t,h.updateRewardIcon(p.SHARE_FUNCTION.TRIAL,this.spIcon),this.currentCar&&(C.instance.putNode(this.currentCar),this.currentCar=null);let e=g.instance.getCars(),r=[];if(e.forEach((t=>{d.instance.hasCar(t.ID)||r.push(t.ID)})),r.length<=0)return void this.onBtnCloseClick();let n=Math.floor(Math.random()*r.length);this.carId=r[n];let i=g.instance.queryByID("car",this.carId.toString());console.log("trial show car: "+i.model),f.getUICar(i.model,((t,e)=>{t?console.error(t,i.model):(this.carDegree=0,this.currentCar=C.instance.getNode(e,this.nodeCarParent))}))}onBtnCloseClick(){u.instance.hideDialog("main/trial"),this._callback&&this._callback(),this._callback=void 0}onBtnTrialClick(){h.openReward(p.SHARE_FUNCTION.TRIAL,((t,e)=>{t||(d.instance.showCar=this.carId,b.dispatchEvent("updateCar"),this.onBtnCloseClick())}))}update(t){this.currentCar&&(this.carDegree-=t*this.rotateSpeed,this.carDegree<=-360&&(this.carDegree+=360),this.currentCar.eulerAngles=new l(0,this.carDegree,0))}}).prototype,"nodeCarParent",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=e(k.prototype,"wgMenu",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=e(k.prototype,"spIcon",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=k))||_));n._RF.pop()}}}));

System.register("chunks:///_virtual/uiManager.ts",["cc","./resourceUtil.ts","./poolManager.ts","./tips.ts"],(function(i){"use strict";var t,s,e,o,a,n,h;return{setters:[function(i){t=i.cclegacy,s=i._decorator,e=i.isValid,o=i.find},function(i){a=i.resourceUtil},function(i){n=i.poolManager},function(i){h=i.tips}],execute:function(){var r,p;t._RF.push({},"ae98dhzQlZL2p1SbDgvNdoJ","uiManager",void 0);const{ccclass:c,property:l}=s;i("uiManager",c("uiManager")(((p=class i{constructor(){this.dictSharedPanel={},this.dictLoading={},this.arrPopupDialog=[],this.showTipsTime=0}static get instance(){return this._instance||(this._instance=new i),this._instance}showDialog(i,t,s){if(this.dictLoading[i])return;let n=i.lastIndexOf("/"),h=i.slice(n+1);if(t||(t=[]),this.dictSharedPanel.hasOwnProperty(i)){let a=this.dictSharedPanel[i];if(e(a)){a.parent=o("Canvas"),a.active=!0;let i=a.getComponent(h);return i.show&&i.show.apply(i,t),void(s&&s(i))}}this.dictLoading[i]=!0,a.createUI(i,((e,o)=>{let a=!1;if(this.dictLoading[i]||(a=!0),this.dictLoading[i]=!1,e)return void console.error(e);this.dictSharedPanel[i]=o;let n=o.getComponent(h);n.show&&n.show.apply(n,t),s&&s(n),a&&this.hideDialog(i)}))}hideDialog(i,t){if(this.dictSharedPanel.hasOwnProperty(i)){let s=this.dictSharedPanel[i];s&&e(s)?(s.parent=null,t&&"function"==typeof t&&t()):t&&"function"==typeof t&&t()}this.dictLoading[i]=!1}pushToPopupSeq(i,t,s){let e={panelPath:i,scriptName:t,param:s,isShow:!1};this.arrPopupDialog.push(e),this.checkPopupSeq()}insertToPopupSeq(i,t,s){let e={panelPath:t,param:s,isShow:!1};this.arrPopupDialog.splice(i,0,e)}shiftFromPopupSeq(i){this.hideDialog(i,(()=>{this.arrPopupDialog[0]&&this.arrPopupDialog[0].panelPath===i&&(this.arrPopupDialog.shift(),this.checkPopupSeq())}))}checkPopupSeq(){if(this.arrPopupDialog.length>0){let i=this.arrPopupDialog[0];i.isShow||(this.showDialog(i.panelPath,i.param),this.arrPopupDialog[0].isShow=!0)}}showTips(i,t){var s=Date.now();if(s-this.showTipsTime<800){var e=800-(s-this.showTipsTime);const o=this;setTimeout(function(i,t){o._showTipsAni(i,t)}.bind(this,i,t),e),this.showTipsTime=s+e}else this._showTipsAni(i,t),this.showTipsTime=s}_showTipsAni(i,t){a.getUIPrefabRes("common/tips",((s,e)=>{if(s)return;n.instance.getNode(e,o("Canvas")).getComponent(h).show(i,t)}))}})._instance=void 0,r=p))||r);t._RF.pop()}}}));

System.register("chunks:///_virtual/updateValueLabel.ts",["cc"],(function(t){"use strict";var i,s,a,e;return{setters:[function(t){i=t.cclegacy,s=t.Label,a=t.Component,e=t._decorator}],execute:function(){var l;i._RF.push({},"4b7cfRS5bdP8qo8rorNgln5","updateValueLabel",void 0);const{ccclass:r,property:n,requireComponent:h}=e;t("updateValueLabel",r("updateValueLabel")(l=h(s)(l=class extends a{constructor(...t){super(...t),this.isPlaying=!1,this.startVal=0,this.endVal=0,this.diffVal=0,this.currTime=0,this.changingTime=0,this.label=null}start(){}playUpdateValue(t,i,a){this.startVal=t,this.endVal=i,this.diffVal=this.endVal-this.startVal,this.currTime=0,this.changingTime=a,this.label=this.node.getComponent(s),this.label.string=t.toString(),this.isPlaying=!0}update(t){if(this.isPlaying){if(this.currTime<this.changingTime){this.currTime+=t;var i=this.startVal+parseInt((this.currTime/this.changingTime*this.diffVal).toString());return i<this.startVal?i=this.startVal:i>this.endVal&&(i=this.endVal),void(this.label.string=`${i}`)}this.label.string=`${this.endVal}`,this.isPlaying=!1}}})||l)||l);i._RF.pop()}}}));

System.register("chunks:///_virtual/util.ts",["cc"],(function(t){"use strict";var e,r;return{setters:[function(t){e=t.cclegacy,r=t._decorator}],execute:function(){var n;e._RF.push({},"f1bcdp9t1BPdo0rL87xRyba","util",void 0);const{ccclass:o,property:a}=r;t("util",o("util")(n=class{static clone(t){if(null===t||"object"!=typeof t)return t;let e={};t.constructor===Array&&(e=[]);for(const r in t)t.hasOwnProperty(r)&&(e[r]=this.clone(t[r]));return e}static objectToArray(t){const e=[];for(let r in t)t.hasOwnProperty(r)&&e.push(t[r]);return e}static arrayToObject(t,e){const r={};for(let n in t)t.hasOwnProperty(n)&&t[n][e]&&(r[t[n][e]]=t[n]);return r}static getWeightRandIndex(t,e){const r=Math.floor(Math.random()*e);let n=0,o=0;for(;o<t.length&&(n+=t[o],!(r<n));o++);return o}static getRandomNFromM(t,e){const r=[];let n=0,o=0;for(;o<e&&!(o>=t+1);){n=this.getRandomInt(0,t);let e=0;for(let t=0;t<o;t++)if(r[t]===n){e=1;break}0===e&&(r[o]=n,o++)}return r}static getRandomInt(t,e){const r=Math.random()*(e-t+1)+t;return Math.floor(r)}static getStringLength(t){const e=t;let r=0;for(let t=0,n=e.length;t<n;t++){r+=e.charCodeAt(t)<=255?1:2}return Math.ceil(r/2)}static isEmptyObject(t){let e=!0;if(t&&t.constructor===Object){for(const r in t)if(t.hasOwnProperty(r)){e=!1;break}}else e=!1;return e}static formatNum(t){if(t<=0)return"0";const e=Math.round(Math.log(t)/Math.log(1e3));return parseInt((t/Math.pow(1e3,e-1<0?0:e-1)).toString(),10)+["","","K","M","B"][e]}static isNewDay(t){const e=new Date(t),r=new Date,n=e.getFullYear(),o=e.getMonth(),a=e.getDate(),s=r.getFullYear(),c=r.getMonth(),i=r.getDate();return s>n||(c>o||i>a)}static getPropertyCount(t){let e,r=0;for(e in t)t.hasOwnProperty(e)&&r++;return r}static difference(t,e){const r=[];if(t.constructor!==Array||e.constructor!==Array)return r;const n=t.length;for(let o=0;o<n;o++)-1===e.indexOf(t[o])&&r.push(t[o]);return r}static simulationUUID(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}static trim(t){return t.replace(/(^\s*)|(\s*$)/g,"")}static isNowValid(t,e){const r=new Date(t),n=new Date(e);let o=!1;if(r.getDate()+""!="NaN"&&n.getDate()+""!="NaN"){const t=new Date;o=t<n&&t>r}return o}static getDeltaDays(t,e){const r=new Date(t),n=new Date(e),o=r.getFullYear(),a=r.getMonth()+1,s=r.getDate(),c=n.getFullYear(),i=n.getMonth()+1,l=n.getDate();t=new Date(o+"/"+a+"/"+s+" GMT+0800").getTime();const u=(e=new Date(c+"/"+i+"/"+l+" GMT+0800").getTime())-t;return Math.floor(u/864e5)}static getMin(t){let e=0;if(t.constructor===Array){const r=t.length;for(let n=0;n<r;n++)e=0===n?Number(t[0]):e>Number(t[n])?Number(t[n]):e}return e}static formatTwoDigits(t){return(Array(2).join("0")+t).slice(-2)}static formatDate(t,e){const r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),S:t.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(const t in r)new RegExp("("+t+")").test(e)&&(e=e.replace(RegExp.$1,1===RegExp.$1.length?`${r[t]}`:`00${r[t]}`.substr((""+r[t]).length)));return e}static getDay(){const t=new Date;return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()}static formatMoney(t){const e=["","K","M","G","T","P","E","Z","Y","B","N","D"];let r="";for(let n=0;n<e.length;n++){if(!(t>=1e4)){r=Math.floor(t)+e[n];break}t/=1e3}return""===r&&(r=Math.floor(t)+"U"),r}static formatTimeForSecond(t){let e="";const r=t%60;let n=Math.floor(t/60);n=n<0?0:n;const o=Math.floor(n/60),a=n%60;return o>0&&(e+=o>9?o.toString():"0"+o,e+=":"),e+=a>9?a.toString():"0"+a,e+=":",e+=r>9?r.toString():"0"+r,e}static formatTimeForMillisecond(t){let e=Math.floor(t/1e3%60),r=Math.floor(t/1e3/60%60),n=Math.floor(t/1e3/60/60);return`${e<10?"0"+e:e}:${r<10?"0"+r:r}:${n<10?"0"+n:n}`}static zip(t){const e=pako.gzip(encodeURIComponent(t),{to:"string"});return this.base64encode(e)}static rand(t){let e=this.clone(t);for(let t=e.length-1;t>=0;t--){const r=Math.floor(Math.random()*(t+1)),n=e[r];e[r]=e[t],e[t]=n}return e}})||n);e._RF.pop()}}}));

System.register("chunks:///_virtual/zh.ts",["cc"],(function(){"use strict";var e;return{setters:[function(i){e=i.cclegacy}],execute:function(){e._RF.push({},"3c2acsRBE9KO4h4sGTiBlRL","zh",void 0),window.i18nConfig||(window.i18nConfig={}),window.i18nConfig.languages||(window.i18nConfig.languages={}),window.i18nConfig.languages.zh={main:{dataLoading:"数据加载中...",dataLoadOver:"数据加载完成...",loginSuccess:"登录成功...",gameResourceLoading:"游戏资源加载中...",audioResourceLoading:"音效资源加载中...",mappingResourceLoading:"贴图资源加载中...",modelResourceLoading:"模型资源加载中...",entering:"正在进入..."},mainUI:{start:"点击屏幕开始",changeCar:"换车"},shop:{btnClose:"关闭",go:"前往",acquired:"已获得",current:"当前",receive:"领取",getGold:"看广告可获取金币"},balance:{"你完成了%{value}个订单":"你完成了%{value}个订单",youEarnedIt:"你赚到了",clickReceive:"点击领取",receiveImmediately:"立即领取"},carTask:{"初始车辆":"初始车辆","分享获得":"分享获得","签到获得":"签到获得","通过关卡获得":"通过关卡获得"},signin:{title:"七日登录",notYet:"暂不领取",normalReceive:"普通领取",receive:"领取",doubleReceive:"双倍领取",fillSignin:"补签"},fightManager:{loadingMap:"正在加载地图...",buildingCity:"开始建造城市...",cityLoadOver:"城市加载完毕..."},fightMap:{trimTheGround:"正在修整地面...",pavingTheRoad:"正在铺路中...",plantingTree:"正在栽树中...",decorateHouse:"正在装修房屋中...",paintLandmarks:"正在粉刷地标中..."},online:{close:"关闭",clickReceive:"点击领取",dailyIncome:"日常收益可领取"},lottery:{title:"幸运大转盘",free:"免费"},talk:{"你好,请到街对面接我.":"你好,请到街对面接我.","停车!停车!":"停车!停车!","去消费最高的地方.":"去消费最高的地方.","去附近的希尔顿酒店.":"去附近的希尔顿酒店.","司机快来!我老婆要生了!":"司机快来!我老婆要生了!","大哥快点,我赶时间.":"大哥快点,我赶时间.","师傅,5分钟内能到吗?":"师傅,5分钟内能到吗?","师傅,你是老司机嘛?":"师傅,你是老司机嘛?","师傅,你跑一天能赚多少?":"师傅,你跑一天能赚多少?","师傅快点,我要赶飞机.":"师傅快点,我要赶飞机.","师傅跟上那辆法拉利.":"师傅跟上那辆法拉利.","带我去最近的银行.":"带我去最近的银行.","帮我跟上前面那辆车!":"帮我跟上前面那辆车!","快去火车站,我赶车!":"快去火车站,我赶车!","我在酒店大堂门口等你.":"我在酒店大堂门口等你.","要下雨了,你快来!":"要下雨了,你快来!"},showReward:{title:"奖励",normalReceive:"普通领取",ReceiveImmediately:" 立即领取",doubleReceive:"双倍领取",alreadyHadCar:"您已拥有该车辆，自动转成对应金币",buySuccessful:"购买成功",confrim:"确认",signinReward:"签到奖励"},revive:{reviveImmediately:"立即复活",skip:"跳过",tips:"真可惜，只差一点就到终点了!",continue:"复活继续"},clickBox:{title:"神秘大礼",progress:"点击越快奖励越多",clickMe:"快点我",normalReceive:"普通领取",doubleReceive:"双倍领取"},trial:{title:"免费试用",tryItNow:"立即试用",giveUp:"放弃试用, 开始游戏"},invinceible:{title:"无敌开局",confirm:"确认",close:"关闭"},setting:{title:"设置",version:"版本号:",close:"关闭"}},e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});